!function(){"use strict";angular.module("frgu").directive("formStep",["$rootScope",function(e){return{scope:!0,templateUrl:e.staticDomainUrl+"htdocs/tpl/frgu/step-template-05b8ad50e7.html",restrict:"EA",replace:!0}}]).controller("regsvcController",["$scope","$rootScope","regionalService",function(e,t,r){var a=r.serviceCode,o=null,s=t.regionalServices[a||"default"]||[],i=t.userSelectedRegion||"00000000000";if(r&&r.originalUrl)for(var n=0;n<s.length;n++)if(i.startsWith(s[n])){e.applicationFormUrl=r.originalUrl+"/form";break}e.showHint=function(e){o&&o.classList.remove("has-hint"),o=e.target,e.target.classList.add("has-hint")},e.closeHint=function(){o&&o.classList.remove("has-hint"),o=void 0},t.breadcrumbs=[]}]).controller("baseFrguController",["$scope","$rootScope","$routeParams","$http","$location","$window","DisclaimerService","CatalogService","$route","RegionService","IconService","PerformanceService","$moment","LkService","ngDialog","$timeout","CheckFormLimitations","RemoveOffsetZone","$q","ipCookie",function(c,d,p,e,a,t,r,u,o,f,g,h,s,i,m,v,n,l,b,w){c.regionNotSupported=!1,c.regxOffVisible=/^\/(108290\/1|127280\/(3|4)|127718\/2)\/info/.test(a.path());var S,y,E,T,R,C,I=!0,O=(null==c.zeroStep&&(c.zeroStep={}),p.passportId?c.zeroStep.needShowZeroStep=!1:(p.passportId="10051"==p.id||"10005"==p.id||"10010"==p.id?"10051":"10070",p.targetId="10051"==p.passportId?1:4,c.zeroStep.needShowZeroStep=!0),c.passCode=p.passportId,c.epguCode=p.targetId,c.manualCardResources={},d.pay3_7Link&&d.pay3_7Link.split("/")||[]);c.passCode===O[0]&&c.epguCode===O[1]?a.path("/help/calculator-allowance"):(S=new RegExp(p.passportId+"/"),d.breadcrumbs=[],d.pageNameCls="catalog-page frgu-page",d.documentTitle("Карточка услуги"),c.loading=!0,c.typeEventRadioBtn={online:{title:"Получить услугу",url:null},equeue:{title:"Записаться на прием",url:null},mfc:{title:"Записаться в МФЦ",url:null},widget:{title:"Получить услугу",url:null},widgetnoauth:{title:"Получить услугу",url:null},custom:{title:"Получить услугу",url:null}},y={L:"LEGAL",B:"SOLE_PROPRIETOR",F:"FOREIGNER",P:"PERSON",15:"PERSON_CONFIRMED",10:"PERSON_LIGHT"},c.changeRadioType=function(e){var t=d.user.al<20?y[d.user.al]:y[d.userType];void 0===c.originalAuthText&&(c.originalAuthText=c.authText||!1),c.typeRadio=e,c.queueAuth&&c.queueAuth.length&&d.userId&&("online"===e?c.authText=c.originalAuthText:-1<["equeue","mfc"].indexOf(e)&&(c.authText=!c.queueAuth.some(function(e){return e===t})))},E=function(){h.measureStart("errorCard"),h.measureEnd("errorCard");c.dataErrorUrl={urlMessage:"Неверный адрес страницы",urlHint:"Проверьте, правильно ли вы ввели его. Если данные верны, пожалуйста, сообщите нам об ошибке"},c.loading=!1,c.errorUrl=!0},d.setFrguTitle=function(){c.frgu&&c.frgu.passport&&(c.passportAddTitle=c.frgu.passport.hrTitle||c.frgu.passport.shortTitle||c.frgu.passport.title),c.cardMainTitle=c.zeroStep.needShowZeroStep?c.zeroStep.title:c.passportAddTitle},T=function(e){var t;e&&e.data?(e.data.additionalAttributes&&e.data.additionalAttributes.length&&(I=!e.data.additionalAttributes.filter(function(e){return"multRegion"===e.name&&!0===e.value})[0]),e.data&&e.data.habsForPassport&&updateSeoData({metaRobots:"noindex, follow"}),"group"==e.data.responseType?(u.getPassport(c.passCode).then(function(e){d.$emit("withFRGUServiceID-event",e.data.passport.currentServiceTargetExtId),h.measureStart("groupCard");var t=e.data;t&&t.passport&&t.passport.id&&(d.servicesIdFRGU=t.passport.id),t&&!angular.equals(e.data,{})?(d.serviceGroup=t.colorCode,c.frgu=t,c.cardMainTitle||d.setFrguTitle(),c.config={showStructure:!0},d.cachedPathes||(d.cachedPathes={}),d.cachedPathes[t.passport.epguId]||(d.cachedPathes[t.passport.epguId]={}),d.cachedPathes[t.passport.epguId].colorCode||(d.cachedPathes[t.passport.epguId].colorCode=t.colorCode),d.cachedPathes[t.passport.epguId].servicesSize=t.passport.services.length):c.error=!0,c.loading=!1,h.measureEnd("groupCard")},function(){c.error=!0,c.loading=!1}),c.groups=e.data.services,c.groups.forEach(function(e){e.title=e.hrTitle||e.name||e.fullName}),d.documentTitle(e.data.title),c.groupTitle=e.data.title,c.groupHrTitle=e.data.hrTitle,d.breadcrumbs=[]):(d.serviceGroup=e.data.colorCode,c.frgu=e.data,c.cardMainTitle||d.setFrguTitle(),d.documentTitle(e.data.description&&e.data.description.officialName?e.data.description.officialName:"Карточка услуги"),c.typeRadio=null,c.countBtn=0,c.config={showStructure:!0},e.data&&e.data.passport&&Array.isArray(e.data.passport.services)&&(c.selected=e.data.passport.services.find(function(e){return e.selected}))),!window.isEmbedded&&c.frgu&&(!["10005","10010","10011"].includes(p.id)&&c.selected?r.serviceDisclaimerApi(c.frgu.stateOrg[c.frgu.stateOrg.length-1].id,c.frgu.passport.id,c.selected.id.lid):r.passportDisclaimer(c.frgu.stateOrg[c.frgu.stateOrg.length-1].id,c.frgu.passport.id)),"10005"===p.id&&(updateSeoData({metaTitle:"Оформление заграничного паспорта старого и нового образца",metaDescription:"На сайте Госуслуги можно подать заявление на оформление как нового, биометрического, заграничного паспорта, так и на оформление старого загранпаспорта."}),c.iconAlt="Заполнить и подать заявление для получения нового биометрического, или для старого образца заграничного паспорта",c.iconTitle="Подача заявления на загранпаспорт нового или старого образца"),t=/(booking|mfc)/.test(a.path())?["EQUEUE_ALTER_new_fs","EQUEUE_MFC_new_fs"]:"new_fs",e.data.additionalAttributes&&(c.newVersion=!!e.data.additionalAttributes.find(function(e){return-1!==t.indexOf(e.name)&&e.value})),c.frgu&&c.frgu.stateOrg&&(c.stateOrgIcon=g.setIcon(c.frgu.stateOrg[c.frgu.stateOrg.length-1]))):E()},R="312414"===p.passportId,c.cardButtonClick=function(){return window.isEmbedded||(window.metricReachGoal24845174(R?"voteregСardClick":"votedumСardClick",{id:p.passportId,place:"manualCardStep",okato:d.userSelectedRegion}),a.path("/"+p.passportId+"/"+p.targetId+"/form")),!1},c.checkRedirect=function(o,e,s,t){if(e&&window.metricReachGoal24845174(e),h.measureStart("usersCheck"),h.measureEnd("usersCheck",0,!1,{selectedType:t||"online"}),c.activateWidgetCounter&&(window.metricReachGoal24845174(R?"voteregСardClick":"votedumСardClick",{id:p.passportId,place:"manualCardButton",platform:window.SMUAdapter&&"function"==typeof window.SMUAdapter.getPlatform?window.SMUAdapter.getPlatform():"EPGUV3_"+("dk"==d.version?"DESK":"mob"==d.version?"MOB":"TAB")}),!window.isEmbedded))return a.path("/"+p.passportId+"/"+p.targetId+"/form"),!1;var i,n,l;switch(c.typeRadio){case"equeue":i=c.equeue_passportId,n=c.equeue_targetId;break;case"mfc":i=c.mfc_passportId,n=c.mfc_targetId;break;case"online":i=p.passportId,n=p.targetId}window.isEmbedded?(e=c.frgu.additionalAttributes.find(function(e){return"mpServiceBrowserOnly"===e.name&&e.value}),c.typeRadio&&"equeue"==c.typeRadio?window.SMUAdapter.notify({eventType:"open_browser",eventParams:[{key:"url",value:d.betaUrl+p.passportId+"/"+p.targetId+"/booking"},{key:"withAuth",value:!0}]}):c.hasCommonMfc&&c.typeRadio&&"mfc"===c.typeRadio?window.SMUAdapter.notify({eventType:"open_browser",eventParams:[{key:"url",value:d.betaUrl+c.attrs.mfcUrl},{key:"withAuth",value:!0}]}):e?window.SMUAdapter.notify({eventType:"open_browser",eventParams:[{key:"url",value:d.betaUrl+i+"/"+n+"/form"},{key:"withAuth",value:!0}]}):window.SMUAdapter.notify({eventType:"submitForm",eventParams:[{key:"formMnemonic",value:c.selected.id.eid},{key:"targetId",value:c.selected.id.lid}]}),s.preventDefault()):(t=p.passportId+"/"+p.targetId,(e={"Услуги":{}})["Услуги"][t]=["Получить услугу"],window.metricReachGoal24845174("Услуги",e),l=angular.element(s.target).attr("href"),s.preventDefault(),t={},"online"!==c.typeRadio&&(t={oldStyleCode:!0}),i&&n?u.checkServiceUrl(i,n,t).then(function(e){var t,a;function r(e,t){function r(){--e.ngDialogData.timeout,0<e.ngDialogData.timeout?a=t(r,1e3):location.href=e.ngDialogData.url}a=t(r,1e3)}e&&e.data&&!e.data.length?"24225"===i&&"5"===n?(r.$inject=["$scope","$timeout"],m.open({template:window.templatePath+"/tpl/directives/school-popup-a0cdf5240d.html",controller:r,className:"redirect-popup",preCloseCallback:function(){a&&v.cancel(a)},data:{timeout:10,url:d.betaUrl+i+"/"+n+"/form"}})):!S.test(o)&&I?(s.preventDefault(),d.redirectPopup(o,5)):l&&c.checkUrlCorrect(l):(s.preventDefault(),s.stopPropagation(),t={urlMessage:"Получение данной услуги невозможно для текущей учетной записи",urlHint:"Получение данной услуги невозможно для текущей учетной  записи"},e.data&&e.data.length&&(t.urlMessage=e.data[0].message||t.urlMessage,t.urlHint=e.data[0].hint||t.urlHint,t.urlRuleMessage=e.data[0].ruleMessage||""),c.dataErrorUrl=t,c.loading=!1,c.errorUrl=!0)},function(e){s.preventDefault(),c.error=!0,c.loading=!1}):(e=c.hasCommonMfc&&c.attrs.mfcUrl===o,t=o&&o.match(/^(http|https):\/\//),S.test(o)||e||!t?l&&c.checkUrlCorrect(l):d.redirectPopup(o,5)))},c.attrs={infoUrl:"/"+p.passportId+"/"+p.targetId+"/info"},c.getManualResources=function(){var e="",t=c.passCode+"/"+c.epguCode;d.fedVotingUrl&&-1<d.fedVotingUrl.indexOf(t)&&(e="fed_election_card"),d.regVotingUrl&&-1<d.regVotingUrl.indexOf(t)&&(e="reg_election_card"),(e=d.homeVotingUrl&&-1<d.homeVotingUrl.indexOf(t)?"home_election_card":e)&&u.getGroups(e).then(function(e){e&&e.data&&e.data.localizedStrings&&e.data.localizedStrings.forEach(function(e){c.manualCardResources[e.code]=e.message})})},c.setElectionOrderInfo=function(e){if(c.electionOrderIsSeted)return!1;var t=s().subtract(6,"month").format();c.electionOrderIsSeted=!0,d.logined&&i.checkByStatus(e.id.eid,e.id.lid,["17","40","2","3","7"],t).then(function(e){c.showElectionOrderInfo=!(!e||200!=e.status)})},C=function(e){c.regionNotSupported=!0,c.loading=!1,c.noSubscribeRegion=e},O=function(){var e=a.search(),t={},r=b.defer();"mfc"===p.passportId?!e.mfcCode||isNaN(e.mfcCode)?(E(),r.reject()):(t.mfcCode=e.mfcCode,f.checkRegionHasMfc().then(r.resolve,function(){C(!0),r.reject()})):r.resolve(),r.promise.then(function(){u.getService(p.passportId,p.targetId,null,null,c.isManual,t).then(T,E).then(function(e){c.frgu&&c.frgu.passport&&c.frgu.passport.id&&("-1000011000001"==c.frgu.passport.id&&(c.election=!0),"-10002600000"==c.frgu.passport.id&&(c.showFsspIp=!0),d.$emit("withFRGUServiceID-event",c.frgu.passport.currentServiceTargetExtId));function t(){var e,t,r,a;c.loading=!1,c.selected&&(t=!0,(!(r=window.SMUAdapter&&"function"==typeof window.SMUAdapter.getPlatform?window.SMUAdapter.getPlatform():"")||"wp"===r&&(!window.external||window.external&&Object.keys(window.external).length&&void 0===window.external.notify))&&(t=!1),c.isMobilePlatform=t,a={},c.frgu.additionalAttributes&&(c.frgu.additionalAttributes.forEach(function(e){a[e.name]=e.value}),a.election&&(c.isElection=!0,a.HOME_VOTING&&(c.homeVotingCard=!0,c.activateWidgetCounter=!0),a.voteDate)&&a.endDate&&a.startDate&&(c.electionEndTime=a.endDate,c.electionStartTime=a.startDate,c.voteDate=a.voteDate,!c.homeVotingCard&&moment(d.currentTime).isBefore(moment(c.voteDate).hour(23).minute(59).second(59))?c.activateWidgetCounter=!0:d.hideOrderButton=!0),a["mfc.button.disabled"]&&(e=a["mfc.button.disabled"].split(","),c.mfc_disabled=-1!=e.indexOf(window.platform)),a["booking.button.disabled"]&&(e=a["booking.button.disabled"].split(","),c.equeue_disabled=-1!=e.indexOf(window.platform)),a["order.button.disabled"]&&(e=a["order.button.disabled"].split(","),c.online_disabled=-1!=e.indexOf(window.platform)),a["widget.button.disabled"]&&(e=a["widget.button.disabled"].split(","),c.widget_disabled=-1!=e.indexOf(window.platform)),a["widgetnoauth.button.disabled"]&&(e=a["widgetnoauth.button.disabled"].split(","),c.widgetnoauth_disabled=-1!=e.indexOf(window.platform)),d.isInfomat&&(a.EQUEUE_MFC_INFOMAT_NOT_SUPPORTED&&(c.mfc_disabled=a.EQUEUE_MFC_INFOMAT_NOT_SUPPORTED),a.EQUEUE_ALTER_INFOMAT_NOT_SUPPORTED)&&(c.equeue_disabled=a.EQUEUE_ALTER_INFOMAT_NOT_SUPPORTED),a.EQUEUE_ALTER_URL&&!c.equeue_disabled&&(c.typeEventRadioBtn.equeue.url=a.EQUEUE_ALTER_URL,c.attrs.equeueUrl=a.EQUEUE_ALTER_URL,c.typeRadio||(c.typeRadio="equeue"),c.countBtn++),a.widget_url&&(c.typeEventRadioBtn.widget.url=a.widget_url,c.attrs.widgetUrl=a.widget_url,c.typeRadio||(c.typeRadio="widget"),c.countBtn++),a.widgetnoauth_url&&(c.typeEventRadioBtn.widget.url=a.widgetnoauth_url,c.attrs.widgetUrl=a.widgetnoauth_url,c.typeRadio||(c.typeRadio="widgetnoauth"),c.countBtn++),a.EQUEUE_MFC_URL?c.mfc_disabled||(c.typeEventRadioBtn.mfc.url=a.EQUEUE_MFC_URL,c.attrs.mfcUrl=a.EQUEUE_MFC_URL,c.typeRadio||(c.typeRadio="mfc"),c.countBtn++):a.EQUEUE_COMMON_MFC&&(c.hasCommonMfc=!0,c.typeEventRadioBtn.mfc.url=a.EQUEUE_COMMON_MFC,c.attrs.mfcUrl=a.EQUEUE_COMMON_MFC,c.countBtn++),a.SERVICE_RECIPIENT&&(c.levelAuth=a.SERVICE_RECIPIENT),a.SERVICE_RECIPIENT_QUEUE&&(c.queueAuth=a.SERVICE_RECIPIENT_QUEUE||"",c.queueAuth=c.queueAuth.split(",")),a.EQUEUE_MFC_TARGET&&(c.mfc_passportId=a.EQUEUE_MFC_TARGET),a.EQUEUE_ALTER_TARGET&&(c.equeue_passportId=a.EQUEUE_ALTER_TARGET),a.EQUEUE_MFC_MNEMONIC&&(c.mfc_targetId=a.EQUEUE_MFC_MNEMONIC),a.EQUEUE_ALTER_MNEMONIC&&(c.equeue_targetId=a.EQUEUE_ALTER_MNEMONIC),a.SMS_CONFIRM&&(c.smsConfirm=a.SMS_CONFIRM),a.hideRightBar=!0,a.hideRightBar&&(c.hideRightBar=a.hideRightBar),c.supportDS=a.supportsDS&&"EDS_MANDATORY"==a.supportsDS),c.isElection&&(c.setElectionOrderInfo(c.selected),c.getManualResources()),c.selected.url)&&!c.online_disabled&&(c.typeEventRadioBtn.online.url=c.selected.url,c.attrs.formUrl=c.selected.url,c.typeRadio="online",c.countBtn++),c._childCallback&&c._childCallback.call(c)}if(c.frgu){d.breadcrumbs=[],c._processOffices&&p.passportId&&p.targetId&&u.getServiceOffices(p.passportId,p.targetId,c.frgu.version,c.frgu.stateOrg[c.frgu.stateOrg.length-1].id).then(c._processOffices);var r=c.frgu.passport,a=!1,o=!1,s={};d.cachedPathes||(d.cachedPathes={}),d.cachedPathes[r.epguId]||(d.cachedPathes[r.epguId]={}),d.cachedPathes[r.epguId].colorCode||(d.cachedPathes[r.epguId].colorCode=c.frgu.colorCode),d.cachedPathes[r.epguId].servicesSize=r.services.length;for(var i=0;i<r.services.length;i++)if(r.services[i].epguId==p.targetId){d.cachedPathes[r.epguId].services||(d.cachedPathes[r.epguId].services=[]);for(var n=0;n<d.cachedPathes[r.epguId].services.length;n++)if(d.cachedPathes[r.epguId].services[n].epguId==p.targetId){o=!0,s=d.cachedPathes[r.epguId].services[n],d.cachedPathes[r.epguId].services.splice(n,1);break}o?(r.services[i].manualCard&&0!=r.services[i].manualCard.length&&(s.manualCard=!0),s.groupCode=r.services[i].groupCode,d.cachedPathes[r.epguId].services.push(s)):(r.services[i].manualCard&&0!=r.services[i].manualCard.length&&(a=!0),d.cachedPathes[r.epguId].colorCode||(d.cachedPathes[r.epguId].colorCode=r.services[i].colorCode),d.cachedPathes[r.epguId].services.push({epguId:r.services[i].epguId,groupCode:r.services[i].groupCode,manualCard:a}));break}c.frgu.passport&&c.frgu.passport.concentratorHabSimplePassports&&c.frgu.passport.concentratorHabSimplePassports.habPassport&&c.frgu.passport.concentratorHabSimplePassports.habPassport.length&&(c.passportHab=c.frgu.passport.concentratorHabSimplePassports),c.passportHab&&c.passportHab.habPassport.length&&"C"===c.frgu.passport.passportType&&(c.showButtonSendToInfoFoHab=!0),c.frgu&&c.frgu.roleMessages&&c.frgu.roleMessages.length&&(c.isAttributeRuleForTest=c.frgu.roleMessages.find(function(e){return"attributeRuleForTest"===e.code}),!c.isManual)&&c.frgu.roleMessages.length&&c.frgu.roleMessages[0].data&&(c.authText="",c.frgu.roleMessages[0].data.forEach(function(e){c.authText+=e.hint||""})),c.frgu.passport&&c.config.showStructure&&c.frgu.stateOrg&&c.frgu.stateOrg.length&&c.frgu.stateOrg[c.frgu.stateOrg.length-1].title&&("C"!==c.frgu.passport.passportType?c.departmentData={type:"N",showStructure:c.config.showStructure,href:c.frgu.stateOrg[c.frgu.stateOrg.length-1].id,code:c.frgu.stateOrg[c.frgu.stateOrg.length-1].ico,name:c.frgu.stateOrg[c.frgu.stateOrg.length-1].title,stateOrgIcon:g.setIcon(c.frgu.stateOrg[c.frgu.stateOrg.length-1]),addPos:c.frgu.passport.posVisible}:"C"===c.frgu.passport.passportType&&c.frgu.passport.concentratorHabSimplePassports&&c.frgu.passport.concentratorHabSimplePassports.habPassport&&1===c.frgu.passport.concentratorHabSimplePassports.habPassport.length&&(c.departmentData={type:"C",showStructure:c.config.showStructure,href:c.frgu.passport.concentratorHabSimplePassports.habPassport[0].stateStructureId,code:c.frgu.passport.concentratorHabSimplePassports.habPassport[0].ico,name:c.frgu.passport.concentratorHabSimplePassports.habPassport[0].stateStructureTitle,stateOrgIcon:g.setIcon(c.frgu.passport.concentratorHabSimplePassports.habPassport[0]),addPos:c.frgu.passport.posVisible})),c.visibleSendToInfoAttr=!0,c.frgu&&c.frgu.additionalAttributes&&c.frgu.additionalAttributes.length&&c.frgu.additionalAttributes.forEach(function(e){("visible_sendToInfo"===e.name&&!1===e.value||"frguCardForMpULDisabled"===e.name&&!0===e.value&&d.mobVersionBusiness)&&(c.visibleSendToInfoAttr=!1),"SHOW_FEEDS"===e.name&&!0===e.value&&(c.needFeeds=!0)}),c.frgu.additionalAttributes&&c.frgu.additionalAttributes.find(function(e){return"REGION_CHECK"==e.name&&e.value})?(c.regionNotSuppportedError=null,f.check(!0,p.passportId,p.targetId).then(function(e){!e||e.errorCode?(C(),e&&e.errorCode&&(c.regionNotSuppportedError=e)):t()})):t()}c.selected&&!c.selected.url&&c.selected.externalUrl&&!c.online_disabled&&(c.externalUrl=c.selected.externalUrl,~c.selected.externalUrl.indexOf("://")?c.externalUrlDomain=c.selected.externalUrl.split("/")[2].replace("www.",""):c.externalUrlDomain=c.selected.externalUrl.split("/")[0].replace("www.",""),l=c.externalUrlDomain.split("."),c.externalUrlDomain=l[l.length-2]+"."+l[l.length-1],c.showExternalUrl=c.externalUrl&&(!c.typeRadio||!c.typeEventRadioBtn[c.typeRadio].url)),c.cardMainTitle||d.setFrguTitle();var l=c.frgu&&c.frgu.description&&c.frgu.description.ordering||{},l="N"===l.formStatus||"A"===l.formStatus&&!l.url;c.roleMessageShow=!d.userId&&!c.isAttributeRuleForTest&&c.authText&&!c.showExternalUrl&&c.selected&&c.selected.id.eid&&!l})})},d.userId?n.checkLimitations(p.passportId,p.targetId).catch(function(e){400===e.status&&(c.errorLimitation=e.data.error)}).finally(O):O(),d.$on("region-changed",function(){o.reload()}),c.checkGisdoEnabled=function(e){return!(window.isEmbedded||!e)||!(!window.isEmbedded||!e||(e="mobVersion",2!=(e=("; "+document.cookie).split("; "+e+"=")).length)||!e.pop().split(";").shift())},c.redirectGisdo=function(e,t){c.selected.id.lid;"faq"===t&&(location.href="/10095/1",e.stopPropagation),t=d.logined?c.frgu.description.gisDoTargetExtId?d.gisdoUrl+"appeals/new?userSelectedRegion="+d.userSelectedRegion+"&service="+c.frgu.description.gisDoTargetExtId:d.gisdoUrl+"appeals/new?org="+c.frgu.description.gisDoStateStructureExtId+"&userSelectedRegion="+d.userSelectedRegion:c.frgu.description.gisDoTargetExtId?d.gisdoUrl+"services/"+c.frgu.description.gisDoTargetExtId+"?userSelectedRegion="+d.userSelectedRegion:d.gisdoUrl+"orgs/"+c.frgu.description.gisDoStateStructureExtId+"?userSelectedRegion="+d.userSelectedRegion,window.isEmbedded?window.SMUAdapter.notify({eventType:"gisdo",eventParams:[{key:"url",value:t}]}):window.open(t,"_blank")},c.sendToInfo=function(){var e;window.isEmbedded?window.SMUAdapter.notify({eventType:"click",eventParams:[{key:"href",value:c.attrs.infoUrl}]}):c.passportHab&&c.passportHab.habPassport.length?1==c.passportHab.habPassport.length&&1==c.passportHab.habPassport[0].passports.length?(e=c.passportHab.habPassport[0].passports[0],a.path("/"+e.epguId+"/"+(e.code||""))):c.showPopupHab():(a.path(c.attrs.infoUrl),a.replace()),history.pushState(history.state,document.title,location.href)},c.getService=function(){window.isEmbedded?window.SMUAdapter.notify({eventType:"submitForm",eventParams:[{key:"formMnemonic",value:c.selected.id.eid},{key:"targetId",value:c.selected.id.lid}]}):location.href=c.attrs.formUrl},c.redirectToUrl=function(e){window.isEmbedded?window.SMUAdapter.notify({eventType:"open_faq",eventParams:[{key:"faq_key",value:"140"}]}):e&&c.checkUrlCorrect(e)},c.showHabPopup=!1,c.checkUrlCorrect=function(e){var t,r=new RegExp(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi);new RegExp(/(6[01]\d{4})\/([0-9]+)/).test(e)?window.open(e,"_self"):c.newVersion?"/"==e[0]?a.path(e):e.match(r)?((t=document.createElement("a")).href=e,a.path(t.pathname)):location.href="/"+e:location.href="/"==e[0]||e.match(r)?e:"/"+e})}]).controller("handcraftCtrl",["$scope","$rootScope","$location","$controller","$routeParams","PerformanceService","CatalogService","userTypeService","$timeout","$anchorScroll","RemoveOffsetZone","$http","OkatoService","CMSService",function(y,E,T,e,R,C,I,t,O,_,U,P,M,k){y.isManual=!0,C.measureStart("handCard"),e("baseFrguController",{$scope:y}),y.needShow=!1,y.linksList=[],y.showDiaryExport="/"+R.passportId+"/"+R.targetId==E.coronaDiaryForm,y.showFAQ="434403"===R.passportId&&["2","3"].includes(R.targetId)?R.passportId+"_"+R.targetId:"",y.showRequisitesForm="434403"===R.passportId&&["2","3"].includes(R.targetId)||"10626"===R.passportId&&"1"===R.targetId?R.passportId+"_"+R.targetId:"",E.pageNameCls="catalog-page frgu-page without-bottom-padding",y.zeroStep.needShowZeroStep||(E.pageNameCls+=" non-op"),"555666"==R.passportId&&(y.noNumbers=!0,E.pageNameCls+=" steps-without_numbers"),$("#footer-placeholder").remove(),y._childCallback=function(){var r,p;if(y.activateWidgetCounter&&(y.widgetCounter={end:+new Date(y.electionEndTime)-E.currentTime,start:+new Date(y.electionStartTime)-E.currentTime,startText:moment(U(y.electionStartTime)).format("D MMMM"),text:moment(U(y.electionEndTime)).format("HH:mm (московское время) D MMMM YYYY")+" года",woTimeText:moment(U(y.electionEndTime)).format("D MMMM YYYY")+" года"},y.voteDate)&&(y.homeVotingCard?(v=moment(U(y.voteDate)).hours(14).minutes(0).seconds(0),y.widgetCounter.voteEnd=v.isBefore(E.currentTime,"seconds")):y.widgetCounter.voteEnd=moment(U(y.voteDate)).isBefore(E.currentTime,"days")),y.frgu&&y.frgu.habsForPassport&&updateSeoData({metaRobots:"noindex, follow"}),y.frgu&&y.frgu.description&&y.frgu.description.timeTerm&&y.frgu.description.timeTerm.terms&&!y.zeroStep.needShowZeroStep&&y.linksList.push({title:"Информация об услуге",anchor:"terms"}),y.cardSteps)a=y.cardSteps;else if(y.selected&&y.selected.manualCard&&0!=y.selected.manualCard.length)a=y.selected.manualCard,y.sourceSteps=JSON.stringify(a,null,2),a.forEach(function(e){switch(e.type){case"begin":y.zeroStep.needShowZeroStep||y.linksList.push({title:"Как получить услугу",anchor:"getServ"});break;case"information":y.frgu.description.timeTerm||y.frgu.description.timeTerm.terms||y.zeroStep.needShowZeroStep||y.linksList.push({title:"Информация об услуге",anchor:"terms"})}});else{if(!y.___)return C.measureEnd("handCard"),T.path(y.attrs.infoUrl),void T.replace();a=[],y.sourceSteps="[]"}y.orderTypes={},y.config={showStructure:!0},y.hasCommonMfc&&(b=(v=a.find(function(e){return"select"===e.type})).html&&JSON.parse(v.html),b=v.html&&!!b.find(function(e){return"mfc"===e.orderType}),y.hasCommonMfc=!b,y.hasCommonMfc)&&(r=-1,a.slice().reverse().some(function(e,t){if("finish"===e.type)return r=-1*(t+1),!0}),v.html?((b=JSON.parse(v.html)).push(m("radio")),v.html=JSON.stringify(b)):(p="t_"+(S=a.find(function(e){return"orderType"===e.type})).title,v.html=JSON.stringify([{title:"Электронная услуга",group:p,orderType:S.title},m("radio")])),a.splice.apply(a,[r,0].concat(m("steps"))));var a=a.filter(function(i){if("zeroStep"==i.type&&!window.mobileVersion||"zeroStepMobile"==i.type&&window.mobileVersion||y.___&&("zeroStep"==i.type||"zeroStepMobile"==i.type))return y.zeroStep||(y.zeroStep={}),y.zeroStep.body=i.html,y.zeroStep.title=i.title.split("__")[0],y.zeroStep.subTitle=i.title.split("__")[1],y.zeroStep.secondStepSubTitle=i.title.split("__")[2],!1;if("zeroStep"==i.type&&window.mobileVersion||"zeroStepMobile"==i.type&&!window.mobileVersion)return!1;if("rightBar"==i.type)return y.withRightBar=!0,y.rightBar||(y.rightBar={}),y.rightBar.body=i.html,!1;if("orderType"==i.type){var e=!1;if(E.user.al<20)(-1!==(y.queueAuth||y.levelAuth).indexOf("PERSON_LIGHT")||-1!==(y.queueAuth||y.levelAuth).indexOf("PERSON_CONFIRMED")&&15<=E.user.al)&&(e=!0);else switch(i.title){case"online":e=!y.online_disabled,20<=E.user.al&&y.smsConfirm&&(E.user.mobilePhone&&E.user.mobilePhoneVerified||(e=!1));break;case"mfc":e=!y.mfc_disabled;break;case"equeue":e=!y.equeue_disabled;break;case"widget":e=!y.widget_disabled;break;case"widgetnoauth":E.widgetNoAuth=!0,e=!y.widgetnoauth_disabled;break;default:e=!0}if(e=y.election?!1:e){for(var t,r,a=i.html.split("__"),o=1;o<a.length;o++)-1<a[o].indexOf("customUrl:")?r=a[o].replace("customUrl:",""):t=a[o];y.orderTypes[i.title]={title:a[0],description:t},i.metric&&(y.orderTypes[i.title].metric=i.metric),y.typeEventRadioBtn[i.title]&&("widgetnoauth"===i.title?y.orderTypes[i.title].url=y.typeEventRadioBtn[i.title].url||y.typeEventRadioBtn.online.url:"custom"===i.title?y.orderTypes[i.title].url=r||y.typeEventRadioBtn.online.url:y.orderTypes[i.title].url=y.typeEventRadioBtn[i.title].url)}return!1}if("config"==i.type){try{var s=JSON.parse(i.html);angular.extend(y.config,s)}catch(e){}return!1}var n,l,c,d;return"information"!=i.type||y.election?("frguDocs"==i.type?(n='<p>Для получения услуги вам понадобятся следующие документы: </p><ul class="HC-base-ul">',l="</ul>",i.html="",y.frgu&&y.frgu.docs&&y.frgu.docs.inDocs&&y.frgu.docs.inDocs.length&&y.frgu.docs.inDocs.forEach(function(e){var t,r,a,o="",s="";e.title&&(e.description&&(t=e.type?"<b>"+e.type+"</b><br/><br/>":"",r=e.docType||"",o='<div data-q-tooltip="'+(a=Math.random().toString(36).substr(2,9))+'"></div>',s='<div data-q-tooltip-container="'+a+'">'+t+r+"<br/>"+e.description),i.html+="<li>"+e.title+o+s+"</li>")}),s='Подайте заявление в <a href="{{attrs.infoUrl}}#block-contacts">ведомство</a>',d="",d=y.attrs.formUrl?'<a data-ng-click="checkRedirect(attrs.formUrl, false, $event)" href="{{attrs.formUrl}}">Заполните</a> электронную форму заявления':"Заполните электронную форму заявления",s=(i.html&&(i.html=n+i.html+l),i.type="step","t_personal"===i.group?s:d),i.title=i.title||s):"frguFinish"==i.type?(n='<ul class="HC-base-ul">',l="</ul>",c=0,i.html="",y.frgu.docs.scenarios.forEach(function(e){"Положительный результат предоставления услуги/исполнения функции"===e.type&&e.outDocuments.forEach(function(e,t,r){1<r.length?i.html+="<li>"+e.title+"</li>":(i.html=e.title,c++)})}),""!==i.html&&0===c?i.html=n+i.html+l:i.html=i.html||y.frgu.description.results.description,i.type="finish",i.title=i.title||"Получите документ / результат оказания услуги",p&&!i.group&&(i.group=p)):(["step","finish"].includes(i.type)&&p&&!i.group&&(i.group=p),"posobie-terms"===i.type&&("434403"===R.passportId&&"2"===R.targetId||["10624","10625","10626"].includes(R.passportId)&&"1"===R.targetId)&&(i.type="step",i.html="",d=M.getFederalNum(),P({url:E.nsiApi+"dictionary/POSOBIE_37",method:"POST",withCredentials:!0,data:{treeFiltering:"ONELEVEL",pageNum:"1",selectAttributes:["*"],tx:"",filter:{simple:{attributeName:"OKATO",condition:"EQUALS",value:{asString:d}}}}}).then(function(e){var e=e.data;e.items&&e.items.length&&(e=e.items[0],"434403"===R.passportId&&"2"===R.targetId?(i.type="finish",i.html='<p><b>Размер выплаты</b><ul class="HC-base-ul"><li>'+e.attributeValues.MROT_50+" &#8381; — 50% регионального прожиточного минимума для детей, базовый размер выплаты</li><li>"+e.attributeValues.MROT_75+" &#8381; — 75% регионального прожиточного минимума для детей, если при выплате в размере 50% среднедушевой доход семьи не достиг регионального прожиточного минимума на душу населения</li><li>"+e.attributeValues.MROT_100+' &#8381; — 100% регионального прожиточного минимума для детей, если при выплате в размере 75% среднедушевой доход семьи не достиг регионального прожиточного минимума на душу населения</li></ul><p><b>Назначение выплаты</b> — в любое время, но не ранее 3-летия ребёнка</p><p><b>Расчёт выплаты</b></p><ul class="HC-base-ul"><li>с месяца достижения 3 лет при подаче заявления не позднее 6 месяцев с этого дня</li><li>с месяца обращения при подаче заявления позднее 6 месяцев с даты 3-летия</li></ul><p><b>Перечисление денег</b> — сроки зачисления выплаты устанавливаются на уровне региона. Условия можно уточнить в нормативном акте конкретного субъекта РФ. Выплата назначается на 12 месяцев, но не более чем до 8-летия ребенка. Продление — по новому заявлению.<br><br>Если срок назначения выплаты не истёк, её размер подлежит перерасчёту с 1 января следующего года<br>На сколько вырастет выплата, зависит от того, какой прожиточный минимум для детей установили в вашем регионе в новом году. Заявление на перерасчёт подавать не нужно — сумму пересчитают автоматически</p>'):"10625"===R.passportId?(i.type="finish",i.html="<p><b>Размер пособия</b> — "+e.attributeValues.MROT_50+' &#8381;, 50% прожиточного минимума для детей в регионе</p><p><b>Назначение пособия</b> — в любое время, но не ранее 8-летия ребёнка</p><p><b>Расчёт пособия</b> — всегда целиком за месяц:</p><ul class="HC-base-ul"><li>с месяца достижения 8 лет при подаче заявления не позднее 6 месяцев с даты 8-летия</li><li>с месяца обращения при подаче заявления позднее 6 месяцев с даты 8-летия</li></ul><p><b>Перечисление денег</b> — деньги поступят на счёт в период с 1-го по 25-е число следующего месяца после принятия решения по заявлению. За месяц, в котором ребёнку исполнилось 17 лет, пособие придёт в полном размере. По истечении 12 месяцев требуется повторная подача заявления</p>'):"10624"===R.passportId?(i.type="finish",i.html="<p><b>Размер пособия</b> — "+e.attributeValues.MROT_50_10624+" &#8381;, 50% прожиточного минимума для трудоспособного населения в регионе</p><p><b>Подача заявления</b> — с 12-й недели беременности, если вы уже стоите на учёте</p><p><b>Назначение пособия</b> — с месяца постановки на учет, но не ранее 6 недель беременности</p><p><b>Расчёт пособия</b> — всегда целиком за месяц</p><p><b>Перечисление денег</b> — деньги поступят на счёт в период с 1-го по 25-е число месяца, следующего за месяцем, за который оно выплачивается. Если заявление зарегистрировано в день родов — пособие будет назначено за один полный месяц</p>"):"10626"===R.passportId&&(i.type="finish",i.html='<p><b>Размер выплаты</b><ul class="HC-base-ul list-blue-dotted"><li>'+e.attributeValues.MROT_50+" &#8381; — 50% регионального прожиточного минимума для детей, базовый размер выплаты</li><li>"+e.attributeValues.MROT_75+" &#8381; — 75% регионального прожиточного минимума для детей, если при выплате в размере 50% среднедушевой доход семьи не достиг регионального прожиточного минимума на душу населения</li><li>"+e.attributeValues.MROT_100+' &#8381; — 100% регионального прожиточного минимума для детей, если при выплате в размере 75% среднедушевой доход семьи не достиг регионального прожиточного минимума на душу населения</li></ul><p>Размер выплаты внутри региона может отличаться в зависимости от муниципалитета</p><p><b>Назначение выплаты</b></p><p>Выплата назначается на 12 месяцев, но не больше, чем до 17-летия ребёнка. Если заявитель или члены семьи получили статус безработных с 1 марта 2022 года и позднее, выплату назначат на 6 месяцев</p><p>При подаче до 1 октября 2022 года выплату назначат за период с 1 апреля 2022 года, но не ранее 8-летия ребёнка</p><p>При подаче с 1 октября 2022 года выплату назначат:</p><ul class="HC-base-ul list-blue-dash"><li>с месяца, когда ребёнку исполнилось 8 лет, если со дня рождения прошло не более полугода</li><li>с месяца обращения — если прошло более полугода</li></ul><p><b>Расчёт выплаты</b> — всегда целиком за месяц</p><p><b>Перечисление денег</b> — не позднее 5 дней после назначения, далее ежемесячно с 1 по 25 число. За месяц, в котором ребёнку исполнилось 17 лет, выплата придёт в полном размере. По истечении срока назначения нужно подать заявление повторно. Подайте новое заявление не раньше, чем за месяц до окончания текущего срока</p>'))},function(e){}))),!0):(y.information=i.html,!1)}),l=[];a.forEach(function(e,t){if(e.order=t,"select"===e.type)try{e.config=JSON.parse(e.html),e.current=e.config[0],l.push(e)}catch(e){}/_/.test(e.type)&&(t=e.type.split("_"),e.type=t[0],e.stepNo=t[1])}),0==l.length&&Object.keys(y.orderTypes).length&&l.push({current:{orderType:Object.keys(y.orderTypes)[0]}}),l.length&&l[0].current&&(y.typeRadio=l[0].current.orderType);for(var e,o,s,t=0;t<a.length;t++)"auth"==a[t].type&&(e=y.frgu&&y.frgu.roleMessages||[])&&e.length&&(o=0,s=t,y.authText="",e.forEach(function(e){e=e.data;e&&e.length&&e.forEach(function(e){var t;E.userId?(t="auth_"+o++,a.splice(++s,0,{type:t,message:e.message||"",hint:e.hint||"",ruleMessage:e.ruleMessage||""}),y.authText=!0):y.authText+=e.hint||""})}));function i(){var e=y.actionButton(),t=((r=$(".form-steps").offset()?($(".form-steps").offset().top+$(".form-steps").outerHeight(!0)).toFixed():r)-(t=$("#start-content").parent().offset()?($("#start-content").parent().offset().top+$("#start-content").parent().outerHeight(!0)).toFixed():t)).toFixed().toString()+"px",r=r<=window.pageYOffset+window.screen.height&&r>=window.screen.height,e=($("#start-content").toggleClass("bottom-stopped",r),$("#smartRightBar").toggleClass("bottom-stopped",r),e&&e.description&&e.url?"110px":e.url?"75px":"0px");r?($("#start-content").css({top:t,position:"relative"}),$(".form-steps").css({"padding-bottom":e})):(r={top:"auto",position:"static"},y.showExternalUrl&&(r["margin-bottom"]="100px"),$("#start-content").css(r))}var n,c,d,u=R.id||R.passportId+(R.targetId?"_"+R.targetId:""),f=R.id?"passport":"target";y.$watchGroup(["userTypeGosBar","changeHeaderFilter"],function(){y.typeForElm={L:"legal",B:"entrepreneurs",F:"foreign"}[E.userTypeGosBar||E.userType]||null,E.isEmbedded||I.getElmDetails(f,u,y.typeForElm).then(function(e){if(e.data){var t=[];if(y.elmLinksList=[],y.handcraftSeo=[],y.handcraftFaq=[],y.handcraftFaqLinks=[],y.handcraftLs=[],y.handcraftTargets=[],y.handcraftPassports=[],y.handcraftHabs=[],y.handcraftNews=[],e.data.ls&&e.data.ls.items&&e.data.ls.items.length&&(y.handcraftLs=e.data.ls.items,y.lsRows=splitRows(y.handcraftLs,2),y.elmLinksList.push({title:"Жизненные ситуации",anchor:"lifeSituations"})),e.data.faq&&e.data.faq.items&&e.data.faq.items.length&&(y.handcraftFaq=e.data.faq.items),e.data.lsCategory&&e.data.lsCategory.items&&e.data.lsCategory.items.length&&(y.lsButton=e.data.lsCategory.items[0]),e.data.faqCategories&&e.data.faqCategories.items&&e.data.faqCategories.items.length&&(y.handcraftFaqLinks=e.data.faqCategories.items),(y.handcraftFaq.length||y.handcraftFaqLinks.length)&&y.elmLinksList.push({title:"Частые вопросы",anchor:"faq"}),y.frgu&&y.frgu.description&&y.frgu.description.gisdo&&!y.zeroStep.needShowZeroStep&&y.elmLinksList.push({title:"Возникли проблемы?",anchor:"help"}),e.data.target&&e.data.target.items&&e.data.target.items.length&&(y.passportTargets=e.data.target.items.slice(0,3),t.push(y.passportTargets)),e.data.passport&&e.data.passport.items&&e.data.passport.items.length&&(y.passportPassports=e.data.passport.items.slice(0,3),t.push(y.passportPassports)),e.data.hab&&e.data.hab.items&&e.data.hab.items.length&&(y.passportHabs=e.data.hab.items.slice(0,3),t.push(y.passportHabs)),t.length){var r=t[0].concat(t[1],t[2]);y.elmServices=[];for(var a=0;a<3;a++)void 0!==r[a]&&y.elmServices.push(r[a]);y.elmServices=splitRows(y.elmServices,2),y.elmLinksList.push({title:"Связанные услуги",anchor:"services"})}else y.elmServices=[];e.data.news&&e.data.news.items&&e.data.news.items.length&&(y.handcraftNews=e.data.news.items,y.elmLinksList.push({title:"Полезные материалы",anchor:"custom-footer"})),e.data.seo&&e.data.seo.items&&e.data.seo.items.length&&(y.handcraftSeo=e.data.seo.items[0]),y.elmLinksList.length&&y.elmLinksList.push("finished"),!y.handcraftNews.length&&y.handcraftSeo.content?y.seoAnchor="custom-footer":y.seoAnchor=""}else y.frgu&&y.frgu.description&&y.frgu.description.gisdo&&!y.zeroStep.needShowZeroStep&&y.linksList.push({title:"Возникли проблемы?",anchor:"help"})})});function g(){var e,t,r,a,o=document.getElementById("smartRightBar")&&document.getElementById("smartRightBar").getBoundingClientRect();!E.loading&&o&&o.height&&o.width&&(e=(o=$("#smartRightBar")).height(),a=Math.floor($(document).height()),c!==a&&(c=a,n=d=0),a=0,"dk"===E.version&&(t=$(".department-icon"),r=y.showCardBanner()?78:0,a=30+(t[0]?t.outerHeight(!0):0)+r),d=d||$("#start-content").offset().top+a,n=n||("pad"===E.version&&(y.handcraftFaq&&y.handcraftFaq.length||y.handcraftFaqLinks&&y.handcraftFaqLinks.length)?Math.floor($("#faq").offset().top+e):y.handcraftNews&&y.handcraftNews.length||y.handcraftSeo&&y.handcraftSeo.content?Math.floor($("#custom-footer").offset().top):Math.floor($("#footer-wrapper").offset().top)),o.toggleClass("top-stopped",window.pageYOffset+50+30<d),n<=window.pageYOffset+e+160?(o[0].style.position="absolute",o.offset({top:n-e-80})):o[0].removeAttribute("style"),"pad"===E.version)&&(t=document.querySelector(".handcraft-right-bar").getBoundingClientRect()).width&&((r=document.querySelector(".action-button-wrap"))&&r.classList.remove("pad-custom-offset"),"absolute"===getComputedStyle(o[0]).position?(o[0].style.left=(1140<window.innerWidth?740:t.left-50)+"px",a=t.height-220,o[0].style.top=(a<0?0:a)+"px"):o[0].style.left=t.left+"px")}"dk"!=E.version&&"pad"!=E.version||y.zeroStep.needShowZeroStep||!y.linksList.length?"mob"!=E.version||y.zeroStep.needShowZeroStep||!E.logined&&!E.widgetNoAuth||(window.addEventListener("scroll",i),y.$on("$destroy",function(){window.removeEventListener("scroll",i,!1)})):(interval&&clearInterval(interval),"pad"===E.version&&O(function(){var e=setInterval(function(){document.querySelector(".handcraft-right-bar").getBoundingClientRect().left&&(clearInterval(e),g())},300)},500,!0),window.addEventListener("scroll",g),y.$on("$destroy",function(){window.removeEventListener("scroll",g,!1),$("#right-bar").remove()})),y.actionButton=function(e){return window.mobileVersion?l.length&&l[0].current.orderType&&y.orderTypes[l[0].current.orderType]||null:!e.config&&Object.keys(y.orderTypes).length?y.orderTypes[Object.keys(y.orderTypes)[0]]:e.current&&e.current.orderType&&y.orderTypes[e.current.orderType]&&y.orderTypes[e.current.orderType]||null},y.scrollToAnchorLink=function(e,t){e.preventDefault(),_(t),O(function(){_(t)},50)},y.showPopupHab=function(){y.showHabPopup=!0},y.redirectHabLink=function(e){y.showHabPopup=!1,T.path(e)};var h=/^.+_/;function m(e){var t="__mfc";return{radio:{title:"Посещение МФЦ",group:t,orderType:"mfc"},steps:[{group:t,title:"Посетите МФЦ в выбранное время и подайте заявление",type:"step"},{group:t,html:"О сроках и способе получения вам сообщат при подаче заявления",title:"Дождитесь готовности документа",type:"step"},{group:t,html:"",title:"Получите результат оказания услуги",type:"finish"},{html:"Записаться в МФЦ",type:"orderType",title:"mfc"}]}[e]}y.getSteps=function(){O(function(){y.needShow=!0},0,!1);var t=0,n=!!l.find(function(e){var t=e.current&&["online","custom","widget"].includes(e.current.orderType);return e.current&&(t||"mfc"===e.current.orderType&&y.hasCommonMfc)}),e=(y.isAttributeRuleForTest&&(n=!1),a.filter(function(e){if(n&&(e.canHaveExtButton=!0),"auth"==e.type&&(E.logined||!n))return!1;if(0==e.type.indexOf("auth_")&&(y.isAttributeRuleForTest||!E.logined||l.length&&"online"!=l[0].current.orderType&&"custom"!=l[0].current.orderType&&"widget"!=l[0].current.orderType))return!1;if(e.group&&0<l.length){for(var t=0,r=e.group.split(" "),a=0;a<l.length;a++){var o=l[a].current;if((y.currentGroupRadio=o).group){var s=o.group.match(h);if(s){t++;for(var i=0;i<r.length;i++)if(0==r[i].indexOf(s[0])&&r[i]==o.group){t--;break}}}}return 0==t}return!0}));return e.forEach(function(e){e.stepNo?e.index=e.stepNo:(~["step"].indexOf(e.type)||~e.type.indexOf("auth_"))&&(e.index=++t)}),e},y.showCardBanner=function(){return y.actionCardMirBanner&&y.actionCardMirBanner.length},"10001"===R.passportId&&"1"===R.targetId&&k.getTargetPlaces("action_card_MIR",!0).then(function(e){y.actionCardMirBanner=e.action_card_MIR&&e.action_card_MIR.list}),y.testSteps=a,y.goToDiaryExport=function(){window.SMUAdapter.notify({eventType:"open_browser",eventParams:[{key:"url",value:E.betaUrl+"category/health/exports/diary"},{key:"withAuth",value:!0}]})};var v,b={},w=(E.logined&&(S=y.currentGroupRadio&&y.currentGroupRadio.orderType||Object.keys(y.orderTypes)[0],v=y.orderTypes[S]&&y.orderTypes[S].url,w=!y.showExternalUrl||y.showExternalUrl&&"widget"===S,S=!E.isEmbedded||E.isEmbedded&&(!S||-1<["online","equeue","mfc"].indexOf(S)),b.showElementGoToForm=!(E.hideOrderButton||y.authText||!w||!S||!v||y.errorLimitation)),y.frgu.description.hrTitle||y.groupTitle||y.frgu.description.officialName||y.groupHrTitle),S=y.departmentData&&y.departmentData.name;updateSeoData({metaTitle:y.selected.metaTitle||w,metaDescription:y.selected.metaDescription||w+(S?". "+S:"")+".",metaKeyWords:y.selected.metaKeyWords}),C.measureEnd("handCard",0,!1,b)},y.FAQs={"434403_2":[{title:"Есть ли отличия в правилах выплаты в зависимости от региона?",text:["Правительством РФ утверждены общие правила назначения ежемесячной денежной выплаты на ребёнка в возрасте от 3 до 7 лет включительно.","На уровне регионов могут быть установлены дополнительные условия, а также требования к имущественной обеспеченности и нуждаемости семей.","Перед подачей заявления ознакомьтесь с нормативным правовым актом, который утверждает порядок назначения выплаты в вашем регионе."]},{title:"Есть ли ограничения для состава имущества семьи?",text:["Выплата назначется в том случае, если совокупность принадлежащего семье имущества укладывается в рамки этого перечня:",'<div class="all-offset-left-12"><ul class="bullit-marked"><li>одна квартира любой площади. Или несколько квартир, если площадь на каждого члена семьи меньше 24 квадратных метров. Непригодные для проживания помещения не учитываются при оценке нуждаемости. Также не учитываются квартиры, полученные многодетными семьями в качестве меры социальной поддержки; доли не более 1/3 от общей площади квартиры; квартира (ее часть), занимаемая членом семьи, страдающим тяжелой формой хронического заболевания, при которых невозможно совместное проживание граждан в одной квартире</li><li>один дом любой площади. Или несколько домов, если площадь на каждого члена семьи меньше 40 квадратных метров. Непригодные для проживания помещения не учитываются при оценке нуждаемости. Также не учитываются дома, полученные многодетными семьями в качестве меры социальной поддержки; доли не более 1/3 от общей площади дома; дом (его часть), занимаемая членом семьи, страдающим тяжелой формой хронического заболевания, при которых невозможно совместное проживание граждан в одной квартире</li><li>один гараж, машиноместо. Или два, если семья многодетная или семье автотранспортное или мототранспортное средство было выдано в рамках мер социальной поддержки, а также если у члена семьи есть инвалидность</li><li>земельный участок общей площадью не более 0,25 га, а для территории сельских поселений или межселенных территорий - 1 гектар. Не учитываются земельные участки, полученные многодетными семьями в качестве меры социальной поддержки, и дальневосточный гектар, а также земельные участки, находящиеся в общей долевой собственности земельных участков и земель сельскохозяйственного назначения</li><li>одно нежилое помещение. Не учитываются хозяйственные постройки, расположенные на земельных участках, предназначенных для ИЖС, ведения ЛПХ, садовых земельных участках, а также имущество, являющиеся общим имуществом в многоквартирном доме, имущество, являющиеся имуществом общего пользования садоводческого или огороднического некоммерческого товарищества</li><li>один мотоцикл. Или два, если семья многодетная, член семьи имеет инвалидность или мотоцикл получен в качестве меры соцподдержки</li><li>деньги на банковских вкладах, если годовой доход от процентов не больше прожиточного минимума в целом по России (в среднем — около 250 тыс. рублей в виде сбережений)</li></ul></div>','<div class="all-offset-left-12"><div class="all-offset-top-8">Семья может владеть квартирой, жилым домом, дачей, земельными участками, гаражом, автомобилем, мотоциклом, трактором и лодкой одновременно.</div><div class="all-offset-top-8">Если у семьи есть автомобиль младше 5 лет с двигателем мощностью более 250 лошадиных сил, права на выплату не возникает независимо от величины среднедушевого дохода. Исключение составляют случаи, когда такой автомобиль принадлежит семье с четырьмя и более детьми — и это микроавтобус, в котором более 5 посадочных мест.</div></div>','<div class="all-offset-top-24">Доход от вкладов на банковских счетах и вкладах, если среднедушевой доход от процентов не больше прожиточного минимума на душу населения в целом по РФ</div>']}],"434403_3":[{title:"Нужно ли приносить дополнительную справку с реквизитами?",text:["Нет, дополнительно приносить справку не требуется.","Достаточно указать корректные платежные реквизиты на интерактивной форме заявления."]}]},y.blueBlock={"434403_2":{text:"Если нужно подать заявление на внесение изменений на платёжные реквизиты, воспользуйтесь услугой",btnTitle:"Подать заявление",link:"434403/3"},"434403_3":{text:"Если вам необходимо подать заявление на получение выплаты на ребенка в возрасте от трех до семи лет включительно, воспользуйтесь другой услугой",btnTitle:"Подать первичное заявление",link:"434403/2"},"10626_1":{text:"Если нужно изменить способ получения выплаты, воспользуйтесь услугой",btnTitle:"Изменить реквизиты",link:"10626/2/form"}},y.goToLink=function(e){location.href=e}}]).controller("frguCtrl",["$scope","$rootScope","$routeParams","$location","$controller","CoordsToAddress","FrguModalData","PerformanceService",function(o,r,e,t,a,s,i,n){function l(e,t){o.center=[parseFloat(e),parseFloat(t)]}function c(e){o.geoObjects[0]={geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},properties:{name:e.title,balloonContentHeader:e.title,balloonContentFooter:e.fullAddress,hintContent:e.title}}}function d(t){var e,r,a=[];o.showMap=!0,t.fullAddress=(e=t.address,r="",r=(r=(r=(r=(r=(r=(r=(r=(r+=e.region||"")+(e.area?r?", "+e.area:e.area:""))+(e.cityType?r?", "+e.cityType:e.cityType:""))+(e.city?r?", "+e.city:e.city:""))+(e.town?r?", "+e.town:e.town:""))+(e.street?r?", "+e.street:e.street:""))+(e.house?r?", "+e.house:e.house:""))+(e.building?r?", корп./стр. "+e.building:e.building:""))+(e.office?r?", оф./комн. "+e.office:e.office:"")),t.addressString=(e=t.address,r=e.postIndex||"",r=(r=(r=(r=(r+=e.region?r?", "+e.region:e.region:"")+(e.city?r?", "+e.city:e.city:""))+(e.street?r?", "+e.street:e.street:""))+(e.house?r?", "+e.house:e.house:""))+(e.building?r?", корп./стр. "+e.building:e.building:"")),t.latitude&&t.longitude?(c(t),l(t.longitude,t.latitude),o.loadingMap=!1):t.addressString?a.push({address:/россия/i.test(t.addressString)?t.addressString:"Россия, "+t.addressString,title:t.title,index:0}):o.showMap=!1,a.length&&s([a[0].address]).then(function(e){e&&e.data&&e.data.coords&&(e=e.data.coords[0],t.longitude=e.longitude,t.latitude=e.latitude,c(t),l(e.longitude,e.latitude),o.loadingMap=!1)})}o.catalogApi=r.catalogApi,o.loadingMap=!0,o.modal={closeModal:function(){console.log("test")}},o.getModalData=function(e){o.modal.show=!0,i.getData(o.catalogApi+e).then(function(e){o.modal.text=e.data.data},function(e){o.modal.text='<h1 class="h1 text-center">Файл не найден</h1>'})},o.includes=[window.templatePath+"/tpl/frgu-inc-common-1ecfcdb826.html",window.templatePath+"/tpl/frgu-inc-docs-12620a1c57.html",window.templatePath+"/tpl/frgu-inc-contacts-fba274769e.html",window.templatePath+"/tpl/frgu-inc-additional-info-158a293044.html"],o.getLinkTitle=function(e){if(e)return(0==e.indexOf("http://")||0==e.indexOf("https://")||0==e.indexOf("www."))&&1==e.split(" ").length},o.getNextUrl=function(e){return t.path()+"/"+e},o.block=e.block,o._processOffices=function(e){e.data&&e.data.places&&0<e.data.places.length&&(o.offices=e.data.places,o.selectedOffice=o.offices[0],o.office=o.offices[0],o.geoObjects=[],o.declension=(e=o.offices.length,["адрес","адреса","адресов"][4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]),d(o.office))};var p={};o.selectOffice=function(e){var t=e.$$hashKey,r=!0;o.offices.forEach(function(e){p[e.$$hashKey]==e.$$hashKey&&r?(o.office=p[t],c(p[t]),l(p[t].longitude,p[t].latitude),o.loadingMap=!1,r=!1):e.$$hashKey==t&&r&&(p[e.$$hashKey]=e,d(o.office=e),r=!1)})},n.measureStart("infoCard"),a("baseFrguController",{$scope:o}),o._childCallback=function(){var e={},t=(r.logined&&(t=o.typeRadio&&o.frguRadioGroup&&!o.errorLimitation&&o.typeEventRadioBtn[o.typeRadio].url&&!o.authText,e.showElementGoToForm=!!t),o.frgu.description.officialName);updateSeoData({metaTitle:o.selected.metaTitle||t+": информация об услуге",metaDescription:o.selected.metaDescription||t+": способы подачи заявки, порядок оплаты, сроки оказания услуги.",metaKeyWords:o.selected.metaKeyWords}),n.measureEnd("infoCard",0,!1,e)}}]).controller("vaccineCtrl",["$scope","$rootScope","PerformanceService","VaccineService","$location","UserService","$q",function(r,t,a,o,e,s,i){t.breadcrumbs=[],r.loading=!0,r.type="",r.vaccineData={},r.firstPhase=null,r.secondPhase=null,r.agree=!1;var n=document.createElement("textarea"),l=(n.innerHTML=t.vaccineNotInRegisterText,t.vaccineNotInRegisterText=n.value,r.showRejectModal=!1,r.isMobilePlatform=window.isEmbedded,window.location.search.slice(6,8),r.platform="EPGUV3_"+("dk"===t.version?"DESK":"mob"===t.version?"MOB":"TAB"),r.lang="ru",r.newLang=window.location.search.slice(6,8),"ru"!==r.newLang&&"en"!==r.newLang||(r.lang=r.newLang),r.langMap={ru:{pageTitle:"Вакцинация COVID-19",pageTitleNotConfirmed:"Сертификат о вакцинации COVID-19",translate:"Сертификат на английском языке",personalData:{title:"Персональные данные",birthday:"Дата рождения",sex:"Пол",F:"Женский",M:"Мужской"},firstVaccine:{title:"Первая вакцинация",medicineOrganization:"Медицинская организация",dateOfVaccine:"Дата введения вакцины",vaccine:"Препарат",manufacturer:"Производитель",series:"Серия"},secondVaccine:{title:"Вторая вакцинация",medicineOrganization:"Медицинская организация",dateOfVaccine:"Дата введения вакцины",vaccine:"Препарат",manufacturer:"Производитель",series:"Серия",planedDate:"Плановая дата введения вакцины"},qr:{qrLang:"qr",title:"QR-код сертификата вакцинации",download:"Скачать сертификат в PDF"},params:{fio:"fio",clinicName:"hostClinicName",vaccine:"vcName",manufacture:"manufacture"},disclaimer:'Для корректного отображения сертификата проверьте актуальность данных национального и международного паспорта в <a ng-click="openLk()" class="text-link">личном кабинете</a>.<br>Транслитерация ФИО осуществляется в соответствии с действующим алгоритмом МВД России.'},en:{pageTitle:"COVID-19 vaccination",translate:"Certificate in Russian",personalData:{title:"Personal Data",birthday:"Date of birth",sex:"Sex",F:"Female",M:"Male"},firstVaccine:{title:"First vaccine dose",medicineOrganization:"Healthcare facility",dateOfVaccine:"Date",vaccine:"Vaccine",manufacturer:"Manufacturer",series:"Serial No of vaccine"},secondVaccine:{title:"Second vaccine dose",medicineOrganization:"Healthcare facility",dateOfVaccine:"Date",vaccine:"Vaccine",manufacturer:"Manufacturer",series:"Serial No of vaccine",planedDate:"Planned date"},qr:{qrLang:"enQr",title:"QR code of the Certificate",download:"Download PDF certificate"},params:{fio:"enFio",clinicName:"enHostClinicName",vaccine:"enVcName",manufacture:"enManufacture"},disclaimer:'Please check your national and international passport data in <a ng-click="openLk()" class="text-link">your personal account</a> for correct certificate display.<br>Personal data transliteration is carried out in accordance with the current procedure of the Ministry of Internal Affaires of the Russian Federation.'}},i.defer());t.userType?l.resolve():t.$on("user-loaded",function(){l.resolve()}),l.promise.then(function(){["P","F"].includes(t.userType)?(r.loading=!0,a.measureStart("vaccineStatus"),o.getVaccineRegisterInfo(window.location.href.search("unrz=")).then(function(e){var t;e&&200===e.status&&(t=!(e.data.enDocSer&&e.data.enDocSer.length||e.data.enDocNum&&e.data.enDocNum.length||e.data.docSer&&e.data.docSer.length||e.data.docNum&&e.data.docNum.length),!Object.keys(e.data).length||t&&void 0===e.data.status?r.type="NOT_IN_REGISTRY":(r.type=e.data.status,r.vaccineData=e.data,r.vaccineData.vcInfo&&r.vaccineData.vcInfo.length?(r.firstPhase=r.vaccineData.vcInfo.find(function(e){return 1===e.phase}),r.vaccineData.qr&&r.vaccineData.singlePhase||(r.secondPhase=r.vaccineData.vcInfo.find(function(e){return 2===e.phase}))):r.type="NOT_IN_REGISTRY",r.vaccineData.qr&&(r.vaccineData.qr="data:image/png;base64,"+r.vaccineData.qr),r.vaccineData.unrzfull&&(r.nunrz=r.vaccineData.unrzfull.replace(/^(.{4})(.{4})(.{4})(.*)$/,"$1 $2 $3 $4")))),a.measureEnd("vaccineStatus"),r.loading=!1},function(e){r.showError=!0,r.loading=!1,a.measureEnd("vaccineStatus",1,e.status)})):(r.notEnabled={state:!0,title:'Войдите на портал <a href="'+t.lkUrl+'roles?type=person&rUrl=/10600/1">от своего имени</a>, чтобы получить услугу',description:"Услуга доступна только для физических лиц, вы авторизованы на портале как "+("L"===t.userType?"сотрудник организации":"индивидуальный предприниматель")},r.loading=!1)}),window.metricReachGoal24845174("vaccine",{event:"vaccineOpen",platform:r.platform,region:t.userSelectedRegion}),r.getDiaryDate=function(e){return moment(e,"YYYY-MM-DD HH:mm").format("DD.MM.YYYY HH:mm")},r.sendConfirmStatus=function(e){r.showRejectModal=!1,r.loading=!0,a.measureStart("setVaccineStatus"),window.metricReachGoal24845174("vaccine",{event:"vaccineSendConfirm",platform:r.platform,region:t.userSelectedRegion,status:e}),o.sendConfirmStatus(e,r.vaccineData.unrz).then(function(e){window.location.reload(!1),a.measureEnd("setVaccineStatus")},function(e){r.loading=!1,r.showError=!0,a.measureEnd("setVaccineStatus",1,e.status),r.showRejectModal=!1})},r.toggleRejectModal=function(){r.showRejectModal=!r.showRejectModal},r.declOfNum=function(e,t){return t[4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]},r.openForm=function(){window.metricReachGoal24845174("vaccine",{event:"vaccineOpenForm",platform:r.platform,region:t.userSelectedRegion}),window.isEmbedded?window.location.href="/mobile/form/10600/1":e.path("/10600/1/form")},r.openHelp=function(){window.isEmbedded?window.SMUAdapter.notify({eventType:"open_browser",eventParams:[{key:"url",value:t.betaUrl+"help/obratitsya_skoraya"},{key:"withAuth",value:!0}]}):e.path("/help/obratitsya_skoraya")},r.openDispute=function(){window.isEmbedded?window.SMUAdapter.notify({eventType:"open_browser",eventParams:[{key:"url",value:t.betaUrl+"10092/1"},{key:"withAuth",value:!0}]}):window.location.href="/10092/1"},r.openLk=function(){window.isEmbedded?window.SMUAdapter.notify({eventType:"open_screen",eventParams:[{key:"screen",value:"Profile"}]}):window.location.href=t.lkUrl+"profile/personal"},r.translate=function(){r.lang="ru"===r.lang?"en":"ru"}}]).directive("clickToScroll",["$document",function(a){function e(e,t,r){t.bind("click",function(e){var t=r.clickToScroll,t=t?a.find(t):null;t&&t.length&&a.scrollToElementAnimated(t,0,400)})}return e.$inject=["$scope","$element","$attrs"],{restrict:"A",controller:e}}]).directive("addStyles",function(){return function(e,t,r){t.text(r.addStyles)}}).directive("fill",["$location",function(o){return{restrict:"A",link:function(e,t,r){var a="url("+o.absUrl()+"#";r.$set("fill",r.fill.replace(/url\(#/g,a))}}}]).directive("actionButton",["$rootScope","$anchorScroll","$timeout","animatedIdScroll",function(a,e,t,o){return{scope:{actionButton:"=",checkRedirect:"=",linksList:"=?",elmLinksList:"=?",departmentData:"=?",orderType:"=?",authText:"=?",showExtUrl:"=?",extUrl:"=?",extUrlDomain:"=?",radioType:"=?",queueAuth:"=?",hidden:"=?",hideRightBar:"=?"},restrict:"AE",replace:!0,templateUrl:window.templatePath+"/tpl/frgu/action-button-48696453af.html",link:function(e,t,r){"mob"===a.version&&(a.isMpWebView?a.pageNameCls+=" is-button-fixed-mp":a.pageNameCls+=" is-button-fixed"),e.scrollToAnchorLink=function(e,t){e.preventDefault(),o.scrollToElement("",t)}}}}]).directive("tabHab",function(){return{scope:{tabs:"=",handlerSelect:"="},replace:!0,template:function(){return'<ul class="b-tab"><li data-ng-repeat="tab in tabs"class="b-tab__item {{tab.selected}}"data-ng-click="selected($index)">{{tab.title}}</li></ul>'},link:function(t){t.selected=function(e){e=t.tabs[e];t.tabs.forEach(function(e){e.selected=""}),e.selected="selected",t.handlerSelect&&t.handlerSelect(e.key)}}}}).directive("sendMetric",function(){return{restrict:"A",link:function(e,t,r){t.bind("click",function(){window.metricReachGoal24845174(r.sendMetric)})}}}).controller("passportCtrl",["$scope","$rootScope","$routeParams","$timeout","$anchorScroll","CatalogService","DisclaimerService","$location","IconService","RegionService","PerformanceService","$controller","PsoWidgetInitializer",function(d,p,u,f,g,h,m,v,b,w,S,e,y){p.breadcrumbs=[],p.pageNameCls="catalog-page guideline without-bottom-padding",p.documentTitle("Паспорт услуги"),d.loading=!0,d.popular={shown:!0},d.linksList=[],$("#footer-placeholder").remove(),d.zeroStep={},d.zeroStep.body="","10051"==u.id||"10005"==u.id||"10070"==u.id?(d.zeroStep.needShowZeroStep=!0,d.zeroStep.needShowFirstStepOfZeroStep=!0,d.zeroStep.needShowSecondStepOfZeroStep=!1,e("handcraftCtrl",{$scope:d})):"10010"==u.id||"10011"==u.id?(d.zeroStep.needShowZeroStep=!0,d.zeroStep.needShowFirstStepOfZeroStep=!1,d.zeroStep.needShowSecondStepOfZeroStep=!0,e("handcraftCtrl",{$scope:d})):h.getPassport(u.id).then(function(e){e&&e.data&&e.data.passport&&e.data.passport.id&&p.$emit("withFRGUServiceID-event",e.data.passport.id),S.measureStart("passport");var a=e.data,t=a.passport||a||{},r=t.hrTitle||t.shortTitle||t.title,o=a.stateOrg&&a.stateOrg.length&&a.stateOrg[a.stateOrg.length-1].title;if(updateSeoData({metaTitle:t.metaTitle||r,metaDescription:t.metaDescription||r+(o?". "+o:"")+".",metaKeyWords:t.metaKeyWords}),a&&!angular.equals(e.data,{})){if(p.serviceGroup=a.colorCode,a.passport&&a.passport.services&&1==a.passport.services.length)return void v.path("/"+a.passport.epguId+"/"+a.passport.services[0].epguId+(a.passport.services[0].mnemonicDescription?"":"/info")).replace();a.tabHab=[{title:"Электронные",selected:"selected",key:"electron"},{title:"Все",selected:"",key:"all"}];var s=[],i=(a.passport&&a.passport.services&&a.passport.services.forEach(function(e){e.url||e.externalUrl||s.push(e)}),s.length&&s.length!==a.passport.services.length&&(a.needTub=!0,a.groups)&&a.groups.length&&(a.needTub=!1),a.filteringService=function(t){s.map(function(e){e.hideAfterFilter="electron"===t})},a.needTub,[]),n=[],l=(a.passport&&a.passport.services&&(a.passport.services.forEach(function(e){e.url||e.externalUrl||e.hasEqueue?(n.push(e),a.hasElectronServces=!0,e.notEService=!1):(i.push(e),a.hasNoElectronServces=!0,e.notEService=!0)}),a.passport.services=n.concat(i),a.passport.services.elServiceLength=n.length),function(){a.groups&&a.groups.length?d.linksList.push({title:"Выберите услугу",anchor:"categories"}):(a&&a.hasElectronServces&&d.linksList.push({title:"Электронные услуги",anchor:"elServices"}),a&&a.hasNoElectronServces&&d.linksList.push({title:"Неэлектронные услуги",anchor:"noElServices"}))}),c=(l(),(d.passport=a).stateOrg&&(d.stateOrgIcon=b.setIcon(a.stateOrg[a.stateOrg.length-1]),m.passportDisclaimer(a.stateOrg[a.stateOrg.length-1].id,a.passport.id)),a.habsForPassport&&(d.passport.habsForPassport=a.habsForPassport,updateSeoData({metaRobots:"noindex, follow"})),a.error&&a.error.errorMessage&&(a.errorMsg=a.error.errorMessage),w.get().then(function(e){a.myRegion=e,a&&a.responseType&&"hab"===a.responseType&&a.error&&a.error.errorCode&&"PASSPORTS_NOT_FOUND"==a.error.errorCode&&a.error.errorMessage.indexOf("${userRegion}")+1&&e&&(a.errorMsg=d.passport.error.errorMessage.replace("${userRegion}",e.title))}),d.scrollToAnchorLink=function(e,t){e.preventDefault(),g(t),f(function(){g(t)},50)},d.getElmInfo=function(e,t){var r={L:"legal",B:"entrepreneurs",F:"foreign"}[p.userTypeGosBar||p.userType]||null;h.getElmDetails(e,t,r).then(function(e){if(e.data){var t=[];if(d.elmLinksList=[],d.passportSeo=[],d.passportFaq=[],d.passportFaqLinks=[],d.passportLs=[],d.passportTargets=[],d.passportPassports=[],d.passportHabs=[],d.passportNews=[],e.data.seo&&e.data.seo.items&&e.data.seo.items.length&&(d.passportSeo=e.data.seo.items[0]),e.data.faq&&e.data.faq.items&&e.data.faq.items.length&&(d.passportFaq=e.data.faq.items),e.data.faqCategories&&e.data.faqCategories.items&&e.data.faqCategories.items.length&&(d.passportFaqLinks=e.data.faqCategories.items),e.data.lsCategory&&e.data.lsCategory.items&&e.data.lsCategory.items.length&&(d.lsButton=e.data.lsCategory.items[0]),e.data.ls&&e.data.ls.items&&e.data.ls.items.length&&(d.passportLs=e.data.ls.items,d.lsRows=splitRows(d.passportLs,2),d.elmLinksList.push({title:"Жизненные ситуации",anchor:"lifeSituations"})),e.data.target&&e.data.target.items&&e.data.target.items.length&&(d.passportTargets=e.data.target.items.slice(0,3),t.push(d.passportTargets)),e.data.passport&&e.data.passport.items&&e.data.passport.items.length&&(d.passportPassports=e.data.passport.items.slice(0,3),t.push(d.passportPassports)),e.data.hab&&e.data.hab.items&&e.data.hab.items.length&&(d.passportHabs=e.data.hab.items.slice(0,3),t.push(d.passportHabs)),(d.passportFaqLinks.length||d.passportFaq.length)&&d.elmLinksList.push({title:"Частые вопросы",anchor:"faq"}),t.length){var r=t[0].concat(t[1],t[2]);d.elmServices=[];for(var a=0;a<=4;a++)void 0!==r[a]&&d.elmServices.push(r[a]);d.elmLinksList.push({title:"Связанные услуги",anchor:"services"}),d.elmServices=splitRows(d.elmServices,2)}e.data.news&&e.data.news.items&&e.data.news.items.length&&(d.passportNews=e.data.news.items,d.elmLinksList.push({title:"Полезные материалы",anchor:"custom-footer"})),d.elmLinksList.length&&d.elmLinksList.push("finished"),d.passportSeo.content&&!d.passportNews.length?d.seoAnchor="custom-footer":d.seoAnchor=""}return e}).then(function(e){e=e&&e.data;y.manualCompletePsoLazyWidgetInitializationDataAcquiring({explicitContextFaqs:e&&e.faq&&e.faq.items||null})})},"");a.responseType&&"hab"===a.responseType?(a.error||d.linksList.push({title:"Услуги региона",anchor:"regServices"}),c=u.id,d.$watchGroup(["userTypeGosBar","changeHeaderFilter"],function(){d.getElmInfo("hab",c)}),a.shortTitle||a.title,a.selectRegion=p.selectRegion):(a.passport.shortTitle||a.passport.title,c=a.passport.epguId,d.$watchGroup(["userTypeGosBar","changeHeaderFilter"],function(){d.userTypeObj={L:"LEGAL",B:"SOLE_PROPRIETOR",F:"FOREIGNER",P:"PERSON"},d.typeForSelect=d.userTypeObj[p.userTypeGosBar||p.userType]||"PERSON",d.userTypesTitles={LEGAL:"Для юридических лиц",SOLE_PROPRIETOR:"Для предпринимателей",FOREIGNER:"Для иностранных граждан",PERSON:"Для граждан",ALL:"Все услуги"},d.getElmInfo("passport",c),a.passport.services&&a.passport.services.length&&(d.serviceUserTypes=d.selectCategory.setModel(a.passport.services,d.defaultUserType),d.selectCategory.changeSelect(d.defaultUserType))}),d.selectCategory={setModel:function(e){var r=[],t=[],a=((d.passportData=e).forEach(function(e){e=e.serviceRecipients.split(",");r=r.concat(e)}),[]);return r.forEach(function(e,t){-1==a.indexOf(r[t])&&a.push(r[t])}),a.forEach(function(e){switch(e){case"LEGAL":t.push({category:"LEGAL",title:"Для юридических лиц"});break;case"SOLE_PROPRIETOR":t.push({category:"SOLE_PROPRIETOR",title:"Для предпринимателей"});break;case"PERSON":t.push({category:"PERSON",title:"Для граждан"});break;case"FOREIGNER":t.push({category:"FOREIGNER",title:"Для иностранных граждан"})}}),t.push({category:"ALL",title:"Все услуги"}),d.userTypeObj[p.userTypeGosBar||p.userType]&&1<t.length?d.defaultUserType={title:d.userTypesTitles[d.typeForSelect],category:d.typeForSelect}:d.defaultUserType={title:"Все услуги",category:"ALL"},d.passportUserTypes=t},changeSelect:function(t){var e,r;d.errorUserCategory=!1,d.defaultUserType=t,d.serviceUserTypes=d.passportUserTypes,d.serviceUserTypes.length&&(d.serviceUserTypes=d.selectCategory.setTypeInfo(d.serviceUserTypes)),"ALL"==t.category?d.passportData=a.passport.services:(d.linksList=[],e=a.passport.services.filter(function(e){if(-1<e.serviceRecipients.indexOf(t.category))return e}),r=0,angular.forEach(e,function(e){e.notEService||r++}),e.length?(l(),d.passportData=e,d.passportData.elServiceLength=r):(d.passportData=[],d.errorUserCategory=!0))},setTypeInfo:function(e){var t;if(e)return t=[],e.forEach(function(e){e.category!=d.defaultUserType.category&&t.push(e)}),t}}),p.breadcrumbs=[],p.cachedPathes||(p.cachedPathes={}),a&&a.passport&&a.passport.epguId&&(p.cachedPathes[a.passport.epguId]||(p.cachedPathes[a.passport.epguId]={}),p.cachedPathes[a.passport.epguId].colorCode||(p.cachedPathes[a.passport.epguId].colorCode=a.colorCode),p.cachedPathes[a.passport.epguId].servicesSize=a.passport.services.length),S.measureEnd("passport")}else d.error=!0;d.loading=!1},function(){d.error=!0,d.loading=!1})}]).controller("covidPdfCtrl",["$scope","$location","VaccineService",function(o,e,t){o.status="wait";e=e.search().unrz;e&&16===e.length?t.getPdfCovidCert(e).then(function(e){var t=(e.headers("content-disposition")||"").split(";").filter(function(e){return-1<e.trim().indexOf("filename=")})[0],t=t?t.split("filename=")[1]:"certificate.pdf",r=e.headers("content-type")||"application/pdf;charset=UTF-8",e=new Blob([e.data],{type:r}),r=window.URL||window.webkitURL,e=r.createObjectURL(e),a=document.createElement("a");a.href=e,a.download=t,document.body.appendChild(a),a.click(),r.revokeObjectURL(e),a.parentNode.removeChild(a),o.status="final"}).catch(function(e){404==e.status?o.status="notFound":o.status="error"}):o.status="error"}])}();