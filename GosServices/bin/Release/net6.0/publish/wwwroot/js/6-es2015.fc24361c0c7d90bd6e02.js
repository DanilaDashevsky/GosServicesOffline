(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0FX9":function(e,t,n){var r=n("Z92M"),i=n("qmMu"),o=n("QUaw"),a=n("QAZZ");function s(e,t,n,o,a){var s=[].slice.call(arguments,1),c=s.length,l="function"==typeof s[c-1];if(!l&&!r())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(n=t,t=o=void 0):2!==c||t.getContext||(o=n,n=t,t=void 0),new Promise((function(r,a){try{var s=i.create(n,o);r(e(s,t,o))}catch(c){a(c)}}))}if(c<2)throw new Error("Too few arguments provided");2===c?(a=n,n=t,t=o=void 0):3===c&&(t.getContext&&void 0===a?(a=o,o=void 0):(a=o,o=n,n=t,t=void 0));try{var u=i.create(n,o);a(null,e(u,t,o))}catch(d){a(d)}}t.create=i.create,t.toCanvas=s.bind(null,o.render),t.toDataURL=s.bind(null,o.renderToDataURL),t.toString=s.bind(null,(function(e,t,n){return a.render(e,n)}))},"0LtY":function(e,t){!function(e){e.IFCPlugin=function(t,n,r){var i="",o=null;function a(e){if(document.createEvent){var t=document.createEvent("Event");t.initEvent(e,!0,!0),document.dispatchEvent(t)}else document.documentElement[e]++}function s(){var e=navigator.userAgent;if(-1!==e.search("Safari")&&-1!==e.search("Version")){var t=e.indexOf("Version")+8,n=e.substr(t);if(n){var r=t+n.indexOf(".");if((n?parseInt(e.substring(t,r),10):0)>=12)return!0}}return!1}function c(){for(var e=navigator.userAgent,t=["Firefox","Chrome","Opera","Edge","YaBrowser","Safari"],n=0;n<t.length;n++){if(-1!==e.search(t[n])&&"Firefox"===t[n]){var r=e.indexOf(t[n])+8,i=e.substr(r);if(i){var o=r+i.indexOf(".");if((i?parseInt(e.substring(r,o),10):0)>=50)return!0}break}if(-1!==e.search(t[n])&&"Safari"===t[n]&&-1!==e.search("Version")){var a=e.indexOf("Version")+8,s=e.substr(a);if(s){var c=a+s.indexOf(".");if((s?parseInt(e.substring(a,c),10):0)>=12)return!0}break}if(-1!==e.search(t[n]))return!0}return!1}function l(e,t){o.send({func_name:"get_list_info",params:{cryptoType:e}},(function(n){if(IFCError.IFC_OK===n.error_code){for(var r=[],i=0;i<n.ifc_list.length;i++)n.ifc_list[i].type!==e&&null!=e||r.push(new IFCCrypto(n.ifc_list[i]));t({error_code:IFCError.IFC_OK,ifc_list:r})}else t(n)}))}function u(e){return l(null,e)}function d(e,t){u((function(n){if(IFCError.IFC_OK===n.error_code){for(var r=0;r<n.ifc_list.length;r++)if(e===n.ifc_list[r].getCryptoId())return void t({error_code:IFCError.IFC_OK,crypto:n.ifc_list[r]});t({error_code:IFCError.IFC_CRYPTO_NOT_FOUND,crypto})}else t(n)}))}function p(e){if(!e)return"";for(var t=["CryptoPro","VIPNet","SignalCom","LISSI-CSP"],n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return e.substring(0,e.indexOf("/"));return e.substring(0,e.lastIndexOf("/"))}function h(e,t,n,r,i,a,s){d(p(e),(function(c){IFCError.IFC_OK===c.error_code?(void 0===s&&(s=IFCConst.IFC_SHOW_CSP_UI),o.send({func_name:"sign",params:{containerId:e,userPin:t||"",inDataType:r,data:n,hashType:IFCConst.IFC_HARDWARE_HASH,signType:i,cspUI:s,outDataType:IFCConst.IFC_BASE64}},a)):a(c)}))}function g(e,t,n,r,i,a,s){a?T(a,(function(a){if(IFCError.IFC_OK===a.error_code){var c=a.x509Handle;o.send({func_name:"verify",params:{containerId:e,inDataType:i,data:r,signType:n,sign:t,x509Handle:c}},(function(e){var t,n=e.error_code;IFCError.IFC_OK===e.error_code&&(t=e.verify_result),y(c,(function(e){IFCError.IFC_OK===e.error_code?s({error_code:n,verify_result:t}):s(e)}))}))}else s(a)})):o.send({func_name:"verify",params:{containerId:e,inDataType:i,data:r,signType:n,sign:t,x509Handle:0}},s)}function f(e,t,n,r,i,a,s,c){d(p(e),(function(l){IFCError.IFC_OK===l.error_code?(void 0===c&&(c=1),o.send({func_name:"sign_xml",params:{containerId:e,userPin:t||"",wsu_id:n,inDataType:i,data:r,cspUI:c,outDataType:a}},s)):s(l)}))}function C(e,t,n,r,i){o.send({func_name:"verify_xml",params:{containerId:e,wsu_id:t,inDataType:r,sign:n}},(function(e){IFCError.IFC_OK===e.error_code?i({error_code:e.error_code,verify_result:e.verify_result}):i(e)}))}function I(e,t,n,r){o.send({func_name:"hash",params:{containerId:e,inDataType:t,data:n,outDataType:IFCConst.IFC_BASE64}},(function(e){IFCError.IFC_OK===e.error_code?r({error_code:IFCError.IFC_OK,hash:new IFCHash(e.hashValue)}):r(e)}))}function _(e,t){u((function(n){if(IFCError.IFC_OK===n.error_code){for(var r=n.ifc_list,i=[],a=0;a<r.length;a++)i.push(r[a].getCryptoId());o.send({func_name:"get_list_certs_by_cryptoid_array",params:{cryptoID_array:i,show_progress:t}},(function(t){if(IFCError.IFC_OK===t.error_code)if(t.intermediate)e(t);else{for(var n=[],i=0;i<t.result_array.length;i++){for(var o=!1,a=0;a<r.length;a++)if(r[a].getCryptoId()===t.result_array[i].crypto_id){o=r[a];break}if(!1!==o)for(var s=0;s<t.result_array[i].cert_list.length;s++)n.push(new IFCCertificate(t.result_array[i].cert_list[s],o))}e({error_code:IFCError.IFC_OK,certs_list:n})}else e(t)}))}else e(n)}))}function m(e,t,n,r,i){d(p(e),(function(a){IFCError.IFC_OK===a.error_code?t&&t.length>0||!a.crypto.isPKCS11()?function(e,t,n,r,i,a,s){o.send({func_name:"key_gen",params:{containerId:e,userPin:t}},(function(e){if(IFCError.IFC_OK===e.error_code){var c=new IFCDN(n,IFCConst.DN_SEPARATOR_INPUT).getSubjectArray(),l=("clientAuth,emailProtection,1.2.643.2.2.34.6,"+r).split(","),u=i.split(","),d=e.real_id;o.send({func_name:"req_gen",params:{containerId:d,userPin:t,subject:c,extendedKeyUsage:l,certificatePolicies:u,signInstrument:"",req_format:IFCConst.IFC_REQ_BASE64ENCODED,csrExtensions:a}},(function(e){IFCError.IFC_OK===e.error_code?s({error_code:IFCError.IFC_OK,real_id:d,req_base64_length:e.req_base64_length,req_base64:e.req_base64,req:new IFCCertificateRequest(d,e.req_base64)}):s(e)}))}else s(e)}))}(e,t,n,a.crypto.getExtendedKeyUsage(),a.crypto.getCertificatePolicies(),r,i):i({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR}):i(a)}))}function E(e){o.send({func_name:"get_guid",params:{prefix:i}},e)}function v(e,t,n,r,i){E((function(o){if(IFCError.IFC_OK===o.error_code)return m(e+"/"+o.guid,t,n,r,i);i(o)}))}function S(e,t,n){d(p(e),(function(r){IFCError.IFC_OK===r.error_code?t&&t.length>0||!r.crypto.isPKCS11()?o.send({func_name:"key_delete",params:{containerId:e,userPin:t}},n):n({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR}):n(r)}))}function T(e,t){o.send({func_name:"load_x509_from_data",params:{cert:e,cert_data_type:IFCConst.IFC_CERT_UNKNOWN}},t)}function y(e,t){o.send({func_name:"free_x509",params:{x509Handle:e}},t)}function A(e,t,n,r){n&&n.length>0?o.send({func_name:"p11_key_rename",params:{containerId:e,newContainerId:t,userPin:n}},r):r({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR})}this.status=null,this.safariExtensionScheme="safariExtension://",this.listenPluginEvent=function(e,t){document.addEventListener?document.addEventListener(e,t,!1):document.documentElement.attachEvent("onpropertychange",(function(n){n.propertyName===e&&t()}))},o=c()?new function(){var t=e,n=!1,r=!1;function i(e){if(e.source===t)try{var i=JSON.parse(e.data);i.type&&"FROM_IFC_EXT"===i.type?function(e){if(e.intermediate)n(e);else if(n){var t=n;n=!1,t(e)}}(i.msg_data):i.type&&"IFC_EXT_DISCONNECT"===i.type&&function(){if(n){var e=n;n=!1,e({error_code:IFCError.IFC_PLUGIN_UNDEFINED_ERROR})}r=!1}()}catch(o){}}this.send=function(e,o){if(n)o({error_code:IFCError.IFC_GENERAL_ERROR});else{var a=function(){if(r)return IFCError.IFC_OK;try{t.addEventListener("message",i,!1)}catch(e){return IFCError.IFC_PLUGIN_UNDEFINED_ERROR}return r=!0,IFCError.IFC_OK}();a===IFCError.IFC_OK?function(e,r){n=r;try{t.postMessage(JSON.stringify({type:"TO_IFC_EXT",msg_data:e}),"*")}catch(i){n=!1,r({error_code:IFCError.IFC_PLUGIN_UNDEFINED_ERROR})}}(e,o):o({error_code:a})}}}:new function(e){e=e,this.send=function(t,n){try{e.post_message(JSON.stringify(t),(function(e,t){n(JSON.parse(t))}))}catch(r){n({error_code:IFCError.IFC_PLUGIN_UNDEFINED_ERROR})}}}(t),this.init=function(e){var t=this;this.status={isNativeMessaging:c(),isNewSafari:s(),extensionIsInstalled:null,pluginIsRunning:null},this.status.isNativeMessaging?setTimeout((function(){document.getElementById("ifcplugin-extension-is-installed")?(t.status.extensionIsInstalled=!0,t.status.pluginIsRunning=!!document.getElementById("ifc-plugin-is-installed")):t.status.extensionIsInstalled=!1,a("updatePluginStatus")}),e?this.status.isNewSafari?5e3:500:4):(this.status.pluginIsRunning=!1,this.getPluginVersion((function(e){IFCError.IFC_OK===e.error_code&&(t.status.pluginIsRunning=!0)})),setTimeout((function(){a("updatePluginStatus")}),1e3)),setTimeout(t.init.bind(t),5e3)},this.getLibVersion=function(e){return"2.2.1"},this.create=function(e,t,n){o.send({func_name:"create",params:{file_config:e,config_string:t,log_file_location:"",plugin_log_level:""}},n)},this.getPluginVersion=function(e){o.send({func_name:"version"},e)},this.getCryptoList=function(e){return u(e)},this.getPKCS11CryptoList=function(e){return l(IFCConst.IFC_CRYPTO_PKCS11,e)},this.getCAPICryptoList=function(e){return l(IFCConst.IFC_CRYPTO_CAPI,e)},this.getCAPILINUXCryptoList=function(e){return l(IFCConst.IFC_CRYPTO_CAPI_LINUX,e)},this.getCryptoById=function(e,t){return d(e,t)},this.getCertificateList=function(e){return _(e,0)},this.getCertificateListWithProgress=function(e){return _(e,1)},this.getCertificateListByCryptoId=function(e,t){return function(e,t){d(e,(function(e){if(IFCError.IFC_OK===e.error_code){var n=e.crypto;o.send({func_name:"get_list_certs",params:{cryptoID:n.getCryptoId()}},(function(e){if(IFCError.IFC_OK===e.error_code){certsArray=[];for(var r=0;r<e.cert_list.length;r++)certsArray.push(new IFCCertificate(e.cert_list[r],n));t({error_code:IFCError.IFC_OK,certs_list:certsArray})}else t(e)}))}else t(e)}))}(e,t)},this.getKeyListByCryptoId=function(e,t,n){return function(e,t,n){d(e,(function(e){if(IFCError.IFC_OK===e.error_code){var r=e.crypto;t&&t.length>0||!r.isPKCS11()||n({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR}),o.send({func_name:"get_list_keys",params:{cryptoID:r.getCryptoId(),userPin:t}},(function(e){if(IFCError.IFC_OK===e.error_code){keysArray=[];for(var t=0;t<e.keys_list.length;t++)keysArray.push(new IFCCertificate(e.keys_list[t],r));n({error_code:IFCError.IFC_OK,keys_list:keysArray})}else n(e)}))}else n(e)}))}(e,t,n)},this.getCryptoIdByContainerId=function(e){return p(e)},this.signDataXml=function(e,t,n,r,i,o,a){return f(e,t,n,r,IFCConst.IFC_DATATYPE_DATA,i,o,a)},r&&(this.verifyDataXml=function(e,t,n,r){return C(e,t,n,IFCConst.IFC_DATATYPE_DATA,r)}),this.signDataBase64Xml=function(e,t,n,r,i,o,a){return f(e,t,n,r,IFCConst.IFC_DATATYPE_DATA_BASE64,i,o,a)},r&&(this.verifyDataBase64Xml=function(e,t,n,r){return C(e,t,n,IFCConst.IFC_DATATYPE_DATA_BASE64,r)}),this.signDataCmsAttached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA,IFCConst.IFC_SIGNTYPE_CMS_ATTACHED,r,i)},r&&(this.verifyDataCmsAttached=function(e,t,n){return g(e,t,IFCConst.IFC_SIGNTYPE_CMS_ATTACHED,"",IFCConst.IFC_DATATYPE_DATA,"",n)}),this.signDataCmsDetached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA,IFCConst.IFC_SIGNTYPE_CMS_DETACHED,r,i)},r&&(this.verifyDataCmsDetached=function(e,t,n,r){return g(e,t,IFCConst.IFC_SIGNTYPE_CMS_DETACHED,n,IFCConst.IFC_DATATYPE_DATA,"",r)}),this.signDataCadesBesAttached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA,IFCConst.IFC_SIGNTYPE_CADES_BES_ATTACHED,r,i)},r&&(this.verifyDataCadesBesAttached=function(e,t,n){return g(e,t,IFCConst.IFC_SIGNTYPE_CADES_BES_ATTACHED,"",IFCConst.IFC_DATATYPE_DATA,"",n)}),this.signDataCadesBesDetached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA,IFCConst.IFC_SIGNTYPE_CADES_BES_DETACHED,r,i)},r&&(this.verifyDataCadesBesDetached=function(e,t,n,r){return g(e,t,IFCConst.IFC_SIGNTYPE_CADES_BES_DETACHED,n,IFCConst.IFC_DATATYPE_DATA,"",r)}),this.signDataBase64CmsAttached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA_BASE64,IFCConst.IFC_SIGNTYPE_CMS_ATTACHED,r,i)},r&&(this.verifyDataBase64CmsAttached=function(e,t,n){return g(e,t,IFCConst.IFC_SIGNTYPE_CMS_ATTACHED,"",IFCConst.IFC_DATATYPE_DATA_BASE64,"",n)}),this.signDataBase64CmsDetached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA_BASE64,IFCConst.IFC_SIGNTYPE_CMS_DETACHED,r,i)},r&&(this.verifyDataBase64CmsDetached=function(e,t,n,r){return g(e,t,IFCConst.IFC_SIGNTYPE_CMS_DETACHED,n,IFCConst.IFC_DATATYPE_DATA_BASE64,"",r)}),this.signDataBase64CadesBesAttached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA_BASE64,IFCConst.IFC_SIGNTYPE_CADES_BES_ATTACHED,r,i)},r&&(this.verifyDataBase64CadesBesAttached=function(e,t,n){return g(e,t,IFCConst.IFC_SIGNTYPE_CADES_BES_ATTACHED,"",IFCConst.IFC_DATATYPE_DATA_BASE64,"",n)}),this.signDataBase64CadesBesDetached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA_BASE64,IFCConst.IFC_SIGNTYPE_CADES_BES_DETACHED,r,i)},r&&(this.verifyDataBase64CadesBesDetached=function(e,t,n,r){return g(e,t,IFCConst.IFC_SIGNTYPE_CADES_BES_DETACHED,n,IFCConst.IFC_DATATYPE_DATA_BASE64,"",r)}),this.signDataHash64CmsDetached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_HASH_BASE64,IFCConst.IFC_SIGNTYPE_CMS_DETACHED,r,i)},r&&(this.verifyDataHash64CmsDetached=function(e,t,n,r){return g(e,t,IFCConst.IFC_SIGNTYPE_CMS_DETACHED,n,IFCConst.IFC_DATATYPE_HASH_BASE64,"",r)}),this.signDataHash64CadesBesDetached=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_HASH_BASE64,IFCConst.IFC_SIGNTYPE_CADES_BES_DETACHED,r,i)},r&&(this.verifyDataHash64CadesBesDetached=function(e,t,n,r){return g(e,t,IFCConst.IFC_SIGNTYPE_CADES_BES_DETACHED,n,IFCConst.IFC_DATATYPE_HASH_BASE64,"",r)}),this.signDataSimple=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA,IFCConst.IFC_SIGNTYPE_SIMPLE,r,i)},r&&(this.verifyDataSimple=function(e,t,n,r,i){return g(e,t,IFCConst.IFC_SIGNTYPE_SIMPLE,n,IFCConst.IFC_DATATYPE_DATA,r,i)}),this.signHashSimple=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_HASH_BASE64,IFCConst.IFC_SIGNTYPE_SIMPLE,r,i)},r&&(this.verifyHashSimple=function(e,t,n,r,i){return g(e,t,IFCConst.IFC_SIGNTYPE_SIMPLE,n,IFCConst.IFC_DATATYPE_HASH_BASE64,r,i)}),this.signDataSimpleReversed=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA,IFCConst.IFC_SIGNTYPE_SIMPLE_REVERSE,r,i)},r&&(this.verifyDataSimpleReversed=function(e,t,n,r,i){return g(e,t,IFCConst.IFC_SIGNTYPE_SIMPLE_REVERSE,n,IFCConst.IFC_DATATYPE_DATA,r,i)}),this.signDataBase64Simple=function(e,t,n,r,i){return h(e,t,n,IFCConst.IFC_DATATYPE_DATA_BASE64,IFCConst.IFC_SIGNTYPE_SIMPLE,r,i)},r&&(this.verifyDataBase64Simple=function(e,t,n,r,i){return g(e,t,IFCConst.IFC_SIGNTYPE_SIMPLE,n,IFCConst.IFC_DATATYPE_DATA_BASE64,r,i)}),this.generateKeyPairAndCsrForContainerId=function(e,t,n,r){return function(e,t,n,r){return m(e,t,n,"",r)}(e,t,n,r)},this.generateKeyPairAndCsrForContainerIdV2=function(e,t,n,r,i){return m(e,t,n,r,i)},this.generateKeyPairAndCsr=function(e,t,n,r){return function(e,t,n,r){return v(e,t,n,"",r)}(e,t,n,r)},this.generateKeyPairAndCsrV2=function(e,t,n,r,i){return v(e,t,n,r,i)},r&&(this.makeSelfSignedCert=function(e,t,n,r){return function(e,t,n,r){d(p(e),(function(i){IFCError.IFC_OK===i.error_code?t&&t.length>0||!i.crypto.isPKCS11()?o.send({func_name:"make_cert",params:{containerId:e,userPin:t,request:n}},(function(e){r(e)})):r({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR}):r(i)}))}(e,t,n,r)}),this.putCertificate=function(e,t,n,r){return function(e,t,n,r){d(p(e),(function(i){IFCError.IFC_OK===i.error_code?t&&t.length>0||!i.crypto.isPKCS11()?T(n,(function(n){if(IFCError.IFC_OK===n.error_code){var i=n.x509Handle;o.send({func_name:"set_x509",params:{containerId:e,userPin:t,x509Handle:i}},(function(e){IFCError.IFC_OK===e.error_code?y(i,(function(e){r(e)})):r(e)}))}else r(n)})):r({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR}):r(i)}))}(e,t,n,r)},this.deleteContainer=function(e,t,n){return S(e,t,n)},this.getGuid=function(e){return E(e)},this.setGuidPrefix=function(e){i=e},this.getGuidPrefix=function(){return i},this.getCertificate=function(e,t){return function(e,t){!function(e,t){o.send({func_name:"load_x509_from_container",params:{containerId:e}},t)}(e,(function(e){if(IFCError.IFC_OK===e.error_code){var n=e.x509Handle;o.send({func_name:"get_x509_info",params:{x509Handle:n}},(function(e){if(IFCError.IFC_OK===e.error_code){var r=new IFCCertificateInfo(e.cert_info);y(n,(function(e){t({error_code:e.error_code,cert:r})}))}else t(e)}))}else t(e)}))}(e,t)},this.getCertificateFromString=function(e,t){return function(e,t){T(e,(function(e){if(IFCError.IFC_OK===e.error_code){var n=e.x509Handle;!function(e,t){o.send({func_name:"get_x509_info",params:{x509Handle:e}},(function(e){if(IFCError.IFC_OK===e.error_code){var n=new IFCCertificateInfo(e.cert_info);t({error_code:e.error_code,cert:n})}else t(e)}))}(n,(function(e){if(IFCError.IFC_OK===e.error_code){var r=e.cert;y(n,(function(e){t({error_code:e.error_code,cert:r})}))}else t(e)}))}else t(e)}))}(e,t)},this.getHash=function(e,t,n){return I(e,IFCConst.IFC_DATATYPE_DATA,t,n)},this.getHashFromBase64=function(e,t,n){return I(e,IFCConst.IFC_DATATYPE_DATA_BASE64,t,n)},this.encrypt=function(e,t,n,r,i){return function(e,t,n,r,i){t&&t.length>0?T(n,(function(n){IFCError.IFC_OK===n.error_code?(peer_x509Handle=n.x509Handle,o.send({func_name:"encrypt",params:{containerId:e,userPin:t,peerX509Handle:peer_x509Handle,data:r}},(function(e){var t,n=e.error_code;IFCError.IFC_OK===e.error_code&&(t=new IFCEncrypted(e.enc_data_base64,e.enc_key_base64,e.cert_base64)),y(peer_x509Handle,(function(e){IFCError.IFC_OK===e.error_code?IFCError.IFC_OK===n?i({error_code:n,encrypted:t}):i({error_code:n}):i(e)}))}))):i(n)})):i({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR})}(e,t,n,r,i)},this.decrypt=function(e,t,n,r,i,a){return function(e,t,n,r,i,a){t&&t.length>0?T(n,(function(n){IFCError.IFC_OK===n.error_code?(peer_x509Handle=n.x509Handle,o.send({func_name:"decrypt",params:{containerId:e,userPin:t,peerX509Handle:peer_x509Handle,encryptedData:r,encryptedKey:i}},(function(e){var t,n=e.error_code;IFCError.IFC_OK===e.error_code&&(t=e.decrypted),y(peer_x509Handle,(function(e){IFCError.IFC_OK===e.error_code?IFCError.IFC_OK===n?a({error_code:n,decrypted:t}):a({error_code:n}):a(e)}))}))):a(n)})):a({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR})}(e,t,n,r,i,a)},this.pkcs11Init=function(e,t,n,r,i){return function(e,t,n,r,i){n&&n.length>0&&r&&r.length>0?o.send({func_name:"p11_init",params:{cryptoID:e,label:t,userPin:n,adminPin:r}},i):i({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR})}(e,t,n,r,i)},this.pkcs11ChangeUserPin=function(e,t,n,r){return function(e,t,n,r){t&&t.length>0&&n&&n.length>0?o.send({func_name:"p11_pin_change",params:{cryptoID:e,pinType:IFCConst.P11_PIN_TYPE_USER,currentPin:t,newPin:n}},r):r({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR})}(e,t,n,r)},this.pkcs11UnlockUserPin=function(e,t,n){return function(e,t,n){t&&t.length>0?o.send({func_name:"p11_pin_unlock",params:{cryptoID:e,adminPin:t}},n):n({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR})}(e,t,n)},this.pkcs11ChangeAdminPin=function(e,t,n,r){return function(e,t,n,r){t&&t.length>0&&n&&n.length>0?o.send({func_name:"p11_pin_change",params:{cryptoID:e,pinType:IFCConst.P11_PIN_TYPE_ADMIN,currentPin:t,newPin:n}},r):r({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR})}(e,t,n,r)},this.pkcs11RenameContainer=function(e,t,n,r){return A(e,t,n,r)},this.pkcs11MoveContainer=function(e,t,n,r){return function(e,t,n,r){n&&n.length>0?d(p(e),(function(i){IFCError.IFC_OK===i.error_code?null!=i.crypto&&i.crypto.isPKCS11()?S(p(e)+"/"+t,n,(function(i){IFCError.IFC_OK!==i.error_code&&IFCError.IFC_CONTAINER_NOT_FOUND!==i.error_code||A(e,t,n,r)})):r({error_code:IFCError.IFC_BAD_PARAMS}):r(i)})):r({error_code:IFCError.IFC_P11_INVALID_PIN_ERROR})}(e,t,n,r)},this.sendAPDU=function(e,t,n){return function(e,t,n){o.send({func_name:"send_apdu",params:{readerName:e,apdu_string:t}},n)}(e,t,n)}}}(window)},"1XOz":function(e,t,n){"use strict";n.r(t),n.d(t,"ESelectOrganizationType",(function(){return r})),n.d(t,"ESelectOrganizationError",(function(){return i})),n.d(t,"SelectOrganizationService",(function(){return s})),n.d(t,"SelectOrganizationModule",(function(){return K}));var r=function(e){return e.Business="BUSINESS",e.Legal="LEGAL",e.Agency="AGENCY",e}({}),i=function(e){return e.OnlyChief="ESIA-007063",e.OnlyBusinessman="ESIA-007064",e.OnlyLegalEntity="ESIA-007065",e.OnlyAgency="ESIA-007066",e.OnlyAgencyChief="ESIA-007067",e.OnlyOrganization="ESIA-007068",e}({}),o=n("fXoL"),a=n("95Ly");let s=(()=>{class e{constructor(e){this.authService=e}chooseRole$(e){return this.authService.authRequest$("aas/oauth2/api/public/v1/choose-role?role_oid="+e,null,"GET")}return$(){return this.authService.authRequest$("aas/oauth2/api/public/v1/choose-role/return",null,"GET")}isSelectOrganizationError(e){return Object.values(i).indexOf(e)>-1}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](a.a))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var c=n("ofXK"),l=n("tyNb"),u=n("2Vo4"),d=n("XNiG"),p=n("tSjf"),h=n("nYR2"),g=n("1G5W"),f=n("kiRB"),C=n("RqrM"),I=n("F8Sv"),_=n("3Pt+");let m=(()=>{class e{constructor(e){this.elementRef=e}toggle(e){this.elementRef.nativeElement.style.display=e?"none":"block"}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.ElementRef))},e.\u0275dir=o["\u0275\u0275defineDirective"]({type:e,selectors:[["esia-search-element"]],inputs:{value:"value"}}),e})();var E=n("sYmb");function v(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",7),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](2).clear()})),o["\u0275\u0275elementEnd"]()}}function S(e,t){1&e&&o["\u0275\u0275element"](0,"span",8)}function T(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",9),o["\u0275\u0275element"](2,"img",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"p",11),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,1,"SEARCH.NO_RESULTS")," "))}function y(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"form",1),o["\u0275\u0275elementStart"](1,"label",2),o["\u0275\u0275element"](2,"input",3),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275template"](4,v,1,0,"span",4),o["\u0275\u0275template"](5,S,1,0,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,T,6,3,"ng-container",6),o["\u0275\u0275pipe"](8,"async"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](6),t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("formGroup",t.form),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("placeholder",o["\u0275\u0275pipeBind1"](3,5,"SEARCH.PLACEHOLDER")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.search.value)("ngIfElse",e),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](8,7,t.noResults$))}}const A=["*"];let F=(()=>{class e extends p.a{constructor(){super(...arguments),this.isSearchShow=!0,this.noResults$=new d.a,this.form=new _.FormGroup({search:new _.FormControl})}get search(){return this.form.get("search")}ngOnInit(){this.search.valueChanges.pipe(Object(g.a)(this.unsubscribe)).subscribe({next:e=>{let t=!0;this.searchElementList.forEach(n=>{const r=-1===n.value.toLowerCase().indexOf(e.toLowerCase());n.toggle(r),r||(t=!1)}),this.noResults$.next(t)}})}clear(){this.search.setValue("")}}return e.\u0275fac=function(t){return O(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-search"]],contentQueries:function(e,t,n){var r;1&e&&o["\u0275\u0275contentQuery"](n,m,!0),2&e&&o["\u0275\u0275queryRefresh"](r=o["\u0275\u0275loadQuery"]())&&(t.searchElementList=r)},inputs:{isSearchShow:"isSearchShow"},features:[o["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:A,decls:2,vars:1,consts:[["class","search__form",3,"formGroup",4,"ngIf"],[1,"search__form",3,"formGroup"],[1,"search__label"],["tabindex","1","formControlName","search","autofocus","",1,"search__input",3,"placeholder"],["class","search__icon search__icon_cross",3,"click",4,"ngIf","ngIfElse"],["emptyValue",""],[4,"ngIf"],[1,"search__icon","search__icon_cross",3,"click"],[1,"search__icon","search__icon_magnifying-glass"],[1,"text-center"],["alt","","src","assets/svg/no-search-results.svg",1,"mt-24"],[1,"text-plain","text-helper","text-center","mt-24"]],template:function(e,t){1&e&&(o["\u0275\u0275projectionDef"](),o["\u0275\u0275template"](0,y,9,9,"form",0),o["\u0275\u0275projection"](1)),2&e&&o["\u0275\u0275property"]("ngIf",t.isSearchShow)},directives:[c.t,_["\u0275angular_packages_forms_forms_y"],_.NgControlStatusGroup,_.FormGroupDirective,_.DefaultValueAccessor,_.NgControlStatus,_.FormControlName],pipes:[E.d,c.b],styles:[".search__form[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:12px;box-shadow:0 1px 4px #e3ebfc,0 24px 48px rgba(230,235,245,.4)}.search__label[_ngcontent-%COMP%]{position:relative}.search__input[_ngcontent-%COMP%]{padding:14px 50px 14px 16px;background:#f5f7fa;border-radius:4px;width:100%;line-height:24px;font-size:16px;border:none;height:52px;outline:none}.search__input[_ngcontent-%COMP%]:focus{border:2px solid #99b1e6}.search__icon[_ngcontent-%COMP%]{position:absolute;transform:translateY(-50%);top:50%;right:16px;background-repeat:no-repeat;background-position:50%}.search__icon_magnifying-glass[_ngcontent-%COMP%]{background-image:url(magnifying-glass.d8c131c161b685bc46ad.svg);width:24px;height:24px}.search__icon_cross[_ngcontent-%COMP%]{background-image:url(close.e02ea7ff7c33d6fb12e5.svg);cursor:pointer;width:16px;height:16px}"],changeDetection:0}),e})();const O=o["\u0275\u0275getInheritedFactory"](F);var b=n("Rrgi");const D=["formBody"];function N(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275element"](1,"div",7),o["\u0275\u0275elementEnd"]())}function R(e,t){1&e&&o["\u0275\u0275element"](0,"img",20),2&e&&o["\u0275\u0275property"]("src",t.ngIf,o["\u0275\u0275sanitizeUrl"])}function w(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"b"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).$implicit,t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",t.getInitials(e.fullName),"")}}const x=function(e,t){return[e,t]},P=function(e,t,n,r){return{"organization__avatar_bg-medium-purple organization__avatar_initials":e,"organization__avatar_bg-foglia-di-acero organization__avatar_default":t,organization__avatar_tie:n,organization__avatar_briefcase:r}};function L(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",21),o["\u0275\u0275template"](1,w,2,1,"b",22),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction4"](5,P,!e.type,e.type,e.type===t.selectOrganizationTypes.Business,o["\u0275\u0275pureFunction2"](2,x,t.selectOrganizationTypes.Legal,t.selectOrganizationTypes.Agency).indexOf(e.type)>-1)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.type)}}function B(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"SELECT_ORGANIZATION_DETAILS.TYPE.CITIZEN"),""))}function k(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"SELECT_ORGANIZATION_DETAILS.TYPE.IE"),""))}function M(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"SELECT_ORGANIZATION_DETAILS.TYPE."+(e.chief?"ADMIN":"EMPLOYEE")),"")}}function G(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"esia-search-element",10),o["\u0275\u0275elementStart"](1,"button",11),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](3).onChoose(n.oid)})),o["\u0275\u0275template"](2,R,1,1,"img",12),o["\u0275\u0275template"](3,L,2,10,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](5,"div",14),o["\u0275\u0275elementStart"](6,"h4",15),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"p",16),o["\u0275\u0275elementContainerStart"](9,17),o["\u0275\u0275template"](10,B,3,3,"ng-container",18),o["\u0275\u0275template"](11,k,3,3,"ng-container",18),o["\u0275\u0275template"](12,M,3,3,"ng-container",19),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=o["\u0275\u0275reference"](4),r=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("value",e.fullName),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.avatarLink)("ngIfElse",n),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",e.fullName," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngSwitch",e.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",null),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",r.selectOrganizationTypes.Business)}}function U(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"esia-search",8),o["\u0275\u0275template"](1,G,13,7,"esia-search-element",9),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("isSearchShow",e.length>10),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e)("ngForTrackByProperty","oid")}}function V(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",1,2),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"esia-header"),o["\u0275\u0275elementStart"](4,"h3",3),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,N,2,0,"div",4),o["\u0275\u0275pipe"](8,"async"),o["\u0275\u0275template"](9,U,2,3,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](10),t=o["\u0275\u0275nextContext"]();o["\u0275\u0275attribute"]("aria-label",o["\u0275\u0275pipeBind1"](2,4,"SELECT_ORGANIZATION_DETAILS.TITLE")),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,6,"SELECT_ORGANIZATION_DETAILS.TITLE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](8,8,t.isRequestInLoading$))("ngIfElse",e)}}const H=[{path:"",component:(()=>{class e extends p.a{constructor(e,t,n,r){var i;super(),this.router=e,this.selectOrganizationService=t,this.modalService=n,this.moduleRef=r,this.selectOrganizationList$=new u.a(null===(i=this.router.getCurrentNavigation().extras.state)||void 0===i?void 0:i.selectOrganizationList),this.isRequestInLoading$=new d.a}get selectOrganizationTypes(){return r}ngOnInit(){this.selectOrganizationList$.getValue()||this.router.navigate(["/"]).then(),this.formFocused()}getInitials(e){return e.split(" ").slice(0,2).reduce((e,t)=>`${e}${t[0]}`,"").toUpperCase()}onChoose(e){this.isRequestInLoading$.next(!0),this.selectOrganizationService.chooseRole$(e).pipe(Object(h.a)(()=>this.isRequestInLoading$.next(!1)),Object(g.a)(this.unsubscribe)).subscribe(e=>{Object.values(i).indexOf(e.error)>-1?this.onHandleError(e.error):this.authProcessing(e)})}authProcessing(e){this.router.navigate(["/"],{queryParams:{loginState:"authProcessing"},state:e}).then()}onReturn(){this.isRequestInLoading$.next(!0),this.selectOrganizationService.return$().pipe(Object(h.a)(()=>this.isRequestInLoading$.next(!1)),Object(g.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}onHandleError(e){this.modalService.open(f.a,this.moduleRef,{title:"SELECT_ORGANIZATION_DETAILS.ERROR.TITLE",description:"SELECT_ORGANIZATION_DETAILS.ERROR."+e,destroy:()=>this.onReturn()})}formFocused(){this.formBody.nativeElement.focus()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](l.b),o["\u0275\u0275directiveInject"](s),o["\u0275\u0275directiveInject"](C.a),o["\u0275\u0275directiveInject"](o.NgModuleRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-select-organization"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275staticViewQuery"](D,!0,o.ElementRef),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.formBody=n.first)},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:3,consts:[["class","container container_wide",4,"ngIf"],[1,"container","container_wide"],["formBody",""],[1,"title-h3","text-center"],["class","form-container mt-24",4,"ngIf","ngIfElse"],["data",""],[1,"form-container","mt-24"],[1,"loader"],[1,"block","mt-24",3,"isSearchShow"],[3,"value",4,"ngFor","ngForOf","ngForTrackByProperty"],[3,"value"],["type","button","tabindex","1",1,"organization","block","mt-24","flex-container","flex-column-sm","align-items-center",3,"click"],["alt","","class","organization__avatar",3,"src",4,"ngIf","ngIfElse"],["defaultAvatar",""],[1,"ml-md-24","mt-sm-16","flex-1"],[1,"title-h4","organization__title","text-center-sm"],[1,"text-plain","mt-8","text-helper","text-center-sm"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["alt","",1,"organization__avatar",3,"src"],[1,"organization__avatar","flex-container","align-items-center","justify-center",3,"ngClass"],[4,"ngIf"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,V,11,10,"div",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.selectOrganizationList$))},directives:[c.t,I.a,F,c.s,b.a,m,c.x,c.y,c.z,c.q],pipes:[c.b,E.d],styles:['.organization[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;font-family:inherit;font-size:inherit;line-height:inherit;border:0;text-align:left;box-shadow:none;color:inherit;padding:24px;width:100%;border-radius:12px;background:#fff;box-shadow:0 1px 4px #e3ebfc,0 24px 48px rgba(230,235,245,.4);cursor:pointer}.organization[_ngcontent-%COMP%]:focus-visible{position:relative;outline:none;z-index:2}.organization[_ngcontent-%COMP%]:focus-visible:before{content:"";z-index:-1;position:absolute;top:50%;left:50%;height:100%;width:calc(100% + 5px);transform:translate(-50%,-50%);border:3px solid #9b3be5;border-radius:8px;background:#fef0cc}.organization__avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%}.organization__avatar_bg-medium-purple[_ngcontent-%COMP%]{background-color:#9b3be5}.organization__avatar_bg-foglia-di-acero[_ngcontent-%COMP%]{background-color:#ff8a00}.organization__avatar_initials[_ngcontent-%COMP%]{color:#fff;font-size:20px}.organization__avatar_default[_ngcontent-%COMP%]{background-repeat:no-repeat}.organization__avatar_tie[_ngcontent-%COMP%]{background-image:url(tie.c5afe97e5c07a5125d3e.svg);background-position:top}.organization__avatar_briefcase[_ngcontent-%COMP%]{background-image:url(briefcase.e60bf8217fc18c403aa2.svg);background-position:50%}.organization__title[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:6;-webkit-box-orient:vertical;overflow:hidden}@media (min-width:768px){.organization__title[_ngcontent-%COMP%]{-webkit-line-clamp:2}}'],changeDetection:0}),e})()}];let q=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.f.forChild(H)],l.f]}),e})();var Y=n("FpXt");let j=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[c.c,_.ReactiveFormsModule,E.c]]}),e})(),K=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[s],imports:[[c.c,q,Y.a,E.c,j]]}),e})()},"1sBl":function(e,t,n){var r=n("e/Dd").getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,n=r(e),i=145===n?26:2*Math.ceil((n-13)/(2*t-2)),o=[n-7],a=1;a<t-1;a++)o[a]=o[a-1]-i;return o.push(6),o.reverse()},t.getPositions=function(e){for(var n=[],r=t.getRowColCoords(e),i=r.length,o=0;o<i;o++)for(var a=0;a<i;a++)0===o&&0===a||0===o&&a===i-1||o===i-1&&0===a||n.push([r[o],r[a]]);return n}},"3X7Y":function(e,t,n){var r=n("u/Db");function i(e){this.mode=r.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);var i=this.data.length-t;i>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*i+1))},e.exports=i},"49sm":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},AZa5:function(e,t,n){var r=n("Wogr"),i=n("u/Db");function o(e){this.mode=i.BYTE,this.data=new r(e)}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(var t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=o},BCVQ:function(e,t){var n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",r="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=new RegExp(n,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(r,"g"),t.NUMERIC=new RegExp("[0-9]+","g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var i=new RegExp("^"+n+"$"),o=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return i.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},ELBg:function(e,t,n){"use strict";var r={single_source_shortest_paths:function(e,t,n){var i={},o={};o[t]=0;var a,s,c,l,u,d,p=r.PriorityQueue.make();for(p.push(t,0);!p.empty();)for(c in l=(a=p.pop()).cost,u=e[s=a.value]||{})u.hasOwnProperty(c)&&(d=l+u[c],(void 0===o[c]||o[c]>d)&&(o[c]=d,p.push(c,d),i[c]=s));if(void 0!==n&&void 0===o[n]){var h=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(h)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),r=e[r];return n.reverse(),n},find_path:function(e,t,n){var i=r.single_source_shortest_paths(e,t,n);return r.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(e){var t,n=r.PriorityQueue,i={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i.queue=[],i.sorter=e.sorter||n.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=r},Hq07:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginModule",(function(){return sn}));var r=n("ofXK"),i=n("tyNb"),o=n("fXoL");let a=(()=>{class e{constructor(e){this.router=e}canActivate(e){var t;return!!(null===(t=this.router.getCurrentNavigation().extras.state)||void 0===t?void 0:t.hasOwnProperty(e.data.stateKey))||this.router.navigate(["/"])}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](i.b))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=n("3Pt+"),c=n("tSjf"),l=n("cvmq"),u=n("CHA6"),d=n("Gk2f"),p=n("BmY/"),h=n("j0Qm"),g=n("e1ef"),f=n("yA8g"),C=n("sYmb");function I(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"TTP.INVALID_LABEL")," "))}function _(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"esia-input",8),o["\u0275\u0275listener"]("keyup.enter",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().check()}))("keyup.space",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().check()})),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,I,3,3,"div",9),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("labelText",o["\u0275\u0275pipeBind1"](2,6,"OTP.CODE"))("name",o["\u0275\u0275pipeBind1"](3,8,"OTP.CODE"))("invalid",e.invalidCode)("autocomplete","one-time-code")("tabIndex",1),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",e.invalidCode)}}function m(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"esia-code-input",12),o["\u0275\u0275listener"]("checkValue",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().check(t)}))("equalToPreviousValue",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]();return t.setError(t.errorStateTypes.WrongTtp)})),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("labelText",o["\u0275\u0275pipeBind1"](2,5,"OTP.CODE"))("length",e.length)("errorState",e.invalidCode)("errorMessage",o["\u0275\u0275pipeBind1"](3,7,"TTP.INVALID_LABEL"))("tabIndex",1)}}function E(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275elementStart"](1,"button",14),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().check()})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.form.invalid||e.code.value===e.previousCode),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"TTP.CONTINUE")," ")}}let v=(()=>{class e{constructor(e,t){this.config=e,this.changeDetector=t,this.checkCode=new o.EventEmitter,this.goBackEvent=new o.EventEmitter,this.previousCode="",this.esiaConfig=this.config.params,this.codeTypeFree=u.b.Free}get errorStateTypes(){return d.b}get code(){return this.form.get("code")}get invalidCode(){return!this.code.pristine&&"invalid_ttp"===this.state||this.errorState===this.errorStateTypes.WrongTtp}ngOnInit(){this.form=new s.FormGroup({code:new s.FormControl("",[s.Validators.required])})}check(e){this.previousCode=this.code.value,e?(this.hideError(),this.checkCode.emit(e)):this.checkCode.emit(this.code.value)}clearCodeInput(){this.codeInput&&this.codeInput.clearValue()}setError(e){e&&this.clearCodeInput(),this.errorState=e,this.changeDetector.detectChanges()}hideError(){this.setError(null)}goBack(){this.goBackEvent.emit()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-ttp"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](p.a,!0),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.codeInput=n.first)},inputs:{state:"state",errorState:"errorState",description:"description",codeType:"codeType",length:"length"},outputs:{checkCode:"checkCode",goBackEvent:"goBackEvent"},decls:11,vars:10,consts:[[3,"handler"],[3,"formGroup"],[1,"title-h3","text-center","mb-24",3,"innerHTML"],[1,"text-plain","text-center","mb-24",3,"innerHTML"],[1,"input-control"],[4,"ngIf","ngIfElse"],["codeLength",""],["class","mt-24",4,"ngIf"],["id","code","formControlName","code",3,"labelText","name","invalid","autocomplete","placeholder","tabIndex","keyup.enter","keyup.space"],["class","error-label mt-8",4,"ngIf"],[1,"error-label","mt-8"],[1,"mt-40"],[3,"labelText","length","errorState","errorMessage","tabIndex","checkValue","equalToPreviousValue"],[1,"mt-24"],["type","button","tabindex","1",1,"plain-button","plain-button_wide","wide",3,"disabled","click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"esia-back-button",0),o["\u0275\u0275listener"]("handler",(function(){return t.goBack()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275element"](2,"h3",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"div",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275template"](7,_,5,10,"ng-container",5),o["\u0275\u0275template"](8,m,4,9,"ng-template",null,6,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,E,4,4,"div",7),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](9);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.form),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](3,6,"TTP.TITLE"),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](5,8,"TTP.DESCRIPTION"),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.codeType===t.codeTypeFree||!t.esiaConfig.autosentcode)("ngIfElse",e),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.codeType===t.codeTypeFree)}},directives:[g.a,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,r.t,f.a,s.NgControlStatus,s.FormControlName,p.a],pipes:[C.d],styles:[""],changeDetection:0}),e})();var S=n("SfxQ"),T=n("2Vo4"),y=n("8iAA"),A=n("71PI"),F=n("2Hrk"),O=n("1G5W"),b=n("vkgz"),D=n("pLZG"),N=n("IzEk"),R=n("kiRB"),w=n("bOGp"),x=n("I8Zc");let P=(()=>{class e{closeModal(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-person-filter-error-modal"]],inputs:{title:"title",description:"description",closeModal:"closeModal"},decls:9,vars:9,consts:[[1,"text-center"],[1,"error-sign","mt-32"],[1,"title-h4","mt-24",3,"innerHTML"],[1,"text-plain-small","text-helper","mt-8",3,"innerHTML"],["type","button",1,"plain-button","plain-button_auto-width","mt-24",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"div",1),o["\u0275\u0275element"](2,"h4",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"p",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"button",4),o["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](3,3,t.title),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](5,5,t.description),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,7,"BUTTON.RETURN"),"\n"))},pipes:[C.d],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%}@media (min-width:768px){[_nghost-%COMP%]{justify-content:inherit}}"]}),e})();var L=n("Eg8k");function B(e,t){if(1&e&&(o["\u0275\u0275element"](0,"h3",8),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,e.title),o["\u0275\u0275sanitizeHtml"])}}function k(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"LOGIN.CPH.ERROR")," "))}let M=(()=>{class e{constructor(e){this.changeDetector=e,this.sendPhraseEvent=new o.EventEmitter,this.openFaqEvent=new o.EventEmitter}get phrase(){var e;return null===(e=this.form)||void 0===e?void 0:e.get("phrase")}setError(e){var t;null===(t=this.phrase)||void 0===t||t.setErrors({error:e}),this.changeDetector.detectChanges()}ngOnInit(){this.form=new s.FormGroup({phrase:new s.FormControl("",s.Validators.required)}),setTimeout(()=>{document.querySelector("input").focus()})}onSubmit(){this.sendPhraseEvent.emit(this.phrase.value)}openFAQ(){this.openFaqEvent.emit()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.ChangeDetectorRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-cph"]],inputs:{title:"title"},outputs:{sendPhraseEvent:"sendPhraseEvent",openFaqEvent:"openFaqEvent"},decls:15,vars:18,consts:[[1,"text-center",3,"formGroup"],["class","title-h3 mb-24",3,"innerHTML",4,"ngIf"],[1,"input-control","mt-24","mb-8","text-left"],["class","error-label mb-4",4,"ngIf"],["id","password","formControlName","phrase",3,"invalid","labelText","name","commitOnInput"],[1,"mt-40"],[1,"plain-button","plain-button_wide",3,"disabled","click"],["type","button",1,"plain-button-inline",3,"click"],[1,"title-h3","mb-24",3,"innerHTML"],[1,"error-label","mb-4"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",0),o["\u0275\u0275template"](1,B,2,3,"h3",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275template"](3,k,3,3,"div",3),o["\u0275\u0275element"](4,"esia-input-password",4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"button",6),o["\u0275\u0275listener"]("click",(function(){return t.onSubmit()})),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",5),o["\u0275\u0275elementStart"](12,"button",7),o["\u0275\u0275listener"]("click",(function(){return t.openFAQ()})),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("formGroup",t.form),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.title),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.phrase.pristine&&t.phrase.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("invalid",!t.phrase.pristine&&t.phrase.invalid)("labelText",o["\u0275\u0275pipeBind1"](5,10,"LOGIN.CPH.LABEL"))("name",o["\u0275\u0275pipeBind1"](6,12,"LOGIN.CPH.LABEL"))("commitOnInput",!0),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.phrase.pristine||t.phrase.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,14,"BUTTON.CONTINUE")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](14,16,"LOGIN.LOGIN_ISSUES")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,r.t,L.a,s.NgControlStatus,s.FormControlName],pipes:[C.d],styles:[""],changeDetection:0}),e})();var G=n("55/F"),U=n("RqrM"),V=n("LG1p"),H=n("95Ly"),q=n("l3Vr"),Y=n("OUbo"),j=n("S2y7"),K=n("0C3n"),z=n("ABZj"),Q=n("hI/h");n("0LtY"),n("PhFw");let $=(()=>{class e{constructor(){}static dateToStr(e){const t=e.split(" "),n=[];for(const r in t)t[r]&&" "!==t[r]&&n.push(t[r]);return new Date(n[0]+" "+n[1]+" "+n[3]+" "+n[2]+" "+n[4])}static dateFormat(e){const t=e.getUTCDate(),n=e.getUTCMonth()+1;return(t>9?t:"0"+t)+"."+(n>9?n:"0"+n)+"."+e.getUTCFullYear()}static cspId(e){switch(e.type){case"capi":return e.alias;case"pkcs11":return e.alias+"/"+e.num;default:return e.crypto_id}}static parseDn(e){const t={},n=e.split("\n");for(const r of n){const e=r.split("=");t[e[0].trim().toLocaleLowerCase()]=e[1].trim()}return t}static getCryptoIdByContainerId(e){return e.indexOf("CryptoPro")>=0||e.indexOf("VIPNet")>=0?e.substring(0,e.indexOf("/")):e.substring(0,e.lastIndexOf("/"))}static removeIfc(e){const t=document.getElementById(e);"object"==typeof t&&t.parentNode?t.parentNode.removeChild(t):t&&document.body.removeChild(t)}version(){return this.instance||this.init(),this.instance.version}init(){const t="ifcplugin",n=document.createElement("object");if(n.setAttribute("id",t),n.setAttribute("type","application/x-ifcplugin"),n.setAttribute("height","1"),n.setAttribute("width","1"),document.body.appendChild(n),!n.valid||"function"!=typeof n.create&&"object"!=typeof n.create)throw e.removeIfc(t),new Error("ds_plugin_not_found");if(0!==n.create())throw e.removeIfc(t),new Error("ds_plugin_internal");this.instance=n}crtString(e){if(this.instance.info_x509(this.instance.load_x509_from_container(e),1,[]),0!==this.instance.get_last_error())throw new Error("ds_plugin_internal");return"info".info}parseCrt(t,n){const r="subject",i="common_name",o={validity:{},issuer:{},subject:{},sort:{},filter:{}},a=e.parseDn(t.cert_subject),s=e.parseDn(t.cert_issuer);o.id=e.cspId(n)+"/"+t.id,o.serial_number=t.cert_sn,o.validity.from=e.dateFormat(e.dateToStr(t.cert_valid_from)),o.validity.to=e.dateFormat(e.dateToStr(t.cert_valid_to)),o.issuer[i]=void 0!==s.commonname?s.commonname:s.cn,o[r][i]=void 0!==a.commonname?a.commonname:a.cn,o[r].sn=null!=a.surname?a.surname:"",o[r].gn=null!=a.givenname?a.givenname:"",o.string=this.crtString(o.id),o.type=o[r].sn.length>0?"extended":"base",o.sort.from=e.dateToStr(t.cert_valid_from),o.filter.to=e.dateToStr(t.cert_valid_to),o.filter.csp_type=n.type,void 0!==o.issuer[i]&&o.issuer[i]&&(o.issuer[i]=o.issuer[i].replace("_"," ")),void 0!==o[r][i]&&o[r][i]&&(o[r][i]=o[r][i].replace("_"," "));const c=o[r].sn;return void 0!==c&&c&&(o[r].sn=o[r].sn.replace("_"," ")),void 0!==o[r].gn&&o[r].gn&&(o[r].gn=o[r].gn.replace("_"," ")),o}crts(){const t=[],n=this.instance.get_list_info_size();if(0!==this.instance.get_last_error())throw new Error("ds_plugin_internal");for(let r=0;r<n;r++){const n=[];if(this.instance.get_list_info(r,n),0!==this.instance.get_last_error())throw new Error("ds_plugin_internal");const i=this.instance.get_list_certs_size(e.cspId(n));if(0!==this.instance.get_last_error())throw new Error("ds_plugin_internal");for(let e=0;e<i;e++){const r=[];if(this.instance.get_list_certs(e,r),0!==this.instance.get_last_error())throw new Error("ds_plugin_internal");t.push(this.parseCrt(r,n))}}return t.sort((e,t)=>e.sort.from<t.sort.from?1:e.sort.from>t.sort.from?-1:0),t.filter(e=>e.filter.to>=new Date)}crtInfo(e){const t=this.crts();for(const n of t)if(n.id===e)return n;throw new Error("ds_plugin_container_not_found")}isPinRequired(t){const n=e.getCryptoIdByContainerId(t),r=this.instance.get_list_info_size();if(0!==this.instance.get_last_error())throw new Error("ds_plugin_internal");for(let i=0;i<r;i++){const t="type",r=[];if(this.instance.get_list_info(i,r),0!==this.instance.get_last_error())throw new Error("ds_plugin_internal");if(n===e.cspId(r))return"pkcs11"===r[t]}throw new Error("ds_plugin_container_not_found")}sign(e,t,n){const r=[];switch(this.instance.sign(e,t,n,1,1,1,3,r),this.instance.get_last_error()){case 0:return r.sign_base64;case 1:throw new Error("ds_plugin_process_interrupted");case 25:throw new Error("ds_plugin_container_not_found");case 160:throw new Error("ds_plugin_bad_pin");default:throw new Error("ds_plugin_internal")}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),W=(()=>{class e{constructor(e,t,n){this.zone=e,this.dsPlugin=t,this.modalService=n,this.certs=[]}static checkPin(e){if(null==e||0===e.trim().length)throw new Error("ds_plugin_bad_pin")}static removeIfc(e){"object"==typeof e&&e.parentNode?e.parentNode.removeChild(e):e&&document.body.removeChild(e)}static isChromeConnector(){const e=["Firefox/","Chrome","Opera","Edge","YaBrowser"],t=navigator.userAgent;let n=!1;for(const r of e){if(-1!==t.search(r)&&"Firefox/"===r){let e=t.indexOf(r);e+=8;let i=t.substr(e);if(i){const e=i.indexOf(" ");i=-1!==e?i.substring(0,e):i,(i?parseInt(i,10):0)>=50&&(n=!0)}break}if(-1!==t.search(r)){n=!0;break}}return n}static dsPluginErrorHandler(e,t){switch(e){case"ds_plugin_not_found":t({code:"plugin_not_found"});break;case"ds_plugin_internal":t({code:"internal"});break;case"ds_plugin_container_not_found":t({code:"container_not_found"});break;case"ds_plugin_process_interrupted":t({code:"process_interrupted"});break;default:throw e}}static normalizeVersionOctet(e){return void 0!==e&&null!=e?"000".substring(0,3-e.length)+e:"000"}static normalizeVersion(t){const n=void 0!==t&&null!=t?t.split("."):[];let r="1";for(let i=0;i<4;i++)r+=e.normalizeVersionOctet(n[i]);return parseInt(r,10)}static parseDate(e){const t=new Date(e),n=t.getUTCDate(),r=t.getUTCMonth()+1;return(n>9?n:"0"+n)+"."+(r>9?r:"0"+r)+"."+t.getUTCFullYear()}version(){return this.instance||this.dsPlugin.init(),{version:this.version,crts:this.certs,sign:this.sign}}checkPlugin(t,n,r){this.disclaimerDialog(),setTimeout(()=>{this.initIFCPlugin(e=>{this.certs=e.certs,t({version:e.version})},()=>{this.ifcPlugin=null;try{const n=this.dsPlugin.version();console.log(n),e.normalizeVersion(n)>=e.normalizeVersion(r)?t({version:n}):this.errorDialog("old_version")}catch(i){"ds_plugin_not_found"===i.message?this.errorDialog("not_found"):e.dsPluginErrorHandler(i,n)}})},2e3)}listDialog(t,n){setTimeout(()=>{let r;try{r=this.ifcPlugin?this.certs:this.dsPlugin.crts()}catch(i){return void e.dsPluginErrorHandler(i,n)}this.modalService.close(),this.modalService.open(K.a,null,{items:r.map((t,n)=>({index:n,commonName:this.ifcPlugin?t.getSubjectDN().getCommonName():t.subject.common_name,issuer:this.ifcPlugin?t.getIssuerDN().getCommonName():t.issuer.common_name,subjectSurname:this.ifcPlugin?t.getSubjectDN().getSurname():t.subject.sn,subjectName:this.ifcPlugin?t.getSubjectDN().getGivenName():t.subject.gn,validFrom:this.ifcPlugin?e.parseDate(t.getValidFrom()):t.validity.from,validTo:this.ifcPlugin?e.parseDate(t.getValidTo()):t.validity.to})),select:e=>{this.ifcPlugin?this.ifcPlugin.getCertificate(r[e].getContainerId(),n=>{try{t({id:r[e].getContainerId(),certificate:n.cert})}catch(i){console.log("Invalid certificate. Container ID: "+r[e].getContainerId())}}):t({id:r[e].id,certificate:r[e].string})}})},2e3)}sign(t,n,r,i){let o;this.disclaimerDialog();let a=3;if(this.ifcPlugin)for(const e of this.certs)e.getContainerId()===t&&(o=e);else try{o=this.dsPlugin.crtInfo(t)}catch(c){return void e.dsPluginErrorHandler(c,i)}const s=l=>{setTimeout(()=>{try{if(this.ifcPlugin)this.ifcPlugin.signDataCmsAttached(t,l,n,e=>{window.IFCError.IFC_OK===e.error_code?r({sign:e.sign_value}):window.IFCError.IFC_BAD_TYPE_PIN!==e.error_code&&window.IFCError.IFC_P11_LOGIN_ERROR!==e.error_code||(a=a>0?a-1:0,this.pinDialog(o,s,a))});else{const e=this.dsPlugin.sign(t,l,n);r({sign:e})}}catch(c){"ds_plugin_bad_pin"===c?(a=a>0?a-1:0,this.pinDialog(o,s,a)):e.dsPluginErrorHandler(c,i)}},2e3)};setTimeout(()=>{if(this.ifcPlugin)this.pinDialog(o,s);else{let a;try{a=this.dsPlugin.isPinRequired(t)}catch(c){return void e.dsPluginErrorHandler(c,i)}if(a)this.pinDialog(o,s);else try{r({sign:this.dsPlugin.sign(t,"",n)})}catch(c){e.dsPluginErrorHandler(c,i)}}},2e3)}selectAndSign(e,t,n){this.listDialog(r=>{this.sign(r.id,e,e=>{e.id=r.id,e.certificate=r.certificate,t(e)},e=>{n(e)})},e=>{n(e)})}selectAndSignJsonXml(e,t,n,r){this.listDialog(t=>{this.sign(t.id,e,i=>{this.sign(t.id,e,e=>{n({jsonPkcs7:i.sign,xmlPkcs7:e.sign})},e=>{r(e)})},e=>{r(e)})},e=>{r(e)})}initIFCPlugin(t,n){const r=navigator.userAgent;r.search("Chrome")>-1||r.search("Firefox")>-1?document.getElementById("ifcplugin-extension-is-installed")&&document.getElementById("ifc-plugin-is-installed")?this.ifcLoad(!0,e=>{t(e)},()=>{n()}):n():this.ifcLoad(e.isChromeConnector(),e=>{t(e)},()=>{n()})}ifcLoad(t,n,r){let i;i=document.createElement("object"),i.setAttribute("id","IFCPlugin"),i.setAttribute("height","1"),i.setAttribute("width","1"),t||i.setAttribute("type","application/x-ifcplugin"),document.getElementById("IFCPlugin")||document.body.appendChild(i),this.ifcPlugin=new window.IFCPlugin(document.getElementById("IFCPlugin"),t,!0),this.ifcPlugin?(this.disclaimerDialog(),this.ifcPlugin.create("","",t=>{window.IFCError.IFC_OK===t.error_code?this.ifcPlugin.getPluginVersion(t=>{if(window.IFCError.IFC_OK===t.error_code){const r=t.version;console.log("VERSION: "+t.version),this.ifcPlugin.getCertificateList(t=>{let o=t.certs_list;o=o.filter(e=>e.isValid()),console.log("Is valid certificates: "+o.length),n({version:r,certs:o}),o.length||e.removeIfc(i)})}else e.removeIfc(i),r()}):(e.removeIfc(i),r())})):r()}errorDialog(e){this.modalService.close(),this.modalService.open(x.a,null,{type:e})}pinDialog(t,n,r){this.zone.runTask(()=>{const i={commonName:this.ifcPlugin?t.getSubjectDN().getCommonName():t.subject.common_name,issuer:this.ifcPlugin?t.getIssuerDN().getCommonName():t.issuer.common_name,subjectSurname:this.ifcPlugin?t.getSubjectDN().getSurname():t.subject.sn,subjectName:this.ifcPlugin?t.getSubjectDN().getGivenName():t.subject.gn,validFrom:this.ifcPlugin?e.parseDate(t.getValidFrom()):t.validity.from,validTo:this.ifcPlugin?e.parseDate(t.getValidTo()):t.validity.to};this.modalService.close(),this.modalService.open(z.a,null,{error:r,item:i,isPKCS11:t.isPKCS11(),submit:e=>{n(e),setTimeout(()=>{this.disclaimerDialog()})}})})}clearModals(){this.modalService.close()}disclaimerDialog(){this.zone.runTask(()=>{this.modalService.close(),this.modalService.open(Q.a,null,{closable:!1})})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](o.NgZone),o["\u0275\u0275inject"]($),o["\u0275\u0275inject"](U.a))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),X=(()=>{class e{constructor(e,t){this.api=e,this.dsWidget=t,this.version="2.0.3.1"}checkPlugin(){return new Promise((e,t)=>{this.dsWidget.checkPlugin(e,t,this.version)})}sign(e){return new Promise((t,n)=>{this.dsWidget.selectAndSign(e,t,n)})}signJsonXml(e,t){return new Promise((n,r)=>{this.dsWidget.selectAndSignJsonXml(e,t,n,r)})}checkPluginAndSign(e,t){const n={};this.checkPlugin().then(t=>{this.api.getRequest("profile/rs/prns/usrcfm/ds-challenge").subscribe(t=>{n.__challenge=t.challenge,this.sign(t.challenge).then(t=>{n.__signature=t.sign,n.__certificate=t.certificate,e&&"function"==typeof e&&e(n)},e=>{})})},e=>{t&&"function"==typeof t&&t(e)})}closeModals(){this.dsWidget.clearModals()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](j.a),o["\u0275\u0275inject"](W))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var J=n("b6Qw"),Z=n("9YtQ"),ee=n("1XOz"),te=n("eGa8"),ne=n("U5gq");let re=(()=>{class e{constructor(){this.checkAgentInfo()}checkAgentInfo(){var e;const t=null===(e=window)||void 0===e?void 0:e.navigator,n=null==t?void 0:t.userAgent,r=null==n?void 0:n.toLowerCase(),i=null==t?void 0:t.standalone,o=/ip(ad|hone|od)/.test(r)||"MacIntel"===t.platform&&t.maxTouchPoints>1,a=/android/.test(r),s=/safari/.test(r);this.isWebview=a&&/; wv\)/.test(r)||o&&!i&&!s;const c=o?"iOS":a?"Android":"Other";this.webviewInfo=this.isWebview?"Yes":"No",this.userAgent=n,this.userAgentInfo=`OS: ${c}, Webview: ${this.webviewInfo}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ie=n("b8Vu"),oe=n("F8Sv"),ae=n("3uuC"),se=n("Y6wK"),ce=n("j0+L"),le=n("fB2D"),ue=n("0FX9");const de=["qrcElement"];let pe=(()=>{let e=class{constructor(e,t){this.renderer=e,this.platformId=t,this.colordark="",this.colorlight="",this.level="",this.hidetitle=!1,this.size=0,this.usesvg=!1,this.allowEmptyString=!1,this.qrdata="",this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.scale=4,this.width=10,this.alt=null,this.ariaLabel=null,this.title=null,this.qrcode=null,this.isValidQrCodeText=e=>!1===this.allowEmptyString?!(void 0===e||""===e||"null"===e||null===e):!(void 0===e),""!==this.colordark&&console.warn("[angularx-qrcode] colordark is deprecated, use colorDark."),""!==this.colorlight&&console.warn("[angularx-qrcode] colorlight is deprecated, use colorLight."),""!==this.level&&console.warn("[angularx-qrcode] level is deprecated, use errorCorrectionLevel."),!1!==this.hidetitle&&console.warn("[angularx-qrcode] hidetitle is deprecated."),0!==this.size&&console.warn("[angularx-qrcode] size is deprecated, use `width`. Defaults to 10."),!1!==this.usesvg&&console.warn("[angularx-qrcode] usesvg is deprecated, use [elementType]=\"'img'\".")}ngAfterViewInit(){Object(r.J)(this.platformId)||this.createQRCode()}ngOnChanges(){this.createQRCode()}toDataURL(){return new Promise((e,t)=>{Object(ue.toDataURL)(this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},(n,r)=>{n?t(n):e(r)})})}toCanvas(e){return new Promise((t,n)=>{Object(ue.toCanvas)(e,this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},e=>{e?n(e):t("success")})})}toSVG(){return new Promise((e,t)=>{Object(ue.toString)(this.qrdata,{color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,type:"svg",version:this.version,width:this.width},(n,r)=>{n?t(n):e(r)})})}renderElement(e){for(const t of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,t);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):void 0!==this.version&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto"),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty");let e;switch(this.elementType){case"canvas":e=this.renderer.createElement("canvas"),this.toCanvas(e).then(()=>{this.ariaLabel&&this.renderer.setAttribute(e,"aria-label",""+this.ariaLabel),this.title&&this.renderer.setAttribute(e,"title",""+this.title),this.renderElement(e)}).catch(e=>{console.error("[angularx-qrcode] canvas error: ",e)});break;case"svg":e=this.renderer.createElement("svg","svg"),this.toSVG().then(t=>{e.innerHTML=t,this.renderer.setAttribute(e,"height",""+this.width),this.renderer.setAttribute(e,"width",""+this.width),this.renderElement(e)}).catch(e=>{console.error("[angularx-qrcode] svg error: ",e)});break;case"url":case"img":default:e=this.renderer.createElement("img"),this.toDataURL().then(t=>{this.alt&&e.setAttribute("alt",this.alt),this.ariaLabel&&e.setAttribute("aria-label",this.ariaLabel),e.setAttribute("src",t),this.title&&e.setAttribute("title",this.title),this.renderElement(e)}).catch(e=>{console.error("[angularx-qrcode] img/url error: ",e)})}}catch(e){console.error("[angularx-qrcode] Error generating QR Code: ",e.message)}}};return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.Renderer2),o["\u0275\u0275directiveInject"](o.PLATFORM_ID))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["qrcode"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275staticViewQuery"](de,!0),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.qrcElement=n.first)},inputs:{colordark:"colordark",colorlight:"colorlight",level:"level",hidetitle:"hidetitle",size:"size",usesvg:"usesvg",allowEmptyString:"allowEmptyString",qrdata:"qrdata",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",margin:"margin",scale:"scale",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title",version:"version"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["qrcElement",""]],template:function(e,t){1&e&&o["\u0275\u0275element"](0,"div",null,0),2&e&&o["\u0275\u0275classMap"](t.cssClass)},encapsulation:2,changeDetection:0}),e})(),he=(()=>{let e=class{};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[]}),e})();var ge=n("cq4l");const fe=function(e){return{outdated:e}};function Ce(e,t){if(1&e&&o["\u0275\u0275element"](0,"qrcode",8),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](3,fe,e.updateState||e.error))("qrdata",e.qrData)("width",160)}}function Ie(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"LOGIN.CODE_OUTDATED")," "))}function _e(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"LOGIN.CODE_DURATION")," "))}function me(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0,9),o["\u0275\u0275template"](1,Ie,3,3,"div",10),o["\u0275\u0275elementStart"](2,"div",9),o["\u0275\u0275template"](3,_e,3,3,"div",11),o["\u0275\u0275elementStart"](4,"esia-timer",12),o["\u0275\u0275listener"]("resend",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().updateCode()})),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.updateState),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!e.updateState),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("restartTitle",o["\u0275\u0275pipeBind1"](5,4,"LOGIN.UPDATE"))("timer",e.timer)}}function Ee(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",13),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",7),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().updateCode()})),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"LOGIN.QR_ERROR")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,4,"LOGIN.UPDATE")," "))}let ve=(()=>{class e extends c.a{constructor(e,t,n){var r,i,a,s,c;super(),this.cdr=e,this.mediaQueriesService=t,this.config=n,this.goBackEvent=new o.EventEmitter,this.updateCodeEvent=new o.EventEmitter,this.params=null===(r=this.config.params)||void 0===r?void 0:r.qr,this.qrSize=140,this.qrUpdateCount=0,this.UPDATE_TIME=1e3*((null===(a=null===(i=this.config.params)||void 0===i?void 0:i.qr)||void 0===a?void 0:a.refreshTime)?null===(c=null===(s=this.config.params)||void 0===s?void 0:s.qr)||void 0===c?void 0:c.refreshTime:60),this.updateState=!1,this.initTimer()}get error(){return"error"===this.qrData}ngOnInit(){this.initSize(),this.error||this.startTimer()}ngOnDestroy(){this.timer.stop()}initSize(){this.mediaQueriesService.deviceType$.pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>{this.qrSize="sm"===e.deviceType?140:160,this.cdr.markForCheck()})}updateCode(){this.updateState=!1,this.updateCodeEvent.emit(),this.startTimer()}initTimer(){this.timer=new ce.a(this.UPDATE_TIME/1e3,this.cdr),this.timer.timer$.pipe(Object(O.a)(this.unsubscribe),Object(D.a)(e=>0===e)).subscribe(()=>{this.qrUpdateCount++,0!==this.params.refreshCount?(0!==this.qrUpdateCount&&this.qrUpdateCount===this.params.refreshCount?(this.updateState=!0,this.qrUpdateCount=0):this.updateCode(),this.cdr.detectChanges()):this.updateState=!0})}startTimer(){this.timer.start(this.UPDATE_TIME/1e3)}stopTimer(){this.timer.stop()}goBack(){this.timer.stop(),this.goBackEvent.emit()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](le.a),o["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-qr-code"]],inputs:{qrData:"qrData"},outputs:{goBackEvent:"goBackEvent",updateCodeEvent:"updateCodeEvent"},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:9,consts:[[1,"text-center","mb-24"],[1,"text-center","mt-24"],[3,"ngClass","qrdata","width",4,"ngIf"],[1,"state-row","flex-container-md","justify-center-md","mt-16"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"mt-40","text-center"],["type","button","tabindex","1",1,"plain-button-inline",3,"click"],[3,"ngClass","qrdata","width"],[1,"text-center"],["class","text-center red",4,"ngIf"],["class","mb-4",4,"ngIf"],[3,"restartTitle","timer","resend"],[1,"text-center","red"],[1,"mb-4"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",1),o["\u0275\u0275template"](4,Ce,1,5,"qrcode",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275template"](6,me,6,6,"ng-container",4),o["\u0275\u0275template"](7,Ee,7,6,"ng-container",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",6),o["\u0275\u0275elementStart"](9,"button",7),o["\u0275\u0275listener"]("click",(function(){return t.goBack()})),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,5,"LOGIN.QR_DESCRIPTION")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.qrData),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.error),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.error),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,7,"LOGIN.GO_TO_PASSWORD")," "))},directives:[r.t,pe,r.q,ge.a],pipes:[C.d],styles:["qrcode[_ngcontent-%COMP%]{display:block;margin:-5px}.outdated[_ngcontent-%COMP%]{opacity:.1}.state-row[_ngcontent-%COMP%]{text-align:center}@media (max-width:767px){.state-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(:last-child){margin-bottom:8px}}@media (min-width:768px){.state-row[_ngcontent-%COMP%]{display:flex}.state-row[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:16px}}"],changeDetection:0}),e})();var Se=n("Iz2d"),Te=n("RQNc"),ye=n("Y97i");function Ae(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",3),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().initEdsAuth()})),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",2),o["\u0275\u0275elementStart"](8,"button",4),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().edsErrorModal()})),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",5),o["\u0275\u0275elementStart"](12,"button",4),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().goBack()})),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"LOGIN.INSERT_EDS")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,6,"LOGIN.DONE")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,8,"LOGIN.EDS_ISSUES")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](14,10,"LOGIN.BACK")," "))}const Fe=function(){return{icon:"exclamation",title:"LOGIN.EDS_INVALID_CERTIFICATE.TITLE",description:"LOGIN.EDS_INVALID_CERTIFICATE.DESCRIPTION",link:"/",goBack:"LOGIN.EDS_UNKNOWN_CERTIFICATE.BACK"}};function Oe(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,Fe))}}const be=function(){return{icon:"exclamation",title:"LOGIN.EDS_CA_UNAVAILABLE.TITLE",description:"LOGIN.EDS_CA_UNAVAILABLE.DESCRIPTION",link:"/",goBack:"LOGIN.EDS_UNKNOWN_CERTIFICATE.BACK"}};function De(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,be))}}const Ne=function(){return{icon:"exclamation",title:"LOGIN.EDS_NON_LEGAL.TITLE",description:"LOGIN.EDS_NON_LEGAL.DESCRIPTION",link:"/",goBack:"LOGIN.EDS_NON_LEGAL.BACK"}};function Re(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,Ne))}}const we=function(){return{description:"LOGIN.EDS_USER.DESCRIPTION",link:"/",linkText:"LOGIN.EDS_USER.BACK",showFAQ:!0}};function xe(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,we))}}const Pe=function(){return{title:"LOGIN.EDS_DISABLED.TITLE",description:"LOGIN.EDS_DISABLED.DESCRIPTION",goBack:"LOGIN.EDS_DISABLED.BACK",showFAQ:!0}};function Le(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,Pe))}}const Be=function(){return{title:"LOGIN.EDS_NO_SUBJECT.TITLE",description:"LOGIN.EDS_NO_SUBJECT.DESCRIPTION",goBack:"LOGIN.EDS_NO_SUBJECT.BACK",showFAQ:!0}};function ke(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,Be))}}const Me=function(){return{title:"LOGIN.EDS_BLOCKED_LK.TITLE",description:"LOGIN.EDS_BLOCKED_LK.DESCRIPTION",goBack:"LOGIN.EDS_BLOCKED_LK.BACK"}};function Ge(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,Me))}}const Ue=function(){return{title:"LOGIN.EDS_UNKNOWN_CERTIFICATE.TITLE",description:"LOGIN.EDS_UNKNOWN_CERTIFICATE.DESCRIPTION",goBack:"LOGIN.EDS_UNKNOWN_CERTIFICATE.BACK",showFAQ:!0}};function Ve(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,Ue))}}const He=function(){return{description:"IDP.EDS_INVALID.TITLE",goBack:"IDP.EDS_INVALID.BACK",showFAQ:!0}};function qe(e,t){if(1&e&&o["\u0275\u0275elementContainer"](0,9),2&e){o["\u0275\u0275nextContext"]();const e=o["\u0275\u0275reference"](11);o["\u0275\u0275property"]("ngTemplateOutlet",e)("ngTemplateOutletContext",o["\u0275\u0275pureFunction0"](2,He))}}function Ye(e,t){if(1&e&&o["\u0275\u0275element"](0,"div"),2&e){const e=o["\u0275\u0275nextContext"]().icon;o["\u0275\u0275classMapInterpolate1"]("error-sign ",e," mb-24")}}function je(e,t){if(1&e&&(o["\u0275\u0275element"](0,"div",15),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]().title;o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,e),o["\u0275\u0275sanitizeHtml"])}}const Ke=function(e){return{link:e}};function ze(e,t){if(1&e&&(o["\u0275\u0275element"](0,"div",16),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind2"](1,1,e.description,o["\u0275\u0275pureFunction1"](4,Ke,e.link)),o["\u0275\u0275sanitizeHtml"])}}function Qe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",17),o["\u0275\u0275elementStart"](1,"button",18),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).goBack()})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().goBack;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,e)," ")}}function $e(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",17),o["\u0275\u0275elementStart"](1,"a",19),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](),t=e.link,n=e.linkText;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("href",t,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,n)," ")}}function We(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",20),o["\u0275\u0275elementStart"](1,"a",21),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).openFAQ()})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,1,"LOGIN.LOGIN_ISSUES")))}function Xe(e,t){if(1&e&&(o["\u0275\u0275template"](0,Ye,1,3,"div",10),o["\u0275\u0275template"](1,je,2,3,"div",11),o["\u0275\u0275template"](2,ze,2,6,"div",12),o["\u0275\u0275template"](3,Qe,4,3,"div",13),o["\u0275\u0275template"](4,$e,4,4,"div",13),o["\u0275\u0275template"](5,We,4,3,"div",14)),2&e){const e=t.title,n=t.description,r=t.goBack,i=t.linkText,a=t.showFAQ;o["\u0275\u0275property"]("ngIf",t.icon),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",n),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",a)}}function Je(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275template"](1,Oe,1,3,"ng-container",7),o["\u0275\u0275template"](2,De,1,3,"ng-container",7),o["\u0275\u0275template"](3,Re,1,3,"ng-container",7),o["\u0275\u0275template"](4,xe,1,3,"ng-container",7),o["\u0275\u0275template"](5,Le,1,3,"ng-container",7),o["\u0275\u0275template"](6,ke,1,3,"ng-container",7),o["\u0275\u0275template"](7,Ge,1,3,"ng-container",7),o["\u0275\u0275template"](8,Ve,1,3,"ng-container",7),o["\u0275\u0275template"](9,qe,1,3,"ng-container",7),o["\u0275\u0275template"](10,Xe,6,6,"ng-template",null,8,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngSwitch",e.errorType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsInvalidCertificate),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsCaUnavailable),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsNonlegal),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsCertificateUserNotMatch),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsUnavailable),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsNoSubjectFound),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsBlockedLk),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsUnknownCertificate),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.errorStates.EdsInvalid)}}let Ze=(()=>{class e{constructor(e,t){this.modalService=e,this.moduleRef=t,this.eventInit=new o.EventEmitter,this.eventGoBack=new o.EventEmitter,this.openFaq=new o.EventEmitter}get errorStates(){return d.b}initEdsAuth(){this.eventInit.emit()}goBack(){this.eventGoBack.emit()}edsErrorModal(){this.modalService.open(x.a,this.moduleRef,{type:"issues"})}openFAQ(){this.openFaq.emit()}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](U.a),o["\u0275\u0275directiveInject"](o.NgModuleRef))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-eds"]],inputs:{errorType:"errorType"},outputs:{eventInit:"eventInit",eventGoBack:"eventGoBack",openFaq:"openFaq"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["errorTemplate",""],[1,"text-center","mb-40"],["tabindex","1",1,"plain-button","plain-button_wide","mb-32",3,"click"],["type","button","tabindex","1",1,"plain-button-inline",3,"click"],[1,"text-center"],[1,"text-center",3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],["edsErrorTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"class",4,"ngIf"],["class","title-h3 mb-24",3,"innerHTML",4,"ngIf"],["class","text-plain",3,"innerHTML",4,"ngIf"],["class","button-wrapper mt-40",4,"ngIf"],["class","mt-40",4,"ngIf"],[1,"title-h3","mb-24",3,"innerHTML"],[1,"text-plain",3,"innerHTML"],[1,"button-wrapper","mt-40"],["tabindex","1",1,"plain-button","plain-button_wide",3,"click"],["tabindex","1",1,"plain-button","plain-button_wide",3,"href"],[1,"mt-40"],["tabindex","1",3,"click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275template"](0,Ae,15,12,"ng-container",0),o["\u0275\u0275template"](1,Je,12,10,"ng-template",null,1,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](2);o["\u0275\u0275property"]("ngIf",!t.errorType)("ngIfElse",e)}},directives:[r.t,r.x,r.y,r.A],pipes:[C.d],styles:[""]}),e})();var et=n("E6W3"),tt=n("RdyW");const nt=function(){return["\u043c\u0438\u043d\u0443\u0442\u0443","\u043c\u0438\u043d\u0443\u0442\u044b","\u043c\u0438\u043d\u0443\u0442"]},rt=function(e){return{time:e}};function it(e,t){if(1&e&&(o["\u0275\u0275element"](0,"span",6),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275pipe"](2,"pluralize")),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind2"](1,1,e.title,o["\u0275\u0275pureFunction1"](8,rt,e.timeout+"\xa0"+o["\u0275\u0275pipeBind2"](2,4,o["\u0275\u0275pureFunction0"](7,nt),e.timeout))),o["\u0275\u0275sanitizeHtml"])}}function ot(e,t){if(1&e&&(o["\u0275\u0275element"](0,"span",6),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,e.title),o["\u0275\u0275sanitizeHtml"])}}function at(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"h3",4),o["\u0275\u0275template"](1,it,3,10,"span",5),o["\u0275\u0275template"](2,ot,2,3,"span",5),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isTemporary),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isTemporary)}}const st=function(e){return{link:e}};function ct(e,t){if(1&e&&(o["\u0275\u0275element"](0,"span",6),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind2"](1,1,e.description,o["\u0275\u0275pureFunction1"](4,st,e.link)),o["\u0275\u0275sanitizeHtml"])}}function lt(e,t){if(1&e&&(o["\u0275\u0275element"](0,"span",6),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,e.description),o["\u0275\u0275sanitizeHtml"])}}function ut(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7),o["\u0275\u0275template"](1,ct,2,6,"span",5),o["\u0275\u0275template"](2,lt,2,3,"span",5),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.link),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.link)}}let dt=(()=>{class e{constructor(e){this.esiaConfig=e}get isTemporary(){return this.type===d.a.AccountTemporary||this.type===d.a.IpTemporary}ngOnInit(){switch(this.title=`LOGIN.${this.type}_LOCKED.TITLE`,this.description=`LOGIN.${this.type}_LOCKED.DESCRIPTION`,this.type){case d.a.AccountTemporary:case d.a.AccountPermanent:this.timeout=this.esiaConfig.params.accBlockTimeout?this.esiaConfig.params.accBlockTimeout:15;break;case d.a.IpTemporary:case d.a.IpPermanent:this.timeout=this.esiaConfig.params.ipBlockTimeout?this.esiaConfig.params.ipBlockTimeout:15}}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-blocking"]],inputs:{type:"type"},decls:4,vars:2,consts:[[1,"blocking"],[1,"blocking_icon","error-sign","exclamation"],["class","blocking_title title-h3 mt-24",4,"ngIf"],["class","blocking_description text-plain mt-24",4,"ngIf"],[1,"blocking_title","title-h3","mt-24"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"blocking_description","text-plain","mt-24"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"div",1),o["\u0275\u0275template"](2,at,3,2,"h3",2),o["\u0275\u0275template"](3,ut,3,2,"div",3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.title),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.description))},directives:[r.t],pipes:[C.d,tt.a],styles:[".blocking_icon[_ngcontent-%COMP%]{display:block;margin:0 auto}.blocking_description[_ngcontent-%COMP%], .blocking_title[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),e})();var pt=n("qZrB");const ht=["ipErrorModal"];function gt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"esia-back-button",7),o["\u0275\u0275listener"]("handler",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](2).goBack()})),o["\u0275\u0275elementEnd"]()}}function ft(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"esia-login-found",21),o["\u0275\u0275listener"]("close",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).changeLogin()})),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("login",e.login.value)("avatar",e.avatar)}}function Ct(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"LOGIN.ERRORS.LOGIN_REQUIRED")," "))}function It(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",23),o["\u0275\u0275elementStart"](2,"esia-input-password",24),o["\u0275\u0275listener"]("keyup",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).clearErrors(t)}))("change",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](4);return t.clearControlValue(t.password)})),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",25),o["\u0275\u0275elementStart"](7,"button",20),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](4);return t.openLink(t.esiaConfig.links.recovery)})),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("invalid",!e.password.pristine&&e.password.invalid)("labelText",o["\u0275\u0275pipeBind1"](3,8,"LOGIN.PASSWORD"))("name",o["\u0275\u0275pipeBind1"](4,10,"LOGIN.PASSWORD"))("errorText",o["\u0275\u0275pipeBind1"](5,12,e.passwordErrorText))("commitOnInput",!1)("tabIndex",1)("showRules",!0),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,14,"LOGIN.RECOVERY")," ")}}function _t(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",26),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"LOGIN.UNEXPECTED.TITLE")," "))}function mt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",33),o["\u0275\u0275elementStart"](1,"button",35),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](6).qrInit()})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](6);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.authActive),o["\u0275\u0275attribute"]("aria-label","\u0412\u043e\u0439\u0442\u0438 \u043f\u043e QR-\u043a\u043e\u0434\u0443"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,3,"LOGIN.LOGIN_BUTTON_QR")," ")}}function Et(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",36),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](6);return t.changeLoginState(t.loginStates.EdsLogin)})),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275attribute"]("aria-label","\u0412\u043e\u0439\u0442\u0438 \u043f\u043e \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0438"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"LOGIN.EDS_LINK")," "))}const vt=function(e){return{"form-container__actions-row_grid":e}};function St(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",29),o["\u0275\u0275elementStart"](1,"div",30),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",31),o["\u0275\u0275template"](5,mt,4,5,"div",32),o["\u0275\u0275elementStart"](6,"div",33),o["\u0275\u0275template"](7,Et,3,4,"button",34),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"LOGIN.ANOTHER_WAY")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](6,vt,e.qrCodeState&&e.edsState)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.qrCodeState),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.edsState)}}function Tt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",27),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).auth()})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,St,8,8,"div",28),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.authActive),o["\u0275\u0275attribute"]("aria-label","\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0432\u043e\u0439\u0442\u0438"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"LOGIN.LOGIN_BUTTON")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.qrCodeState||e.edsState)}}function yt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",27),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](5).ebsAuth()})),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](5);o["\u0275\u0275property"]("disabled",e.authActive),o["\u0275\u0275attribute"]("aria-label","\u0412\u043e\u0439\u0442\u0438 \u043f\u043e \u0431\u0438\u043e\u043c\u0435\u0442\u0440\u0438\u0438"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,3,"LOGIN.BY_BIO")," ")}}function At(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",39),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](5).switchActionState("password")})),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275attribute"]("aria-label","\u0412\u043e\u0439\u0442\u0438 \u043f\u043e \u043f\u0430\u0440\u043e\u043b\u044e"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"LOGIN.BY_PASSWORD")," "))}function Ft(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",33),o["\u0275\u0275elementStart"](1,"button",35),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](6).qrInit()})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](6);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.authActive),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"LOGIN.LOGIN_BUTTON_QR")," ")}}function Ot(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",33),o["\u0275\u0275elementStart"](1,"button",35),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](6);return t.changeLoginState(t.loginStates.EdsLogin)})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](6);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.authActive),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"LOGIN.EDS_LINK")," ")}}function bt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",41),o["\u0275\u0275elementStart"](1,"button",42),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](6);return t.changeLoginState(t.loginStates.EdsLogin)})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](6);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.authActive),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"LOGIN.EDS_LINK")," ")}}function Dt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",29),o["\u0275\u0275elementStart"](1,"div",30),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",31),o["\u0275\u0275elementStart"](5,"div",33),o["\u0275\u0275elementStart"](6,"button",35),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](5).switchActionState("password")})),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,Ft,4,4,"div",32),o["\u0275\u0275template"](10,Ot,4,4,"div",32),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,bt,4,4,"div",40),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](5);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,8,"LOGIN.ANOTHER_WAY")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](12,vt,e.qrCodeState||e.ebsState)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.authActive),o["\u0275\u0275attribute"]("aria-label","\u0412\u043e\u0439\u0442\u0438 \u043f\u043e \u043f\u0430\u0440\u043e\u043b\u044e"),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,10,"LOGIN.PASSWORD")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.qrCodeState),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.qrCodeState&&e.edsState),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.qrCodeState&&e.edsState)}}function Nt(e,t){if(1&e&&(o["\u0275\u0275template"](0,yt,3,5,"button",37),o["\u0275\u0275template"](1,At,3,4,"button",38),o["\u0275\u0275template"](2,Dt,12,14,"div",28)),2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("ngIf",!e.isMobile),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isMobile),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.qrCodeState||e.edsState)}}const Rt=function(e){return{"input-control_login-found":e}};function wt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"form",10),o["\u0275\u0275template"](2,ft,1,2,"esia-login-found",11),o["\u0275\u0275elementStart"](3,"div",12),o["\u0275\u0275elementStart"](4,"esia-input",13),o["\u0275\u0275listener"]("keyup",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).clearErrors(t)}))("change",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3);return t.clearControlValue(t.login)})),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,Ct,3,3,"div",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,It,10,16,"ng-container",0),o["\u0275\u0275template"](11,_t,3,3,"div",15),o["\u0275\u0275elementStart"](12,"div",16),o["\u0275\u0275template"](13,Tt,5,6,"ng-container",17),o["\u0275\u0275template"](14,Nt,3,3,"ng-template",null,18,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",19),o["\u0275\u0275elementStart"](17,"button",20),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).openFAQ()})),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275reference"](15),t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.form),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.loginFound),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](25,Rt,t.loginFound)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("invalid",!t.login.pristine&&t.login.invalid)("name",o["\u0275\u0275pipeBind1"](5,15,"LOGIN.LOGIN"))("labelText",o["\u0275\u0275pipeBind1"](6,17,"LOGIN.LOGIN"))("ariaLabel",t.login.value?o["\u0275\u0275pipeBind1"](8,21,"LOGIN.LOGIN"):o["\u0275\u0275pipeBind1"](7,19,"LOGIN.LOGIN_ARIA_LABEL"))("tabIndex",1)("autocomplete","on"),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",!t.login.pristine&&t.login.getError("required")),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.ebsState),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.form.getError("unexpected")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.ebsState)("ngIfElse",e),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,23,"LOGIN.LOGIN_ISSUES")," ")}}function xt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"esia-qr-code",43),o["\u0275\u0275listener"]("updateCodeEvent",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).qrGetData()}))("goBackEvent",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3);return t.changeState(t.loginStates.LoginRequired)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("qrData",e.qrCodeData)}}function Pt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"esia-captcha",44),o["\u0275\u0275listener"]("resolve",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).checkCaptcha(t)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("authType","new"))}function Lt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"esia-cph",49),o["\u0275\u0275listener"]("sendPhraseEvent",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).sendCph(t)}))("openFaqEvent",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).openFAQ()})),o["\u0275\u0275elementEnd"]()}2&e&&o["\u0275\u0275property"]("title","MFA.TITLE")}const Bt=function(e){return{contact:e}};function kt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"esia-otp",50),o["\u0275\u0275listener"]("otpSuccess",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).otpVerify(t)}))("otpRenew",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).otpRenew()})),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275pipe"](2,"cleanPhoneNumber"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("title","MFA.TITLE")("description",o["\u0275\u0275pipeBind2"](1,5,"OTP.DESCRIPTION."+(null==e.mfaDetails?null:e.mfaDetails.type),o["\u0275\u0275pureFunction1"](10,Bt,o["\u0275\u0275pipeBind1"](2,8,null==e.mfaDetails?null:e.mfaDetails.otp.contact))))("otpData",null==e.mfaDetails?null:e.mfaDetails.otp)("codeType",null!=e.mfaDetails&&e.mfaDetails.otp.otpCodeLength?e.verifyCodeType.Length:e.verifyCodeType.Free)("length",null==e.mfaDetails?null:e.mfaDetails.otp.otpCodeLength)}}function Mt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"esia-ttp",51),o["\u0275\u0275listener"]("goBackEvent",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).goBack()}))("checkCode",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).ttpVerify(t)})),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("state",e.loginState)("errorState",e.errorState)("codeType",null!=e.mfaDetails&&e.mfaDetails.ttp.ttpCodeLength?e.verifyCodeType.Length:e.verifyCodeType.Free)("length",null==e.mfaDetails?null:e.mfaDetails.ttp.ttpCodeLength)}}function Gt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"esia-ebs",52),o["\u0275\u0275listener"]("eventGoEds",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](4);return t.changeState(t.loginStates.EdsLogin)}))("eventGoBack",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](4);return t.changeState(t.loginStates.LoginRequired)}))("eventRepeat",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](4);return t.changeState(t.loginStates.LoginRequired)}))("eventChangeLoginState",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).changeLoginActionState(t)}))("eventToOtp",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](4).getOtpMfa()})),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275property"]("expiresAt",e.ebsExpiresAt)("redirectUrl",e.ebsRedirectUrl)("loginState",e.loginState)("errorState",e.errorState)}}function Ut(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Lt,1,1,"esia-cph",45),o["\u0275\u0275template"](2,kt,3,12,"esia-otp",46),o["\u0275\u0275template"](3,Mt,1,4,"esia-ttp",47),o["\u0275\u0275template"](4,Gt,1,4,"esia-ebs",48),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==e.mfaDetails?null:e.mfaDetails.type)===e.mfaTypes.Cph||e.cphErrorType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==e.mfaDetails?null:e.mfaDetails.type)===e.mfaTypes.Sms||e.otpErrorType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==e.mfaDetails?null:e.mfaDetails.type)===e.mfaTypes.Ttp||e.ttpErrorType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==e.mfaDetails?null:e.mfaDetails.type)===e.mfaTypes.Ebs||e.ebsViewState)}}function Vt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",53),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"div",54),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](6,"div",55),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275element"](8,"div",56),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementStart"](10,"div",16),o["\u0275\u0275elementStart"](11,"button",57),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).promoMfaAnswer(!0)})),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"button",20),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).promoMfaAnswer(!1)})),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275attribute"]("aria-label",o["\u0275\u0275pipeBind1"](2,6,"FILL_2FA.DESCRIPTION_ARIA_LABEL")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,8,"FILL_2FA.TITLE")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](7,10,"FILL_2FA.DESCRIPTION_1"),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](9,12,"FILL_2FA.DESCRIPTION_2"),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](13,14,"BUTTON.CONNECT")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,16,"BUTTON.LATER")," "))}function Ht(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"esia-fill-contact",58),o["\u0275\u0275listener"]("sendContact",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).sendContact(t)}))("skipFillContact",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).skipFillContact()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("state",e.loginState)("errorState",e.errorState)}}function qt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"esia-eds",59),o["\u0275\u0275listener"]("eventInit",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).initEdsAuth()}))("eventGoBack",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3);return t.changeLoginState(t.loginStates.LoginRequired)}))("openFaq",(function(){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).openFAQ()})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("errorType",e.errorState)}}function Yt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"esia-grant",60),o["\u0275\u0275listener"]("submitGrants",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"](3).submitGrantResult(t)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("grant",e.grantScopesDetails)("errors",e.errorState)}}function jt(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0,8),o["\u0275\u0275template"](1,wt,20,27,"ng-container",9),o["\u0275\u0275template"](2,xt,2,1,"ng-container",0),o["\u0275\u0275template"](3,Pt,2,1,"ng-container",9),o["\u0275\u0275template"](4,Ut,5,4,"ng-container",0),o["\u0275\u0275template"](5,Vt,17,18,"ng-container",0),o["\u0275\u0275template"](6,Ht,2,2,"ng-container",0),o["\u0275\u0275template"](7,qt,2,1,"ng-container",0),o["\u0275\u0275template"](8,Yt,2,2,"ng-container",0),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngSwitch",e.loginState),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.loginStates.LoginRequired),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.qrCodeViewStates),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",e.loginStates.UnconditionalCaptcha),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.enterMfaViewStates),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.loginState===e.loginStates.FillMfa),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.fillContactViewStates||e.fillContactErrorType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.loginState===e.loginStates.EdsLogin||e.edsErrorsStates),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.loginState===e.loginStates.GrantScopeAccess||e.errorState===e.errorStates.ScopesNotAllowed)}}function Kt(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275element"](1,"esia-blocking",61),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("type",e.blockingState)}}const zt=function(){return{link:"/"}};function Qt(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",62),o["\u0275\u0275element"](2,"div",63),o["\u0275\u0275element"](3,"div",64),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275element"](5,"div",65),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](4,2,"LOGIN.EDS_CA_UNAVAILABLE.TITLE"),o["\u0275\u0275sanitizeHtml"]),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind2"](6,4,"LOGIN.EDS_BLOCKED.DESCRIPTION",o["\u0275\u0275pureFunction0"](7,zt)),o["\u0275\u0275sanitizeHtml"]))}function $t(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",66),o["\u0275\u0275elementStart"](1,"button",20),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2);return t.openLink(t.esiaConfig.links.registration)})),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,"LOGIN.REGISTER")," "))}function Wt(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275pipe"](3,"async"),o["\u0275\u0275template"](4,gt,1,0,"esia-back-button",3),o["\u0275\u0275element"](5,"esia-header"),o["\u0275\u0275template"](6,jt,9,9,"ng-container",4),o["\u0275\u0275template"](7,Kt,2,1,"ng-container",0),o["\u0275\u0275template"](8,Qt,7,8,"ng-container",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,$t,4,3,"div",5),o["\u0275\u0275element"](10,"esia-banner",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275classProp"]("form-container_load",e.load||!o["\u0275\u0275pipeBind1"](3,8,e.loadTranslate$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.backButtonViewState),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!e.blockingViewStates),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.blockingViewStates),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.errorState===e.errorStates.LockedAccount),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.registrationActionViewState),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("groupId",e.bannerGroupId)}}const Xt=[{path:"",component:(()=>{class e extends c.a{constructor(e,t,n,r,i,o,a,s,c,l,u,p,h,g,f,C,I,_,m){var E;super(),this.activatedRoute=e,this.detectLogin=t,this.modalService=n,this.moduleRef=r,this.router=i,this.validationService=o,this.configService=a,this.authService=s,this.passwordService=c,this.changeDetector=l,this.reactionService=u,this.ifcService=p,this.cookieService=h,this.deviceService=g,this.selectOrganizationService=f,this.translate=C,this.authMethodsService=I,this.alertService=_,this.webviewDetectorService=m,this.esiaConfig=this.configService.params,this.endpoint="aas/oauth2/api",this.load=!1,this.loadTranslate$=new T.a(!1),this.logged=!1,this.routerLoginState=null===(E=this.activatedRoute.snapshot.queryParams)||void 0===E?void 0:E.loginState,this.routerLoginStateData=this.router.getCurrentNavigation().extras.state,this.loginState=d.d.LoginRequired,this.loginFound=!1,this.authActive=!1,this.isDesktop=this.deviceService.isDesktop(),this.isMobile=this.deviceService.isMobile(),this.initLoginForm()}get bannerGroupId(){return F.a.AUTH}get loginStates(){return d.d}get errorStates(){return d.b}get blockingStates(){return d.a}get mfaTypes(){return d.c}get blockingViewStates(){return Object.values(this.blockingStates).includes(this.blockingState)}get fillContactViewStates(){return this.loginState===this.loginStates.FillEmail||this.loginState===this.loginStates.FillPhone}get changePasswordViewStates(){return this.loginState===this.loginStates.ChangePassword||this.errorState===this.errorStates.BadNewPassword}get qrCodeViewStates(){return this.loginState===this.loginStates.QrCode}get enterMfaViewStates(){return this.loginState===this.loginStates.EnterMfa||this.otpErrorType||this.ttpErrorType||this.cphErrorType||this.ebsViewState}get backButtonViewState(){return!this.load&&(this.loginState===this.loginStates.EnterMfa||this.loginState===this.loginStates.QrCode||this.loginState===this.loginStates.PassBiometrics||this.ebsErrorType)}get registrationActionViewState(){return this.loginState===this.loginStates.LoginRequired||this.loginState===this.loginStates.EdsLogin}get verifyCodeType(){return u.b}get login(){return this.form.get("login")}get password(){return this.form.get("password")}get passwordErrorText(){return this.password.pristine?"":this.password.getError("emptyFields")?"IDP.ERRORS.EMPTY_FIELDS":this.password.getError("required")?"IDP.ERRORS.PASSWORD_REQUIRED":this.password.getError("wrong")?"IDP.ERRORS.WRONG_PASSWORD":void 0}get ebsViewState(){return this.ebsErrorType||Boolean(this.ebsExpiresAt)||this.loginState===d.d.AskSwitchEbsToOtp||this.loginState===d.d.PassBiometrics}get edsErrorsStates(){return[this.errorStates.EdsInvalid,this.errorStates.EdsUnavailable,this.errorStates.EdsCertificateUserNotMatch,this.errorStates.EdsUnknownCertificate,this.errorStates.EdsNoSubjectFound,this.errorStates.EdsInvalidCertificate,this.errorStates.EdsCaUnavailable,this.errorStates.EdsBlockedLk,this.errorStates.EdsNonlegal].includes(this.errorState)}get UserFilterError(){return[this.errorStates.UnverifiedAccount].indexOf(this.errorState)>-1}get errorViewStates(){return Object.values(this.errorStates).includes(this.errorState)}get ebsErrorType(){return[this.errorStates.EbsInvalid,this.errorStates.EbsOutdated,this.errorStates.EbsBioDataOutdated,this.errorStates.EbsExpired,this.errorStates.EbsBioExpired,this.errorStates.EbsCookiesNotFound,this.errorStates.EbsCameraDisabled].includes(this.errorState)}get otpErrorType(){return this.errorState===this.errorStates.WrongOtp}get ttpErrorType(){return this.errorState===this.errorStates.WrongTtp}get cphErrorType(){return this.errorState===this.errorStates.InvalidSph}get fillContactErrorType(){return[this.errorStates.OidNull,this.errorStates.MobileBlank,this.errorStates.StringNotMobile,this.errorStates.MobileBusy,this.errorStates.AddMobileError,this.errorStates.EmailBlank,this.errorStates.StringNotEmail,this.errorStates.EmailBusy,this.errorStates.AddEmailError].includes(this.errorState)}ngOnInit(){this.checkLoginFound(),this.initLoginState(),this.initLoginActionStates(),this.translate.get("LOGIN").pipe(Object(O.a)(this.unsubscribe)).subscribe(()=>{this.loadTranslate$.next(!0)})}initLoginState(){if("next-step"===this.activatedRoute.snapshot.queryParams.do&&(this.router.navigate([]).then(),this.load=!0,this.authService.nextStep$().pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>{this.load=!1,this.authProcessing(e)})),this.routerLoginState)if(this.router.navigate([]).then(),"authProcessing"!==this.routerLoginState)switch(this.routerLoginState.toUpperCase()){case this.loginStates.EdsLogin:this.changeLoginState(this.loginStates.EdsLogin);break;case this.loginStates.QrCode:this.qrCodeState=!0}else this.authProcessing(this.routerLoginStateData);else this.changeLoginState(this.loginStates.LoginRequired);this.activatedRoute.queryParams.pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>{this.logged=void 0!==(null==e?void 0:e.logged),(null==this?void 0:this.logged)&&this.auth()})}initLoginActionStates(){this.edsState=this.authMethodsService.edsMethod,this.qrCodeState=this.authMethodsService.qrCodeMethod,this.authMethodsService.ebsMethod&&(this.load=!0,this.authService.checkEbsAuthBio$().pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>{this.ebsState=e,this.load=!1,this.changeDetector.markForCheck()}))}initLoginForm(){this.form=new s.FormGroup({login:new s.FormControl("",[s.Validators.required]),password:new s.FormControl("",[s.Validators.required])})}checkLoginFound(){if(this.detectLogin.check()){const e=this.detectLogin.login;this.loginFound=!0,this.login.setValue(e),this.detectLogin.avatar$.pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>{this.avatar=e,this.changeDetector.detectChanges()})}}auth(){this.alertService.setAlert="\u0412\u0445\u043e\u0434",this.userLogin=this.logged?{login:null,idType:null}:this.validationService.formatLogin(this.login),this.logged||(!this.form.invalid||this.userLogin)&&this.password.value?(this.authActive=!0,this.authService.auth$(this.endpoint,{login:this.login.value,password:this.password.value}).pipe(Object(O.a)(this.unsubscribe),Object(b.a)(()=>{this.cookieService.delete("loginType")})).subscribe(e=>this.authProcessing(e))):(this.login.markAsDirty(),this.password.markAsDirty(),this.login.value||(this.alertService.setAlert="LOGIN.ERRORS.LOGIN_REQUIRED_ALERT",this.inputLogin.onFocus()),this.password.value||(this.password.setErrors({required:!0}),this.alertService.setAlert="LOGIN.ERRORS.PASSWORD_REQUIRED_ALERT",this.inputPassword.onFocus()),this.login.value||this.password.value||(this.login.setErrors({}),this.password.setErrors({emptyFields:!0})))}qrInit(){this.load=!0,this.qrGetData(),this.authService.qrAuthData$.pipe(Object(O.a)(this.unsubscribe),Object(D.a)(e=>null!==e)).subscribe(e=>{if(e.login){const e=new Date;this.cookieService.set("loginType","qrCode",e.getMonth()+6)}this.authProcessing(e),this.changeDetector.detectChanges()})}qrGetData(){this.authService.generateQrCode().pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>{this.load=!1,this.qrAuthStart(e)},()=>{this.changeState(this.loginStates.QrCode),this.qrCodeData="error"})}qrAuthStart(e){this.changeState(d.d.QrCode),this.load=!1,this.qrCodeData=`gosuslugi://${e.type||"auth"}/signed_token=${e.signed_token}${e.url?"&url="+e.url:""}`,this.authService.createEventSource(e.qr_id).pipe(Object(N.a)(1),Object(O.a)(this.unsubscribe)).subscribe(),this.errorState=void 0,this.changeDetector.detectChanges()}ebsAuth(){this.authService.getEbsAuth$(this.endpoint).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}otpVerify(e){this.authService.otpVerify$(""+this.endpoint,e).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}otpRenew(){this.authService.otpRenew$(""+this.endpoint).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}ttpVerify(e){this.authService.ttpVerify$(""+this.endpoint,e).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}sendContact(e){this.authService.sendContact$(""+this.endpoint,e).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}skipFillContact(){this.authService.skipFillContact$(""+this.endpoint).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}initEdsAuth(){this.ifcService.checkPlugin().then(()=>{this.authService.edsDigitalRequest$(""+this.endpoint).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>{this.ifcService.sign(e.digital_challenge).then(e=>{this.edsAuth(e)})})})}edsAuth(e){this.authService.edsAuth$(this.endpoint,e).pipe(Object(O.a)(this.unsubscribe),Object(b.a)(e=>{e.login!==this.loginStates.Done&&this.modalService.close()})).subscribe(e=>this.authProcessing(e))}checkCaptcha(e){this.authService.checkCaptcha$((e.endpoint?e.endpoint:this.endpoint)||this.endpoint,e.token).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}submitGrantResult(e){this.authService.grantRequest$(this.endpoint,e).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}getOtpMfa(){this.authService.getOtpMfa$(this.endpoint).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}sendCph(e){this.authService.checkCph$(this.endpoint,e).subscribe(e=>{this.authProcessing(e),this.changeDetector.detectChanges()})}promoMfaAnswer(e){this.authService.promoMfaAnswer$(this.endpoint,e.toString()).pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}authProcessing(e){var t;if(this.clearStates(),(null==e?void 0:e.login)===this.loginStates.FillMfa&&(null===(t=this.webviewDetectorService)||void 0===t?void 0:t.isWebview))return this.load=!0,void this.promoMfaAnswer(!1);switch(this.loginState=e.login,this.errorState=e.error,this.blockingState=e.blocking,this.changeDetector.markForCheck(),e.login){case this.loginStates.Done:this.UserFilterError?this.showModalUserFilterError("LOGIN.MODAL_ERROR.PERSON_FILTER_IS_NOT_PASSED."+e.filterErrorType.toUpperCase(),()=>this.openLink(e.redirectUrl)):e.extraRedirectUrl&&e.redirectUrl?(window.open(`${this.esiaConfig.links.lkUrl}${e.extraRedirectUrl}`,"_blank"),setTimeout(()=>{this.openLink(e.redirectUrl)})):e.extraRedirectUrl&&!e.redirectUrl?this.openLink(`${this.esiaConfig.links.lkUrl}${e.extraRedirectUrl}`):e.redirectUrl&&this.openLink(e.redirectUrl);break;case this.loginStates.PassBiometrics:(null==e?void 0:e.redirectUrl)?this.openLink(null==e?void 0:e.redirectUrl):this.loginState=d.d.PassBiometrics;break;case this.loginStates.GrantScopeAccess:this.alertService.setAlert="GRANT.TITLE",this.grantScopesDetails=e.grantScopesDetails;break;case this.loginStates.GrantPermissionAccess:this.alertService.setAlert="GRANT_PERMISSION_ACCESS.ALERT_TITLE",this.router.navigate(["grant-permission-access"],{state:{permissionList:e.permissionList},relativeTo:this.activatedRoute}).then();break;case this.loginStates.SolveAnomalyReaction:this.reactionService.checkResponse({anomaly_reaction:{anomaly_reaction:e.reactionDetails.type,guid:e.reactionDetails.guid}},{version:2,successCallback:e=>this.authProcessing(new y.a(e)),errorCallback:e=>this.authProcessing(new y.a(e))});break;case this.loginStates.ChangePassword:this.alertService.setAlert="PASSWORD.CHANGE_ALERT",this.router.navigate(["change-password"],{state:{passwordData:{ruleList:e.passwordPolicies,changeType:e.passwordChangeType}},relativeTo:this.activatedRoute});break;case this.loginStates.EnterMfa:this.initMfaAction(e);break;case this.loginStates.AskDigitalOffer:this.router.navigate(["ask-digital-offer"],{state:{digitalOfferOrganizationList:e.digitalOfferOrganizationList},relativeTo:this.activatedRoute});break;case this.loginStates.SelectOrganization:this.router.navigate(["select-organization"],{state:{selectOrganizationList:e.selectOrganizationList},relativeTo:this.activatedRoute})}switch(e.error){case this.errorStates.BadNewPassword:this.loginState=this.loginStates.ChangePassword,this.changeDetector.detectChanges(),this.changePasswordComponent.error="LOGIN.ERRORS.NEW_PASSWORD",this.alertService.setAlert="LOGIN.ERRORS.NEW_PASSWORD";break;case this.errorStates.StolenPassword:this.loginState=this.loginStates.ChangePassword,this.changePasswordComponent.stolenPasswordError="CHANGE_PASSWORD.STOLEN_PASSWORD",this.alertService.setAlert="CHANGE_PASSWORD.STOLEN_PASSWORD";break;case this.errorStates.WrongPassword:this.loginState=this.loginStates.LoginRequired,this.changeDetector.detectChanges(),this.password.setErrors({wrong:!0}),this.login.setErrors({invalid:!0}),this.alertService.setAlert="LOGIN.ERRORS.WRONG_PASSWORD",this.loginFound?this.inputPassword.onFocus():this.inputLogin.onFocus();break;case this.errorStates.CaptchaInvalid:this.loginState=this.loginStates.UnconditionalCaptcha,this.changeDetector.detectChanges(),this.captcha.setInvalid(),this.alertService.setAlert="CAPTCHA.ERROR";break;case this.errorStates.WrongOtp:this.otp.setInvalid(),this.alertService.setAlert="OTP.WRONG_CODE";break;case this.errorStates.WrongTtp:this.ttp.setError(this.errorStates.WrongTtp),this.alertService.setAlert="TTP.INVALID_LABEL";break;case this.errorStates.QrCodeEventSourceOutdated:this.changeState(this.loginStates.QrCode),this.alertService.setAlert="LOGIN.CODE_OUTDATED";break;case this.errorStates.InvalidSph:this.cph.setError(this.errorStates.InvalidSph),this.alertService.setAlert="LOGIN.CPH.ERROR"}this.selectOrganizationService.isSelectOrganizationError(e.error)&&(this.showModalError("SELECT_ORGANIZATION_DETAILS.ERROR."+e.error,()=>this.return()),this.alertService.setAlert="SELECT_ORGANIZATION_DETAILS.ERROR."+e.error),this.edsErrorsStates&&this.modalService.close(),this.authActive=!1,this.changeDetector.detectChanges()}return(){this.selectOrganizationService.return$().pipe(Object(O.a)(this.unsubscribe)).subscribe(e=>this.authProcessing(e))}showModalError(e,t){this.load=!0,this.modalService.open(R.a,this.moduleRef,{title:"LOGIN.MODAL_ERROR.TITLE",description:e,closable:!1,closeHandler:()=>t()})}showModalUserFilterError(e,t){this.modalService.open(P,this.moduleRef,{title:"LOGIN.MODAL_ERROR.TITLE",description:e,closable:!1,closeHandler:()=>t()})}clearErrors(e){"Space"!==e.key&&"Enter"!==e.key&&(this.login.value&&this.login.setErrors(null),this.password.setErrors(null))}clearControlValue(e){this.validationService.controlTrim(e)}changeLoginState(e){this.loginState=e,this.errorState=void 0}changeLogin(){this.loginFound=!1,this.ebsState=!1,this.login.setValue(""),this.password.setValue(""),this.login.markAsPristine(),this.password.markAsPristine()}openFAQ(){this.modalService.open(w.a,this.moduleRef)}edsErrorModal(){this.modalService.open(x.a,this.moduleRef,{type:"issues"})}switchActionState(e){"password"===e&&(this.ebsState=!1)}changeState(e){this.clearStates(),this.loginState=e}clearStates(){this.errorState=void 0,this.ebsExpiresAt=void 0,this.ebsRedirectUrl=void 0,this.mfaDetails=void 0}goBack(){switch(this.loginState){case this.loginStates.EnterMfa:case this.loginStates.QrCode:this.qrCodeData=void 0,this.changeState(this.loginStates.LoginRequired);break;default:this.changeState(this.loginStates.LoginRequired)}this.changeDetector.detectChanges()}initMfaAction(e){var t,n;switch(this.mfaDetails=e.mfaDetailsModel,null===(t=this.mfaDetails)||void 0===t?void 0:t.type){case this.mfaTypes.Cph:this.alertService.setAlert="MFA.ALERTS.CPH_TITLE";break;case this.mfaTypes.Sms:this.otp?(this.otp.restartTimer(null===(n=this.mfaDetails)||void 0===n?void 0:n.otp),this.errorState===this.errorStates.WrongOtp?(this.alertService.setAlert="OTP.WRONG_CODE",this.otp.setInvalid(),this.changeDetector.detectChanges()):this.alertService.setAlert=this.translate.instant("MFA.ALERTS.OTP_TITLE",{phone:this.mfaDetails.otp.phone})):this.alertService.setAlert=this.translate.instant("MFA.ALERTS.OTP_TITLE",{phone:this.mfaDetails.otp.phone});break;case this.mfaTypes.Ebs:e.mfaDetailsModel.ebs.expireTime?(this.ebsExpiresAt=e.mfaDetailsModel.ebs.expireTime,this.ebsRedirectUrl=e.mfaDetailsModel.ebs.redirectUrl):this.openLink(e.mfaDetailsModel.ebs.redirectUrl)}}changeLoginActionState(e){switch(e){case"eds":this.changeLoginState(this.loginStates.EdsLogin);break;case"qr":this.qrInit();break;case"password":this.changeLoginState(this.loginStates.LoginRequired),this.switchActionState("password")}}openLink(e){this.load=!0,this.changeDetector.detectChanges(),window.location.href=e||"/"}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](G.a),o["\u0275\u0275directiveInject"](U.a),o["\u0275\u0275directiveInject"](o.NgModuleRef),o["\u0275\u0275directiveInject"](i.b),o["\u0275\u0275directiveInject"](V.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](H.a),o["\u0275\u0275directiveInject"](q.a),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](Y.a),o["\u0275\u0275directiveInject"](X),o["\u0275\u0275directiveInject"](J.a),o["\u0275\u0275directiveInject"](Z.a),o["\u0275\u0275directiveInject"](ee.SelectOrganizationService),o["\u0275\u0275directiveInject"](C.e),o["\u0275\u0275directiveInject"](te.a),o["\u0275\u0275directiveInject"](ne.a),o["\u0275\u0275directiveInject"](re))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["esia-login"]],viewQuery:function(e,t){var n;1&e&&(o["\u0275\u0275viewQuery"](f.a,!0),o["\u0275\u0275viewQuery"](L.a,!0),o["\u0275\u0275viewQuery"](l.a,!0),o["\u0275\u0275viewQuery"](v,!0),o["\u0275\u0275viewQuery"](S.a,!0),o["\u0275\u0275viewQuery"](M,!0),o["\u0275\u0275viewQuery"](ht,!0),o["\u0275\u0275viewQuery"](A.a,!0)),2&e&&(o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.inputLogin=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.inputPassword=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.otp=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.ttp=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.captcha=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.cph=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.ipErrorModal=n.first),o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.changePasswordComponent=n.first))},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:1,consts:[[4,"ngIf"],[1,"container"],[1,"form-container"],[3,"handler",4,"ngIf"],[3,"ngSwitch",4,"ngIf"],["class","text-center mt-20 mt-md-40 mb-md-40",4,"ngIf"],[3,"groupId"],[3,"handler"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"formGroup"],[3,"login","avatar","close",4,"ngIf"],[1,"input-control","mb-20",3,"ngClass"],["id","login","formControlName","login",3,"invalid","name","labelText","ariaLabel","tabIndex","autocomplete","keyup","change"],["class","error-label",4,"ngIf"],["class","error-label mb-32",4,"ngIf"],[1,"mt-40"],[4,"ngIf","ngIfElse"],["ebsButton",""],[1,"mt-40","text-center"],["type","button","tabindex","1",1,"plain-button-inline",3,"click"],[3,"login","avatar","close"],[1,"error-label"],[1,"input-control","mb-8"],["id","password","formControlName","password",3,"invalid","labelText","name","errorText","commitOnInput","tabIndex","showRules","keyup","change"],[1,"flex-container","justify-between","mb-40"],[1,"error-label","mb-32"],["tabindex","1",1,"plain-button","plain-button_wide",3,"disabled","click"],["class","form-container__actions mt-40",4,"ngIf"],[1,"form-container__actions","mt-40"],[1,"form-container__actions-title","mb-16","text-helper"],[1,"form-container__actions-row",3,"ngClass"],["class","form-container__actions-col",4,"ngIf"],[1,"form-container__actions-col"],["type","button","class","plain-button plain-button_light","tabindex","1",3,"click",4,"ngIf"],["tabindex","1",1,"plain-button","plain-button_light",3,"disabled","click"],["type","button","tabindex","1",1,"plain-button","plain-button_light",3,"click"],["class","plain-button plain-button_wide","tabindex","1",3,"disabled","click",4,"ngIf"],["class","plain-button plain-button_wide plain-button_light","tabindex","1",3,"click",4,"ngIf"],["tabindex","1",1,"plain-button","plain-button_wide","plain-button_light",3,"click"],["class","mt-16",4,"ngIf"],[1,"mt-16"],["type","button","tabindex","1",1,"plain-button","plain-button_light","plain-button_wide",3,"disabled","click"],[3,"qrData","updateCodeEvent","goBackEvent"],[3,"authType","resolve"],[3,"title","sendPhraseEvent","openFaqEvent",4,"ngIf"],[3,"title","description","otpData","codeType","length","otpSuccess","otpRenew",4,"ngIf"],[3,"state","errorState","codeType","length","goBackEvent","checkCode",4,"ngIf"],[3,"expiresAt","redirectUrl","loginState","errorState","eventGoEds","eventGoBack","eventRepeat","eventChangeLoginState","eventToOtp",4,"ngIf"],[3,"title","sendPhraseEvent","openFaqEvent"],[3,"title","description","otpData","codeType","length","otpSuccess","otpRenew"],[3,"state","errorState","codeType","length","goBackEvent","checkCode"],[3,"expiresAt","redirectUrl","loginState","errorState","eventGoEds","eventGoBack","eventRepeat","eventChangeLoginState","eventToOtp"],[1,"text-center",3,"esiaElementFocus"],[1,"title-h3","mb-24"],[1,"text-plain","mb-16",3,"innerHTML"],[1,"text-plain","mb-24",3,"innerHTML"],["type","button","tabindex","1",1,"plain-button","plain-button_wide","mb-24",3,"click"],[3,"state","errorState","sendContact","skipFillContact"],[3,"errorType","eventInit","eventGoBack","openFaq"],[3,"grant","errors","submitGrants"],[3,"type"],[1,"text-center"],[1,"error-sign","exclamation","mb-24"],[1,"title-h3","mb-24",3,"innerHTML"],[1,"text-plain",3,"innerHTML"],[1,"text-center","mt-20","mt-md-40","mb-md-40"]],template:function(e,t){1&e&&(o["\u0275\u0275element"](0,"esia-disclaimers"),o["\u0275\u0275template"](1,Wt,11,10,"ng-container",0)),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.logged))},directives:[ie.a,r.t,oe.a,ae.a,g.a,r.x,r.y,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,r.q,f.a,s.NgControlStatus,s.FormControlName,se.a,L.a,ve,S.a,M,l.a,v,Se.a,Te.a,ye.a,Ze,et.a,dt],pipes:[r.b,C.d,pt.a],styles:[""],changeDetection:0}),e})()},{path:"grant-permission-access",loadChildren:()=>n.e(10).then(n.bind(null,"KEJ5")).then(e=>e.GrantPermissionAccessModule)},{path:"ask-digital-offer",loadChildren:()=>n.e(7).then(n.bind(null,"azB5")).then(e=>e.AskDigitalOfferModule)},{path:"change-password",loadChildren:()=>n.e(8).then(n.bind(null,"r6K/")).then(e=>e.ChangePasswordModule),data:{stateKey:"passwordData"},canActivate:[a]},{path:"select-organization",loadChildren:()=>Promise.resolve().then(n.bind(null,"1XOz")).then(e=>e.SelectOrganizationModule)}];let Jt=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.f.forChild(Xt)],i.f]}),e})();var Zt=n("tk/3"),en=n("FpXt"),tn=n("mEFa");let nn=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,C.c,tn.a,s.ReactiveFormsModule,en.a]]}),e})();var rn=n("ixO3"),on=n("lAC4");let an=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.c,C.c,tn.a]]}),e})(),sn=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[ee.SelectOrganizationService],imports:[[r.c,s.FormsModule,s.ReactiveFormsModule,C.c,Zt.c,en.a,Jt,rn.a,tn.a,nn,he,an,on.a]]}),e})()},J6Nv:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},JzKC:function(e,t,n){var r=n("Wogr"),i=n("aZ40");t.mul=function(e,t){var n=new r(e.length+t.length-1);n.fill(0);for(var o=0;o<e.length;o++)for(var a=0;a<t.length;a++)n[o+a]^=i.mul(e[o],t[a]);return n},t.mod=function(e,t){for(var n=new r(e);n.length-t.length>=0;){for(var o=n[0],a=0;a<t.length;a++)n[a]^=i.mul(t[a],o);for(var s=0;s<n.length&&0===n[s];)s++;n=n.slice(s)}return n},t.generateECPolynomial=function(e){for(var n=new r([1]),o=0;o<e;o++)n=t.mul(n,[1,i.exp(o)]);return n}},Lzq4:function(e,t,n){var r=n("u/Db"),i=n("e/Dd");function o(e){this.mode=r.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var n=i.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}e.put(n=192*(n>>>8&255)+(255&n),13)}},e.exports=o},NPxG:function(e,t,n){var r=n("ekOh"),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return i[4*(e-1)+0];case r.M:return i[4*(e-1)+1];case r.Q:return i[4*(e-1)+2];case r.H:return i[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}}},PhFw:function(e,t){!function(e){e.IFCCrypto=function(e){this.getAlias=function(){return IFCConst.emptyString(e.alias)},this.getName=function(){return IFCConst.emptyString(e.name)},this.isPKCS11=function(){return e.type===IFCConst.IFC_CRYPTO_PKCS11},this.isCAPI=function(){return e.type===IFCConst.IFC_CRYPTO_CAPI},this.isCAPI_LINUX=function(){return e.type===IFCConst.IFC_CRYPTO_CAPI_LINUX},this.getPath=function(){return IFCConst.emptyString(e.path)},this.getNumber=function(){return IFCConst.emptyString(e.num)},this.getDescription=function(){return IFCConst.emptyString(e.description)},this.getSerialNumber=function(){return IFCConst.emptyString(e.serial_number)},this.getModel=function(){return IFCConst.emptyString(e.model)},this.getSkipPKCS11List=function(){return IFCConst.emptyString(e.skip_pkcs11_list)},this.getAlg=function(){return IFCConst.emptyString(e.alg)},this.getCryptoId=function(){return e.type===IFCConst.IFC_CRYPTO_PKCS11?e.crypto_id=e.alias+"/"+e.num:e.type!==IFCConst.IFC_CRYPTO_CAPI&&e.type!==IFCConst.IFC_CRYPTO_CAPI_LINUX||(e.crypto_id=e.alias),IFCConst.emptyString(e.crypto_id)},this.getExtendedKeyUsage=function(){for(var e=this.getAlias(),t=[{alias:"JaCarta",oid:"1.2.643.3.205.110.1"},{alias:"ruTokenECP",oid:"1.2.643.3.205.110.7"},{alias:"VIPNet",oid:"1.2.643.3.205.110.6"},{alias:"SignalCom",oid:"1.2.643.3.205.110.8"},{alias:"LISSI-CSP",oid:"1.2.643.3.205.110.9"},{alias:"CryptoPro",oid:"1.2.643.3.205.110.2"}],n=0;n<t.length;n++)if(e.indexOf(t[n].alias)>=0)return t[n].oid;return""},this.getCertificatePolicies=function(){for(var e=this.getAlias(),t=[{alias:"JaCarta",oid:IFCConst.OID_KC1+","+IFCConst.OID_KC2},{alias:"ruTokenECP",oid:IFCConst.OID_KC1+","+IFCConst.OID_KC2},{alias:"CryptoPro",oid:IFCConst.OID_KC1},{alias:"VIPNet",oid:IFCConst.OID_KC1},{alias:"SignalCom",oid:IFCConst.OID_KC1},{alias:"LISSI-CSP",oid:IFCConst.OID_KC1}],n=0;n<t.length;n++)if(e.indexOf(t[n].alias)>=0)return t[n].oid;return IFCConst.OID_KC1}},e.IFCCertificate=function(e,t){this.getSerialNumber=function(){return IFCConst.emptyString(e.cert_sn)},this.getSubjectDN=function(){return new IFCDN(IFCConst.emptyString(e.cert_subject),IFCConst.DN_SEPARATOR_PLUGIN)},this.getIssuerDN=function(){return new IFCDN(IFCConst.emptyString(e.cert_issuer),IFCConst.DN_SEPARATOR_PLUGIN)},this.getValidFrom=function(){return IFCConst.emptyString(this.checkDate(e.cert_valid_from))},this.getValidTo=function(){return IFCConst.emptyString(this.checkDate(e.cert_valid_to))},this.getSignAndDigestAlgUri=function(){var e=this.getSignAlgOid();return e===IFCConst.OID_GOSTR3410_2012_256||e===IFCConst.OID_GOSTR3410_2012_512||e===IFCConst.OID_GOSTR3410_2001?{signMethod:"http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411",digestMethod:"http://www.w3.org/2001/04/xmldsig-more#gostr3411"}:{signMethod:"",digestMethod:""}},this.getSignAlg=function(){var e=this.getSignAlgOid();return e===IFCConst.OID_GOSTR3410_2001?"gost_2001":e===IFCConst.OID_GOSTR3410_2012_256?"gost_2012_256":e===IFCConst.OID_GOSTR3410_2012_512?"gost_2012_512":""},this.getSignAlgOid=function(){return IFCConst.emptyString(e.cert_sign_alg)},this.isValid=function(){return new Date<new Date(this.getValidTo())},this.getId=function(){return IFCConst.emptyString(e.id)},this.getContainerId=function(){return t.getCryptoId()+"/"+IFCConst.emptyString(e.id)},this.getCryptoId=function(){return t.getCryptoId()},this.isPKCS11=function(){return t.isPKCS11()},this.isCAPI=function(){return t.isCAPI()},this.isCAPI_LINUX=function(){return t.isCAPI_LINUX()},this.checkDate=function(e){return isNaN(new Date(e).getTime())?e.replace(/([a-z]*\s\d{1,2}\s)((?:\d{2}:?){3})\s(\d{4}\s)(.*)/i,"$1$3$2$4"):e}},e.IFCCertificateInfo=function(e){this.getSerialNumber=function(){return IFCConst.emptyString(e.cert_sn)},this.getSubjectDN=function(){return new IFCDN(IFCConst.emptyString(e.cert_subject),IFCConst.DN_SEPARATOR_PLUGIN)},this.getIssuerDN=function(){return new IFCDN(IFCConst.emptyString(e.cert_issuer),IFCConst.DN_SEPARATOR_PLUGIN)},this.getValidFrom=function(){return IFCConst.emptyString(this.checkDate(e.cert_valid_from))},this.getValidTo=function(){return IFCConst.emptyString(this.checkDate(e.cert_valid_to))},this.getSignAndDigestAlgUri=function(){var e=this.getSignAlgOid();return e===IFCConst.OID_GOSTR3410_2012_256||e===IFCConst.OID_GOSTR3410_2012_512||e===IFCConst.OID_GOSTR3410_2001?{signMethod:"http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411",digestMethod:"http://www.w3.org/2001/04/xmldsig-more#gostr3411"}:{signMethod:"",digestMethod:""}},this.getSignAlg=function(){var e=this.getSignAlgOid();return e===IFCConst.OID_GOSTR3410_2001?"gost_2001":e===IFCConst.OID_GOSTR3410_2012_256?"gost_2012_256":e===IFCConst.OID_GOSTR3410_2012_512?"gost_2012_512":""},this.getSignAlgOid=function(){return IFCConst.emptyString(e.cert_sign_alg)},this.isValid=function(){return new Date<new Date(this.getValidTo())},this.getBase64=function(){return IFCConst.emptyString(e.base64)},this.getPem=function(){return IFCConst.emptyString(e.pem)},this.getVersion=function(){return IFCConst.emptyString(e.version)},this.getExtensionsString=function(){return IFCConst.emptyString(e.extensions)},this.getPrintableText=function(){return this.getPrintable("\n","\t",", ")},this.getPrintableHTML=function(){return this.getPrintable("<br />","&nbsp;&nbsp;",", ")},this.getPrintable=function(e,t,n){e||(e="\n"),t||(t="\t"),n||(n=", ");var r="\u041d\u043e\u043c\u0435\u0440 \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430: "+this.getSerialNumber()+e+"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430:"+e+t+t+"\u0441 "+this.getValidFrom()+e+t+t+"\u043f\u043e "+this.getValidTo()+e+e+t+"\u0421\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435 \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430"+e+e+"\u0424\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e: "+this.getSubjectDN().getCommonName()+e+"\u0421\u0442\u0440\u0430\u0445\u043e\u0432\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043b\u0438\u0446\u0435\u0432\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430: "+this.getSubjectDN().getSNILS()+e+e+t+"\u0421\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e\u0431 \u0438\u0437\u0434\u0430\u0442\u0435\u043b\u0435 \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430"+e+e+"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435  \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044f\u044e\u0449\u0435\u0433\u043e  \u0446\u0435\u043d\u0442\u0440\u0430: "+this.getIssuerDN().getCommonName()+e+"\u041c\u0435\u0441\u0442\u043e  \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f  \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044f\u044e\u0449\u0435\u0433\u043e \u0446\u0435\u043d\u0442\u0440\u0430: "+this.getIssuerDN().getCountryName()+n+this.getIssuerDN().getStateOrProvinceName()+n+this.getIssuerDN().getLocalityName()+n+this.getIssuerDN().getStreetAddress()+e;return this.getIssuerDN().getSurname()?r+="\u0414\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u043e\u0435 \u043b\u0438\u0446\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044f\u044e\u0449\u0435\u0433\u043e \u0446\u0435\u043d\u0442\u0440\u0430: "+this.getIssuerDN().getSurname():this.getIssuerDN().getGivenName()?r+=n+this.getIssuerDN().getGivenName()+e:r+=e,r+(t+"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430")+e+e+this.getExtensionsString().replace(/(\r\n|\n|\r)/gm,e).replace(/^\s+/gm,t)},this.checkDate=function(e){return isNaN(new Date(e).getTime())?e.replace(/([a-z]*\s\d{1,2}\s)((?:\d{2}:?){3})\s(\d{4}\s)(.*)/i,"$1$3$2$4"):e}},e.IFCDN=function(e,t){var n=function(e){switch(e.toLowerCase()){case"commonname":case"cn":return IFCConst.OID_COMMON_NAME;case"surname":return IFCConst.OID_SURNAME;case"givenname":return IFCConst.OID_GIVEN_NAME;case"countryname":case"c":return IFCConst.OID_COUNTRY_NAME;case"stateorprovincename":return IFCConst.OID_STATE_OR_PROVINCE_NAME;case"localityname":case"l":return IFCConst.OID_LOCALITY_NAME;case"streetaddress":case"street":return IFCConst.OID_STREET_ADDRESS;case"organizationname":case"o":return IFCConst.OID_ORGANIZATION_NAME;case"organizationunitname":case"ou":return IFCConst.OID_ORGANIZATION_UNIT_NAME;case"title":return IFCConst.OID_TITLE;case"emailaddress":case"email":return IFCConst.OID_EMAIL_ADDRESS;case"ogrn":return IFCConst.OID_OGRN;case"snils":return IFCConst.OID_SNILS;case"inn":return IFCConst.OID_INN;default:return e}},r=e.split("\\,").join("[escaped_comma]").split(t);this.dnData=new Object;for(var i=0;i<r.length;i++){var o=r[i].split("=");null==o[1]&&(o[1]="");var a=o[0].trim(),s=o[1].trim().split("[escaped_comma]").join(",");this.dnData[n(a)]=s}this.getCommonName=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_COMMON_NAME])},this.getSurname=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_SURNAME])},this.getGivenName=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_GIVEN_NAME])},this.getCountryName=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_COUNTRY_NAME])},this.getStateOrProvinceName=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_STATE_OR_PROVINCE_NAME])},this.getLocalityName=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_LOCALITY_NAME])},this.getStreetAddress=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_STREET_ADDRESS])},this.getOrganizationName=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_ORGANIZATION_NAME])},this.getOrganizationUnitName=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_ORGANIZATION_UNIT_NAME])},this.getTitle=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_TITLE])},this.getEmailAddress=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_EMAIL_ADDRESS])},this.getOGRN=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_OGRN])},this.getSNILS=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_SNILS])},this.getINN=function(){return IFCConst.emptyString(this.dnData[IFCConst.OID_INN])},this.getValueByOid=function(e){return IFCConst.emptyString(this.dnData[n(e)])},this.getSubjectArray=function(){var e=new Object,t=0;for(var n in this.dnData)e["oid_"+ ++t]=n,e["oid_type_"+t]=IFCConst.getDNDataType(n),e["value_"+t]=this.dnData[n];return e.oids_count=t,e},this.getOneLine=function(){var e="";return this.getCountryName()&&(e+="c="+this.getCountryName()+", "),this.getStateOrProvinceName()&&(e+="stateorprovincename="+this.getStateOrProvinceName()+", "),this.getLocalityName()&&(e+="l="+this.getLocalityName()+", "),this.getCommonName()&&(e+="cn="+this.getCommonName()+", "),this.getSurname()&&(e+="surname="+this.getSurname()+", "),this.getGivenName()&&(e+="givenname="+this.getGivenName()+", "),this.getStreetAddress()&&(e+="street="+this.getStreetAddress()+", "),this.getOrganizationName()&&(e+="o="+this.getOrganizationName()+", "),this.getOrganizationUnitName()&&(e+="ou="+this.getOrganizationUnitName()+", "),this.getTitle()&&(e+="title="+this.getTitle()+", "),this.getEmailAddress()&&(e+="email="+this.getEmailAddress()+", "),this.getOGRN()&&(e+="ogrn="+this.getOGRN()+", "),this.getSNILS()&&(e+="snils="+this.getSNILS()+", "),this.getINN()&&(e+="inn="+this.getINN()+", "),e.substring(0,e.length-2)}},e.IFCCertificateRequest=function(e,t){this.getContainerId=function(){return e},this.getCsr=function(){return t}},e.IFCEncrypted=function(e,t,n){this.getData=function(){return e},this.getKey=function(){return t},this.getCertificate=function(){return n}},e.IFCHash=function(e){this.getBase64=function(){return e},this.getHexBinary=function(){return n(t(e))},this.getPlainData=function(){return t(e)};var t=function(e){var t,n={},r=[],i="",o=String.fromCharCode,a=[[65,91],[97,123],[48,58],[43,44],[47,48]];for(z in a)for(t=a[z][0];t<a[z][1];t++)r.push(o(t));for(t=0;t<64;t++)n[r[t]]=t;for(t=0;t<e.length;t+=72){var s,c=0,l=0,u=e.substring(t,t+72);for(s=0;s<u.length;s++)for(c=(c<<6)+n[u.charAt(s)],l+=6;l>=8;)i+=o((c>>>(l-=8))%256)}return i},n=function(e){for(var t,n=[],r="",i=0,o=e.length;i<o;++i)t=e.charCodeAt(i),n.push((t>>4).toString(16),(15&t).toString(16));for(String.prototype.concat.apply("",n),i=0;i<n.length;i++)r+=n[i];return r}},e.IFCConst={IFC_DATATYPE_DATA:1,IFC_DATATYPE_DATA_BASE64:2,IFC_DATATYPE_HASH:3,IFC_DATATYPE_HASH_BASE64:4,IFC_DATATYPE_FILENAME:5,IFC_CRYPTO_PKCS11:"pkcs11",IFC_CRYPTO_CAPI:"capi",IFC_CRYPTO_CAPI_LINUX:"capi_linux",OID_COMMON_NAME:"2.5.4.3",OID_SURNAME:"2.5.4.4",OID_GIVEN_NAME:"2.5.4.42",OID_COUNTRY_NAME:"2.5.4.6",OID_STATE_OR_PROVINCE_NAME:"2.5.4.8",OID_LOCALITY_NAME:"2.5.4.7",OID_STREET_ADDRESS:"2.5.4.9",OID_ORGANIZATION_NAME:"2.5.4.10",OID_ORGANIZATION_UNIT_NAME:"2.5.4.11",OID_TITLE:"2.5.4.12",OID_EMAIL_ADDRESS:"1.2.840.113549.1.9.1",OID_OGRN:"1.2.643.100.1",OID_SNILS:"1.2.643.100.3",OID_INN:"1.2.643.3.131.1.1",OID_KC1:"1.2.643.100.113.1",OID_KC2:"1.2.643.100.113.2",OID_KC3:"1.2.643.100.113.3",OID_GOSTR3410_2001:"1.2.643.2.2.19",OID_GOSTR3410_2012_256:"1.2.643.7.1.1.1.1",OID_GOSTR3410_2012_512:"1.2.643.7.1.1.1.2",DN_SEPARATOR_PLUGIN:"\n",DN_SEPARATOR_INPUT:",",IFC_CERT_LOAD_FROM_CONTAINER:1,IFC_CERT_LOAD_FROM_FILE:2,IFC_CERT_LOAD_FROM_STRING:3,IFC_SIGNTYPE_SIMPLE:1,IFC_SIGNTYPE_SIMPLE_REVERSE:2,IFC_SIGNTYPE_CMS_ATTACHED:3,IFC_SIGNTYPE_CMS_DETACHED:4,IFC_SIGNTYPE_CADES_BES_ATTACHED:5,IFC_SIGNTYPE_CADES_BES_DETACHED:6,IFC_HARDWARE_HASH:1,IFC_SOFTWARE_HASH:2,IFC_BASE64:1,IFC_RAW:0,IFC_SHOW_CSP_UI:1,IFC_HIDE_CSP_UI:0,IFC_X509_INFO_CERT_BASE64ENCODED:1,IFC_X509_INFO_CERT_DER:2,IFC_X509_INFO_CERT_VERSION:3,IFC_X509_INFO_CERT_SERIALNUMBER:4,IFC_X509_INFO_CERT_SUBJECT:5,IFC_X509_INFO_CERT_ISSUER:6,IFC_X509_INFO_CERT_VALIDFROM:7,IFC_X509_INFO_CERT_VALIDTO:8,IFC_X509_INFO_CERT_X509EXTENSIONS:9,IFC_X509_INFO_CERT_PEM:10,IFC_X509_INFO_CERT_ALG:11,IFC_CERT_UNKNOWN:0,IFC_CERT_DER:1,IFC_CERT_BASE64:2,IFC_CERT_PEM:3,IFC_REQ_DER:0,IFC_REQ_PEM:1,IFC_REQ_BASE64ENCODED:2,P11_PIN_TYPE_USER:0,P11_PIN_TYPE_ADMIN:1,IFC_PRINTABLE_STRING:19,IFC_IA5STRING:22,IFC_NUMERICSTRING:18,IFC_UTF8STRING:12,IFC_OCTET_STRING:4,IFC_BMPSTRING:30,APDU_FORMAT_RAW:0,APDU_FORMAT_TEXT:1,SHOW_SAFETOUCH:0,getDNDataType:function(e){var t;switch(e){case this.OID_COUNTRY_NAME:t=this.IFC_PRINTABLE_STRING;break;case this.OID_SNILS:case this.OID_OGRN:case this.OID_INN:t=this.IFC_NUMERICSTRING;break;case this.OID_EMAIL_ADDRESS:t=this.IFC_IA5STRING;break;default:t=IFCConst.IFC_UTF8STRING}return t},emptyString:function(e){return null==e?"":e}},e.IFCError={IFC_GENERAL_ERROR:-1,IFC_OK:0,IFC_ERROR_UNKNOWN:1,IFC_ERROR_CONFIG:2,IFC_ERROR_RECORD_MAX:3,IFC_ERROR_CONFIG_EMPTY:4,IFC_BAD_PARAMS:5,IFC_ERROR_MALLOC:6,IFC_ALIAS_NOT_FOUND:7,IFC_ERROR_STORE:8,IFC_CERT_NOT_FOUND:9,IFC_CONTAINER_NOT_FOUND:10,IFC_UNSUPPORTED_FORMAT:11,IFC_KEY_NOT_FOUND:12,IFC_BAD_IN_TYPE:13,IFC_BAD_SIGN_TYPE:14,IFC_BAD_HASH_CONTEXT:15,IFC_BAD_TYPE_PIN:16,IFC_NOT_SUPPORTED:17,IFC_SLOT_NOT_INIT:18,IFC_ERROR_VERIFY:19,IFC_ERROR_BASE64:20,IFC_SC_ERROR:21,IFC_ENGINE_ERROR:22,IFC_P11_ERROR:23,IFC_P11_NO_TOKENS_FOUND:25,IFC_PARSE_XML_ERROR:26,IFC_XPATH_ERROR:27,IFC_CANON_XML_ERROR:28,IFC_P11_LOGIN_ERROR:160,IFC_UNICODE_ERROR:161,IFC_ENCODINGS_ERROR:162,IFC_INIT_ERROR:163,IFC_CRYPTO_NOT_FOUND:164,IFC_PLUGIN_UNDEFINED_ERROR:256,IFC_P11_INVALID_PIN_ERROR:257,getErrorDescription:function(e){switch(e){case IFCError.IFC_GENERAL_ERROR:return"\u041e\u0431\u0449\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430";case IFCError.IFC_OK:return"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e";case IFCError.IFC_ERROR_UNKNOWN:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430";case IFCError.IFC_ERROR_CONFIG:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438";case IFCError.IFC_ERROR_RECORD_MAX:return"\u0414\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438";case IFCError.IFC_ERROR_CONFIG_EMPTY:return"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043e\u043f\u0435\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430";case IFCError.IFC_BAD_PARAMS:return"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0437\u0430\u0434\u0430\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u043e";case IFCError.IFC_ERROR_MALLOC:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u043c\u044f\u0442\u0438";case IFCError.IFC_ALIAS_NOT_FOUND:return"\u0423\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u043a\u0440\u0438\u043f\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d";case IFCError.IFC_ERROR_STORE:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435\u043c";case IFCError.IFC_CERT_NOT_FOUND:return"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d";case IFCError.IFC_CONTAINER_NOT_FOUND:return"\u041a\u043b\u044e\u0447\u0435\u0432\u043e\u0439 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d";case IFCError.IFC_UNSUPPORTED_FORMAT:return"\u0424\u043e\u0440\u043c\u0430\u0442 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f";case IFCError.IFC_KEY_NOT_FOUND:return"\u041a\u043b\u044e\u0447 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d";case IFCError.IFC_BAD_IN_TYPE:return"\u0422\u0438\u043f \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0437\u0430\u0434\u0430\u043d \u043d\u0435\u0432\u0435\u0440\u043d\u043e";case IFCError.IFC_BAD_SIGN_TYPE:return"\u0422\u0438\u043f \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0438 \u0437\u0430\u0434\u0430\u043d \u043d\u0435\u0432\u0435\u0440\u043d\u043e";case IFCError.IFC_BAD_HASH_CONTEXT:return"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0445\u0435\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d";case IFCError.IFC_BAD_TYPE_PIN:return"\u0422\u0438\u043f \u043f\u0438\u043d-\u043a\u043e\u0434\u0430 \u0437\u0430\u0434\u0430\u043d \u043d\u0435\u0432\u0435\u0440\u043d\u043e";case IFCError.IFC_NOT_SUPPORTED:return"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f";case IFCError.IFC_SLOT_NOT_INIT:return"\u0421\u043b\u043e\u0442 \u043d\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d";case IFCError.IFC_ERROR_VERIFY:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0438";case IFCError.IFC_ERROR_BASE64:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0438 BASE64";case IFCError.IFC_SC_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u044b \u0441\u043c\u0430\u0440\u0442-\u043a\u0430\u0440\u0442";case IFCError.IFC_ENGINE_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430";case IFCError.IFC_P11_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u043e\u0439 PKCS#11";case IFCError.IFC_P11_NO_TOKENS_FOUND:return"\u0421\u043c\u0430\u0440\u0442-\u043a\u0430\u0440\u0442\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430";case IFCError.IFC_PARSE_XML_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 XML";case IFCError.IFC_XPATH_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f XPath";case IFCError.IFC_CANON_XML_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u0430\u043d\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0438 XML";case IFCError.IFC_P11_LOGIN_ERROR:return"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0438\u043d-\u043a\u043e\u0434";case IFCError.IFC_UNICODE_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 UNICODE";case IFCError.IFC_ENCODINGS_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0438";case IFCError.IFC_INIT_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043b\u0430\u0433\u0438\u043d\u0430";case IFCError.IFC_CRYPTO_NOT_FOUND:return"\u0421\u041a\u0417\u0418 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e";case IFCError.IFC_PLUGIN_UNDEFINED_ERROR:return"\u041e\u0448\u0438\u0431\u043a\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043f\u043b\u0430\u0433\u0438\u043d\u0430";case IFCError.IFC_P11_INVALID_PIN_ERROR:return"\u041f\u0438\u043d-\u043a\u043e\u0434 \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c";default:return"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"}}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}(window)},QAZZ:function(e,t,n){var r=n("Rb7d");function i(e,t){var n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function o(e,t,n){var r=e+t;return void 0!==n&&(r+=" "+n),r}t.render=function(e,t,n){var a=r.getOptions(t),s=e.modules.size,c=e.modules.data,l=s+2*a.margin,u=a.color.light.a?"<path "+i(a.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+i(a.color.dark,"stroke")+' d="'+function(e,t,n){for(var r="",i=0,a=!1,s=0,c=0;c<e.length;c++){var l=Math.floor(c%t),u=Math.floor(c/t);l||a||(a=!0),e[c]?(s++,c>0&&l>0&&e[c-1]||(r+=a?o("M",l+n,.5+u+n):o("m",i,0),i=0,a=!1),l+1<t&&e[c+1]||(r+=o("h",s),s=0)):i++}return r}(c,s,a.margin)+'"/>',p='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+'viewBox="0 0 '+l+" "+l+'" shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"==typeof n&&n(null,p),p}},QUaw:function(e,t,n){var r=n("Rb7d");t.render=function(e,t,n){var i=n,o=t;void 0!==i||t&&t.getContext||(i=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),i=r.getOptions(i);var a=r.getImageWidth(e.modules.size,i),s=o.getContext("2d"),c=s.createImageData(a,a);return r.qrToImageData(c.data,e,i),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,o,a),s.putImageData(c,0,0),o},t.renderToDataURL=function(e,n,r){var i=r;return void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={}),t.render(e,n,i).toDataURL(i.type||"image/png",(i.rendererOpts||{}).quality)}},Rb7d:function(e,t){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");var n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=e.width&&e.width>=21?e.width:void 0;return{width:t,scale:t?4:e.scale||4,margin:null==e.margin||e.margin<0?4:e.margin,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){var r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){for(var i=n.modules.size,o=n.modules.data,a=t.getScale(i,r),s=Math.floor((i+2*r.margin)*a),c=r.margin*a,l=[r.color.light,r.color.dark],u=0;u<s;u++)for(var d=0;d<s;d++){var p=4*(u*s+d),h=r.color.light;u>=c&&d>=c&&u<s-c&&d<s-c&&(h=l[o[Math.floor((u-c)/a)*i+Math.floor((d-c)/a)]?1:0]),e[p++]=h.r,e[p++]=h.g,e[p++]=h.b,e[p]=h.a}}},V35J:function(e,t,n){var r=n("Wogr");function i(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new r(e*e),this.data.fill(0),this.reservedBit=new r(e*e),this.reservedBit.fill(0)}i.prototype.set=function(e,t,n,r){var i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)},i.prototype.get=function(e,t){return this.data[e*this.size+t]},i.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},i.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=i},Wogr:function(e,t,n){"use strict";var r=n("49sm"),i=(o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}())?2147483647:1073741823;function o(e,t,n){return o.TYPED_ARRAY_SUPPORT||this instanceof o?"number"==typeof e?c(this,e):function(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");var i;return i=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?i.__proto__=o.prototype:i=l(e,i),i}(e,t,n,r):"string"==typeof t?function(e,t){var n=0|d(t),r=s(e,n),i=r.write(t);return i!==n&&(r=r.slice(0,i)),r}(e,t):function(e,t){if(o.isBuffer(t)){var n=0|a(t.length),r=s(e,n);return 0===r.length||t.copy(r,0,0,n),r}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):l(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return l(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,n):new o(e,t,n)}function a(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function s(e,t){var n;return o.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t)).__proto__=o.prototype:(null===(n=e)&&(n=new o(t)),n.length=t),n}function c(e,t){var n=s(e,t<0?0:0|a(t));if(!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)n[r]=0;return n}function l(e,t){for(var n=t.length<0?0:0|a(t.length),r=s(e,n),i=0;i<n;i+=1)r[i]=255&t[i];return r}function u(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function d(e){return o.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length?0:u(e).length)}o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),o.prototype.write=function(e,t,n){void 0===t||void 0===n&&"string"==typeof t?(n=this.length,t=0):isFinite(t)&&(t|=0,isFinite(n)?n|=0:n=void 0);var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,t,n,r){return function(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}(u(t,e.length-n),e,n,r)}(this,e,t,n)},o.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n){if("string"==typeof e){if("string"==typeof t?(t=0,n=this.length):"string"==typeof n&&(n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=o.isBuffer(e)?e:new o(e),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this},o.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s(null,0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c(null,t),a=0;for(n=0;n<e.length;++n){var l=e[n];if(!o.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(i,a),a+=l.length}return i},o.byteLength=d,o.prototype._isBuffer=!0,o.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports=o},Z92M:function(e,t){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},aZ40:function(e,t,n){var r,i,o=n("Wogr");o.alloc?(r=o.alloc(512),i=o.alloc(256)):(r=new o(512),i=new o(256)),function(){for(var e=1,t=0;t<255;t++)r[t]=e,i[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)r[t]=r[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return i[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[i[e]+i[t]]}},"e/Dd":function(e,t){var n,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},e6BP:function(e,t){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=n},eQOe:function(e,t){function n(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,n=0,r=0,i=0,o=null,a=null,s=0;s<t;s++){r=i=0,o=a=null;for(var c=0;c<t;c++){var l=e.get(s,c);l===o?r++:(r>=5&&(n+=r-5+3),o=l,r=1),(l=e.get(c,s))===a?i++:(i>=5&&(n+=i-5+3),a=l,i=1)}r>=5&&(n+=r-5+3),i>=5&&(n+=i-5+3)}return n},t.getPenaltyN2=function(e){for(var t=e.size,n=0,r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var o=e.get(r,i)+e.get(r,i+1)+e.get(r+1,i)+e.get(r+1,i+1);4!==o&&0!==o||n++}return 3*n},t.getPenaltyN3=function(e){for(var t=e.size,n=0,r=0,i=0,o=0;o<t;o++){r=i=0;for(var a=0;a<t;a++)r=r<<1&2047|e.get(o,a),a>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|e.get(a,o),a>=10&&(1488===i||93===i)&&n++}return 40*n},t.getPenaltyN4=function(e){for(var t=0,n=e.data.length,r=0;r<n;r++)t+=e.data[r];return 10*Math.abs(Math.ceil(100*t/n/5)-10)},t.applyMask=function(e,t){for(var r=t.size,i=0;i<r;i++)for(var o=0;o<r;o++)t.isReserved(o,i)||t.xor(o,i,n(e,o,i))},t.getBestMask=function(e,n){for(var r=Object.keys(t.Patterns).length,i=0,o=1/0,a=0;a<r;a++){n(a),t.applyMask(a,e);var s=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(a,e),s<o&&(o=s,i=a)}return i}},ekOh:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}},jSPq:function(e,t,n){var r=n("Wogr"),i=n("JzKC");function o(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},o.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new r(this.degree);t.fill(0);var n=r.concat([e,t],e.length+this.degree),o=i.mod(n,this.genPoly),a=this.degree-o.length;if(a>0){var s=new r(this.degree);return s.fill(0),o.copy(s,a),s}return o},e.exports=o},"kk9/":function(e,t,n){var r=n("e/Dd").getSymbolSize;t.getPositions=function(e){var t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},lYJp:function(e,t,n){var r=n("e/Dd"),i=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var n=e.bit<<3|t,o=n<<10;r.getBCHDigit(o)-i>=0;)o^=1335<<r.getBCHDigit(o)-i;return 21522^(n<<10|o)}},nZSm:function(e,t,n){var r=n("u/Db"),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=r.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var n=45*i.indexOf(this.data[t]);n+=i.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},e.exports=o},qmMu:function(e,t,n){var r=n("Wogr"),i=n("e/Dd"),o=n("ekOh"),a=n("e6BP"),s=n("V35J"),c=n("1sBl"),l=n("kk9/"),u=n("eQOe"),d=n("NPxG"),p=n("jSPq"),h=n("yKow"),g=n("lYJp"),f=n("u/Db"),C=n("vvrf"),I=n("49sm");function _(e,t,n){var r,i,o=e.size,a=g.getEncodedBits(t,n);for(r=0;r<15;r++)e.set(r<6?r:r<8?r+1:o-15+r,8,i=1==(a>>r&1),!0),e.set(8,r<8?o-r-1:r<9?15-r-1+1:15-r-1,i,!0);e.set(o-8,8,1,!0)}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var n,g,m=o.M;return void 0!==t&&(m=o.from(t.errorCorrectionLevel,o.M),n=h.from(t.version),g=u.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),function(e,t,n,o){var g;if(I(e))g=C.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var m=t;if(!m){var E=C.rawSplit(e);m=h.getBestVersionForData(E,n)}g=C.fromString(e,m||40)}var v=h.getBestVersionForData(g,n);if(!v)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<v)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+v+".\n")}else t=v;var S=function(e,t,n){var o=new a;n.forEach((function(t){o.put(t.mode.bit,4),o.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(o)}));var s=8*(i.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);for(var c=(s-o.getLengthInBits())/8,l=0;l<c;l++)o.put(l%2?17:236,8);return function(e,t,n){for(var o=i.getSymbolTotalCodewords(t),a=o-d.getTotalCodewordsCount(t,n),s=d.getBlocksCount(t,n),c=s-o%s,l=Math.floor(o/s),u=Math.floor(a/s),h=u+1,g=l-u,f=new p(g),C=0,I=new Array(s),_=new Array(s),m=0,E=new r(e.buffer),v=0;v<s;v++){var S=v<c?u:h;I[v]=E.slice(C,C+S),_[v]=f.encode(I[v]),C+=S,m=Math.max(m,S)}var T,y,A=new r(o),F=0;for(T=0;T<m;T++)for(y=0;y<s;y++)T<I[y].length&&(A[F++]=I[y][T]);for(T=0;T<g;T++)for(y=0;y<s;y++)A[F++]=_[y][T];return A}(o,e,t)}(t,n,g),T=i.getSymbolSize(t),y=new s(T);return function(e,t){for(var n=e.size,r=l.getPositions(t),i=0;i<r.length;i++)for(var o=r[i][0],a=r[i][1],s=-1;s<=7;s++)if(!(o+s<=-1||n<=o+s))for(var c=-1;c<=7;c++)a+c<=-1||n<=a+c||e.set(o+s,a+c,s>=0&&s<=6&&(0===c||6===c)||c>=0&&c<=6&&(0===s||6===s)||s>=2&&s<=4&&c>=2&&c<=4,!0)}(y,t),function(e){for(var t=e.size,n=8;n<t-8;n++){var r=n%2==0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}(y),function(e,t){for(var n=c.getPositions(t),r=0;r<n.length;r++)for(var i=n[r][0],o=n[r][1],a=-2;a<=2;a++)for(var s=-2;s<=2;s++)e.set(i+a,o+s,-2===a||2===a||-2===s||2===s||0===a&&0===s,!0)}(y,t),_(y,n,0),t>=7&&function(e,t){for(var n,r,i,o=e.size,a=h.getEncodedBits(t),s=0;s<18;s++)n=Math.floor(s/3),e.set(n,r=s%3+o-8-3,i=1==(a>>s&1),!0),e.set(r,n,i,!0)}(y,t),function(e,t){for(var n=e.size,r=-1,i=n-1,o=7,a=0,s=n-1;s>0;s-=2)for(6===s&&s--;;){for(var c=0;c<2;c++)if(!e.isReserved(i,s-c)){var l=!1;a<t.length&&(l=1==(t[a]>>>o&1)),e.set(i,s-c,l),-1==--o&&(a++,o=7)}if((i+=r)<0||n<=i){i-=r,r=-r;break}}}(y,S),isNaN(o)&&(o=u.getBestMask(y,_.bind(null,y,n))),u.applyMask(o,y),_(y,n,o),{modules:y,version:t,errorCorrectionLevel:n,maskPattern:o,segments:g}}(e,n,m,g)}},"u/Db":function(e,t,n){var r=n("J6Nv"),i=n("BCVQ");t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return i.testNumeric(e)?t.NUMERIC:i.testAlphanumeric(e)?t.ALPHANUMERIC:i.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}},vvrf:function(e,t,n){var r=n("u/Db"),i=n("3X7Y"),o=n("nZSm"),a=n("AZa5"),s=n("Lzq4"),c=n("BCVQ"),l=n("e/Dd"),u=n("ELBg");function d(e){return unescape(encodeURIComponent(e)).length}function p(e,t,n){for(var r,i=[];null!==(r=e.exec(n));)i.push({data:r[0],index:r.index,mode:t,length:r[0].length});return i}function h(e){var t,n,i=p(c.NUMERIC,r.NUMERIC,e),o=p(c.ALPHANUMERIC,r.ALPHANUMERIC,e);return l.isKanjiModeEnabled()?(t=p(c.BYTE,r.BYTE,e),n=p(c.KANJI,r.KANJI,e)):(t=p(c.BYTE_KANJI,r.BYTE,e),n=[]),i.concat(o,t,n).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function g(e,t){switch(t){case r.NUMERIC:return i.getBitsLength(e);case r.ALPHANUMERIC:return o.getBitsLength(e);case r.KANJI:return s.getBitsLength(e);case r.BYTE:return a.getBitsLength(e)}}function f(e,t){var n,c=r.getBestModeForData(e);if((n=r.from(t,c))!==r.BYTE&&n.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(c));switch(n!==r.KANJI||l.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new i(e);case r.ALPHANUMERIC:return new o(e);case r.KANJI:return new s(e);case r.BYTE:return new a(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(f(t,null)):t.data&&e.push(f(t.data,t.mode)),e}),[])},t.fromString=function(e,n){for(var i=function(e,t){for(var n={},i={start:{}},o=["start"],a=0;a<e.length;a++){for(var s=e[a],c=[],l=0;l<s.length;l++){var u=s[l],d=""+a+l;c.push(d),n[d]={node:u,lastCount:0},i[d]={};for(var p=0;p<o.length;p++){var h=o[p];n[h]&&n[h].node.mode===u.mode?(i[h][d]=g(n[h].lastCount+u.length,u.mode)-g(n[h].lastCount,u.mode),n[h].lastCount+=u.length):(n[h]&&(n[h].lastCount=u.length),i[h][d]=g(u.length,u.mode)+4+r.getCharCountIndicator(u.mode,t))}}o=c}for(p=0;p<o.length;p++)i[o[p]].end=0;return{map:i,table:n}}(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];switch(i.mode){case r.NUMERIC:t.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:t.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:t.push([i,{data:i.data,mode:r.BYTE,length:d(i.data)}]);break;case r.BYTE:t.push([{data:i.data,mode:r.BYTE,length:d(i.data)}])}}return t}(h(e,l.isKanjiModeEnabled())),n),o=u.find_path(i.map,"start","end"),a=[],s=1;s<o.length-1;s++)a.push(i.table[o[s]].node);return t.fromArray(a.reduce((function(e,t){var n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[]))},t.rawSplit=function(e){return t.fromArray(h(e,l.isKanjiModeEnabled()))}},yKow:function(e,t,n){var r=n("e/Dd"),i=n("NPxG"),o=n("ekOh"),a=n("u/Db"),s=n("J6Nv"),c=n("49sm"),l=r.getBCHDigit(7973);function u(e,t){return a.getCharCountIndicator(e,t)+4}function d(e,t){var n=0;return e.forEach((function(e){var r=u(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=a.BYTE);var o=8*(r.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(n===a.MIXED)return o;var c=o-u(n,e);switch(n){case a.NUMERIC:return Math.floor(c/10*3);case a.ALPHANUMERIC:return Math.floor(c/11*2);case a.KANJI:return Math.floor(c/13);case a.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,n){var r,i=o.from(n,o.M);if(c(e)){if(e.length>1)return function(e,n){for(var r=1;r<=40;r++)if(d(e,r)<=t.getCapacity(r,n,a.MIXED))return r}(e,i);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(var i=1;i<=40;i++)if(n<=t.getCapacity(i,r,e))return i}(r.mode,r.getLength(),i)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}}}]);